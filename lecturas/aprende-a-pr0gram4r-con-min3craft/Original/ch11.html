<html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:ns="http://www.w3.org/2001/10/synthesis">
<head>
<title>Aprende a programar con Minecraft</title>
<link href="../styles/9781593276706.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:40af8c70-d268-482b-9282-0b537fc6ae71" name="Adept.expected.resource"/>
</head>
<body>
<h2 class="h2" id="ch11"><span epub:type="pagebreak" id="page_235"></span><strong><span class="blue1"><span class="big">11</span></span></strong><br translate="no"/><strong>GUARDAR Y CARGAR EDIFICIOS CON ARCHIVOS Y MÓDULOS</strong></h2>
<div class="image1"><img alt="image" src="../images/common01.jpg" translate="no"/></div>
<p class="noindent">Los archivos son una parte importante de la informática. Te permiten guardar datos para almacenarlos a largo plazo y cargar datos para utilizarlos en tus programas. Hasta ahora, los programas con los que has estado trabajando sólo han almacenado datos en variables. O bien has utilizado datos codificados en tus programas, o bien has tomado datos de la entrada del usuario. Aunque puedes hacer cosas increíbles con estos datos, estás limitado a sesiones individuales y a tu propio mundo Minecraft. Una vez que aprendas a almacenar y recuperar datos, podrás guardar y cargar tus creaciones de Minecraft en cualquier mundo de Minecraft, ¡incluso en los juegos de tus amigos!</p>
<p class="indent">En este capítulo aprenderás a obtener datos de archivos y a enviar datos a archivos. Utilizarás algunas funciones incorporadas en Python y aprenderás a utilizar dos <em>módulos</em> de Python, los módulos <span class="literal">pickle</span> y <span class="literal">shelve</span>, para almacenar creaciones enteras de Minecraft.</p>
<p class="indent">Los módulos pueden ampliar lo que es posible lograr con Python. Utilizando módulos, puedes dibujar imágenes en la pantalla o ejecutar sitios web. Los módulos también proporcionan funciones para tareas comunes para que no tengas que escribir tus propias soluciones.</p>
<p class="indent"><span epub:type="pagebreak" id="page_236"></span>También aprenderás sobre pip, que es un programa muy útil para instalar nuevos módulos. Lo probarás utilizando el módulo <span class="literal">Flask</span> para hacer un sitio web sencillo que se conecte a Minecraft y muestre la posición del jugador.</p>
<h3 class="h3" id="ch11lev1sec01"><strong><span class="blue1">Utilizar archivos</span></strong></h3>
<p class="noindent">Cuando trabajas con ordenadores, trabajas con archivos todo el tiempo. Cada vez que escribes un documento de texto o algo de código Python y lo guardas, estás trabajando con archivos. El texto, las imágenes, los vídeos y la música son archivos. Incluso este libro se guardó como un archivo de texto mientras lo escribía. Las funciones de manejo de archivos de Python son fáciles de aprender y te permitirán crear archivos, guardar archivos y leer información de archivos para hacer cosas interesantes en Minecraft. Empecemos por lo básico y aprendamos a leer y escribir en un archivo de texto en Python.</p>
<h4 class="h4" id="ch11lev2sec01"><strong><span class="blue1">Abrir un archivo</span></strong></h4>
<p class="noindent">Abrir un archivo es el primer paso cuando trabajas con archivos. Para abrir un archivo en Python, utilizas la función <span class="literal">open()</span>, que toma dos argumentos: la ubicación del archivo y sus permisos. La <em>ubicación</em> de un archivo es dónde está almacenado en tu ordenador. La pasarás a la función <span class="literal">open</span> () en forma de cadena. <em>Los permisos</em> del archivo controlan si Python puede o no leer o modificar el archivo.</p>
<p class="indent">Para abrir (o crear) un archivo de texto llamado archivosecreto <em>.txt</em> en Python, utilizarías el argumento <span class="literal">"archivosecreto.txt"</span>:</p>
<p class="programs" translate="no">secretFile = <span class="rose">open</span>(<span class="green">"secretFile.txt"</span>, <span class="green">"w"</span>)</p>
<p class="indent">El segundo argumento, <span class="literal">"</span>w", es el argumento de permisos, que especifica lo que el programa puede hacer con el archivo. En este caso, <span class="literal">w</span> significa que el programa puede escribir datos en el archivo archivoarchivo_secreto <em>.</em>txt.</p>
<p class="indent">Cuando un programa llama a la función <span class="literal">open()</span> con un nombre de archivo, Python comprueba primero si ya existe un archivo con ese nombre. Si el archivo existe, Python utilizará su contenido en el programa. Si no existe, Python creará un nuevo archivo con ese nombre.</p>
<p class="indent">Si no especificas un <em>directorio</em> con el nombre del archivo (una carpeta y un directorio son lo mismo), Python buscará el archivo en el directorio donde se encuentre el programa. Si el archivo está almacenado en un directorio diferente, debes especificarlo en el argumento. Por ejemplo, si <span class="literal"> secretFile</span> <em>.txt</em> estuviera en el directorio <em>secrets</em>, el primer argumento sería <span class="literal">"/secrets/secretFile.txt"</span>:</p>
<p class="programs" translate="no">secretFile = <span class="rose">open</span>(<span class="green">"/secrets/secretFile.txt"</span>, <span class="green">"w"</span>)</p>
<p class="indent">Si proporcionas un directorio en el argumento y el directorio no existe, o si el archivo no existe, recibirás un mensaje de error.</p>
<p class="indentb">Hay cuatro opciones para el argumento permisos:</p>
<p class="hanging"><span class="literal"><span class="codestrong">w</span></span> Significa sólo <em>escritura</em>. Los permisos de sólo escritura permiten al programa escribir nuevos datos en el archivo y sobrescribir el contenido que ya está en el archivo, <span epub:type="pagebreak" id="page_237"></span>pero el programa no puede leer el contenido del archivo. Si no existe un archivo con el nombre que proporcionas como primer argumento, el programa creará uno nuevo.</p>
<p class="hanging"><span class="literal"><span class="codestrong">r</span></span> Significa <em>sólo</em> lectura. Los permisos de sólo lectura permiten al programa leer el contenido del archivo, pero no pueden modificarlo. Este permiso no puede utilizarse para crear un nuevo archivo.</p>
<p class="hanging"><span class="literal"><span class="codestrong">r+</span></span> Significa <em>lectura y</em> escritura. Los permisos de lectura y escritura permiten al programa leer y modificar el contenido del archivo. El programa también puede escribir sobre cualquier contenido que ya esté en el archivo. Sin embargo, si el archivo no existe, no se creará uno nuevo; en su lugar, obtendrás un error.</p>
<p class="hanging"><span class="literal"><span class="codestrong">a</span></span> Significa <em>añadir</em>. Los permisos para añadir permiten al programa escribir nuevos datos sólo al final del archivo, dejando intacto el resto del contenido. El programa tampoco puede leer el contenido del archivo. Este permiso puede utilizarse para crear un nuevo archivo.</p>
<p class="indentt">Hay distintas circunstancias en las que utilizarías cada tipo de permiso. Digamos que escribes unas instrucciones para llegar a una impresionante mina de diamantes que has encontrado, y quieres cargar las instrucciones en Minecraft sin cambiarlas accidentalmente. En ese caso, querrías utilizar el permiso de sólo lectura para asegurarte de que no cambia nada del archivo. Alternativamente, si quieres que alguien pueda añadir datos a un archivo pero no quieres que vea los demás datos almacenados en el archivo, utilizarías el permiso append. Por ejemplo, podrías utilizar append si quieres que tus amigos añadan notas a un diario de viaje compartido, ¡sin dejar que se metan dentro y lean todos tus tesoros secretos!</p>
<p class="indent">A continuación, aprenderás a escribir datos en un archivo abierto, y aprenderás a cerrar ese archivo para utilizar esos datos más tarde.</p>
<h4 class="h4" id="ch11lev2sec02"><strong><span class="blue1">Escribir y guardar un archivo</span></strong></h4>
<p class="noindent">La función <span class="literal">write(</span> ) escribe datos en un archivo que el programa ha abierto. Es el pan de cada día del trabajo con archivos, porque te permite guardar todo tipo de datos. Proporcionas los datos que quieres escribir en el archivo como argumento de la función write( <span class="literal">)</span>.</p>
<p class="indent">Por ejemplo, vamos a abrir un fichero y escribir en él una simple cadena:</p>
<p class="programs" translate="no">   secretFile = <span class="rose">open</span>(<span class="green">"secretFile.txt"</span>, <span class="green">"w"</span>)<br translate="no"/>   secretFile.write(<span class="green">"This is a secret file. Shhh! Don't tell anyone."</span>)<br translate="no"/><span class="ent">➊</span> secretFile.close()</p>
<p class="indent">En primer lugar, debes abrir el fichero utilizando la función open( <span class="literal">)</span>. A continuación, utiliza la notación por puntos para llamar a la función escribir( <span class="literal">)</span> y escribir una cadena en <em>archivo secreto.txt</em>. A continuación, debes llamar a la función close( <span class="literal">)</span> <span class="ent">➊,</span> que guarda y cierra el archivo. Es importante que recuerdes incluir la función close( <span class="literal">)</span>; de lo contrario, los datos no se guardarán en el archivo.</p>
<p class="indent">Ejecuta el programa y luego abre <em>secretFile.txt</em> en un editor de texto para ver si se ha guardado tu mensaje secreto. Intenta cambiar la cadena para escribir algo <span epub:type="pagebreak" id="page_238"></span>diferente en el archivo y vuelve a ejecutar el programa. ¿Qué ocurre? ¡El mensaje antiguo debería haber sido sustituido por el mensaje nuevo! Prueba a cambiar de nuevo el mensaje, pero en lugar de pasar <span class="literal">"w</span> " pasa en su lugar <span class="literal">"a"</span>. ¿Qué ocurre ahora? Muy chulo, ¿eh?</p>
<h4 class="h4" id="ch11lev2sec03"><strong><span class="blue1">Leer un archivo</span></strong></h4>
<p class="noindent">La función <span class="literal">read(</span> ) lee todo el contenido de un archivo que un programa ha abierto. Puede que quieras utilizar los datos en tu programa, modificarlos y luego devolverlos al archivo, o dar salida a los datos para facilitar su consulta. Sea cual sea el motivo, utilizarás la función <span class="literal">read()</span> para leer archivos.</p>
<p class="indent">Para leer un fichero, primero debes abrirlo y luego acordarte de cerrarlo cuando hayas terminado. Es importante que aprendas este hábito cuando trabajes con archivos en tus programas, ¡para evitar errores!</p>
<p class="indent">Vamos a leer un archivo y luego mostrar su contenido para que podamos ver lo que dice. Este programa, <em>showSecretFile.py</em>, muestra el contenido de un fichero utilizando las funciones <span class="literal">read()</span> e <span class="literal">print()</span>:</p>
<p class="sidenote" translate="no"><span class="blue"><em>showSecretFile.py</em></span></p>
<p class="programs" translate="no">   secretFile = <span class="rose">open</span>(<span class="green">"secretFile.txt"</span>, <span class="green">"r"</span>)<br translate="no"/><br translate="no"/><span class="ent">➊</span> <span class="rose">print</span>(secretFile.read())<br translate="no"/>   secretFile.close()</p>
<p class="indent">En primer lugar, abrimos el archivo y pasamos <span class="literal">"r"</span> como argumento de permiso para que nuestro programa pueda leer el archivo. También puedes pasar <span class="literal">"r+"</span>, pero en este caso no vamos a escribir en el archivo, así que es mejor <span class="literal">"r</span> ". Para imprimir el contenido de <em>archivo_secreto.txt</em>, pasamos <span class="literal">archivo_secreto.read()</span> a una sentencia <span class="literal">print</span>. Por último, aunque no hayamos escrito ningún dato en el archivo, conviene cerrarlo con la función <span class="literal">close()</span>.</p>
<p class="indent">Ejecuta el programa para ver qué ocurre. El contenido de <em>archivo_secreto.txt</em> debería imprimirse en la pantalla. ¡Ahora puedes leer el archivo sin tener que abrirlo en un editor de texto como harías normalmente!</p>
<h4 class="h4" id="ch11lev2sec04"><strong><span class="blue1">Leer una línea de un archivo</span></strong></h4>
<p class="noindent">Supongamos que tienes un documento de texto largo y quieres ver sólo una parte. Aquí es donde resulta útil la función <span class="literal">readline(</span> ). A diferencia de la función <span class="literal">read</span> (), que obtiene todo el contenido del archivo, la función <span class="literal">readline</span> () obtiene una sola línea del archivo cada vez.</p>
<p class="indent">Para probar la función <span class="literal">readline</span> (), primero añade un montón de texto a <em>secretFile.txt</em>. Puedes hacerlo utilizando un editor de texto o usando tus nuevas habilidades de Python para escribir un montón de información en él. Si utilizas Python para escribir en tu archivo, añade <span class="literal">\n</span> a tus cadenas cada vez que quieras una nueva línea. Por ejemplo, si escribes <span class="literal">"</span> <span class="literal">Guay\nBaile\nFiesta</span> <span class="literal">"</span> en un archivo, Python coloca <span class="literal">"Guay"</span> en una línea, <span class="literal">"Baile"</span> en la siguiente y <span class="literal">"Fiesta"</span> en la última, así:</p>
<p class="programs" translate="no"><span class="blue1">Cool</span><br translate="no"/><span class="blue1">Dance</span><br translate="no"/><span class="blue1">Party</span></p>
<p class="indent"><span epub:type="pagebreak" id="page_239"></span>Cuando hayas añadido el texto a <em>secretFile.txt</em>, escribe este código en un archivo Python y guárdalo como <em>showSecretLines.py</em> en una nueva carpeta llamada <em>files</em>:</p>
<p class="sidenote" translate="no"><span class="blue"><em>showSecretLines.py</em></span></p>
<p class="programs" translate="no">secretFile = <span class="rose">open</span>(<span class="green">"secretFile.txt"</span>, <span class="green">"r"</span>)<br translate="no"/><br translate="no"/><span class="rose">print</span>(secretFile.readline())<br translate="no"/><span class="rose">print</span>(secretFile.readline())<br translate="no"/><span class="rose">print</span>(secretFile.readline())<br translate="no"/><br translate="no"/>secretFile.close()</p>
<p class="indent">Una vez más, debes abrir secretFile <em>.txt</em> antes de poder leer de él utilizando la función <span class="literal">readline()</span>. Como quieres que tu programa showSecretLines <em>.</em> py lea datos del archivo, debes volver a introducir <span class="literal">r</span> (o <span class="literal">r+</span>). A continuación, incluye tres sentencias <span class="literal">print</span> para imprimir las tres primeras líneas de archivosecreto <em>.txt</em>. Por último, vuelve a cerrar el archivo utilizando <span class="literal">close()</span>.</p>
<p class="indent">La función <span class="literal">readline</span> () comienza con la primera línea de tu archivo. Cada vez que se utiliza la función <span class="literal">readline</span> (), lee automáticamente la línea siguiente. Esta función es muy práctica para imprimir un par de líneas del principio de archivos de texto.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTA</span></strong></p>
<p class="notep"><em>La</em> función <span class="literal"><span class="codeitalic">readline</span></span> () <em>convierte el archivo en una lista de cadenas, donde cada elemento de la lista representa una sola línea. Si quieres imprimir una línea desde la mitad de un documento de texto, ¡podrías escribir un bucle para encontrar e imprimir una cadena concreta de la lista!</em></p>
</div>
<h4 class="h4a" id="ch11lev2sec05"><strong>Misión nº 64: Lista de tareas pendientes</strong></h4>
<p class="noindent">A veces puede que no tengas mucho tiempo libre para jugar a Minecraft. Puede que construyas estructuras complejas a lo largo de varios días en sesiones cortas. A medida que añadas programas para abrir puertas o teletransportar al jugador a algún lugar, tus construcciones se volverán más complejas y podrías tardar más en terminarlas. Trabajar en proyectos a lo largo de varios días puede hacer que olvides lo que estabas haciendo y lo que tienes que hacer a continuación. Esto me ocurre a menudo. Afortunadamente, ¡puedes crear un programa que te ayude a recordar!</p>
<p class="indent">Los programas de esta misión crean una lista de tareas pendientes y la muestran en el chat de Minecraft. Puedes utilizar este programa para hacer un seguimiento de tus objetivos en Minecraft, de modo que cuando tengas que dejar de jugar, puedas retomarlo fácilmente donde lo dejaste.</p>
<p class="indent">Para hacer la lista de tareas, escribirás dos programas distintos: uno para escribir la lista y otro para mostrarla. Empecemos creando el programa que escribe la lista.</p>
<h4 class="h4" id="ch11lev2sec06"><strong><span class="blue1">Parte 1: Escribir la lista de tareas pendientes</span></strong></h4>
<p class="noindent">En primer lugar, necesitas un programa para crear los elementos de la lista de tareas. <a href="ch11.xhtml#ch11ex1">El listado 11-1</a> te inicia, utilizando un bucle <span class="literal">while</span> y la función <span class="literal">input()</span> para añadir elementos a la lista de tareas pendientes. Cópialo en un archivo en IDLE y guárdalo como <em>inputToDoList.py</em> en la carpeta de <em>archivos</em>.</p>
<p class="sidenote" translate="no"><span epub:type="pagebreak" id="page_240"></span><span class="blue"><em>inputToDoList.py</em></span></p>
<p class="programs" translate="no"><span class="ent">➊</span> toDoFile =<br translate="no"/><br translate="no"/><span class="ent">➋</span> toDoList = <span class="green">""</span><br translate="no"/><br translate="no"/><span class="ent">➌</span> toDoItem = <span class="rose">input</span>(<span class="green">"Enter a to-do list item: "</span>)<br translate="no"/><br translate="no"/><span class="ent">➍</span> <span class="orange">while</span> toDoItem != <span class="green">"exit"</span>:<br translate="no"/><span class="ent">➎</span>     toDoList = toDoList + toDoItem + <span class="green">"\n"</span><br translate="no"/>       toDoItem = <span class="rose">input</span>(<span class="green">"Enter a to-do list item: "</span>)<br translate="no"/><br translate="no"/><span class="ent">➏</span> <span class="red"># Write the to-do list to the file</span><br translate="no"/><span class="ent">➐</span> <span class="red"># Close the file</span></p>
<p class="examplet"><a id="ch11ex1"></a><em>Lista 11-1: Inicio del programa para escribir elementos en tu lista de tareas pendientes</em></p>
<p class="indent">El programa crea una cadena vacía llamada <span class="literal">toDoList</span> <span class="ent">➋,</span> que almacenará todos los elementos de tu lista de tareas pendientes cuando los introduzcas. Utilizando la función <span class="literal">input()</span>, el programa te pide que introduzcas un elemento en la lista de tareas pendientes <span class="ent">➌.</span> A continuación, el bucle <span class="literal">while</span> comprueba si la entrada no es igual a "exit <span class="literal">"</span> <span class="ent">➍;</span> si no lo es, el programa añade tu elemento a la lista de tareas pendientes con una nueva línea al final utilizando <span class="literal">"\n"</span> <span class="ent">➎.</span> Sin embargo, si introduces <span class="literal">"exit</span>", el bucle deja de ejecutarse y no podrás añadir más elementos a la lista de tareas pendientes.</p>
<p class="indent">Tu misión es terminar el programa. Para ello, necesitas escribir el código que abra el archivo, escriba <span class="literal">toDoList</span> en el archivo y, a continuación, cierre el archivo. Utiliza la función <span class="literal">open()</span> para abrir el archivo al inicio del programa <span class="ent">➊.</span> Debes abrirlo con permisos de escritura. Nombra el archivo que abre la función <em>comoHacerLista.txt</em>. Tu programa creará el archivo si no existe ya en el directorio.</p>
<p class="indent">Al final del programa, escribe el contenido de la lista de tareas en el archivo para poder acceder a él más tarde. Utiliza la función <span class="literal">write()</span> para escribir la variable <span class="literal">toDoList</span> en el archivo <span class="literal">toDoFile</span> ➏. Después de escribir en el archivo, asegúrate de cerrarlo con la función <span class="literal">close</span> () en la última línea ➐.</p>
<p class="indent"><a href="ch11.xhtml#ch11fig1">La Figura 11-1</a> me muestra escribiendo una lista de tareas con el programa. Cuando termino, escribo <span class="literal">exit</span>.</p>
<div class="image"><img alt="image" src="../images/f11-01.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig1"></a><em>Figura 11-1: Introduciendo cosas que hacer, como construir un bosque de pasteles y jugar al escondite</em></p>
<h4 class="h4" id="ch11lev2sec07"><span epub:type="pagebreak" id="page_241"></span><strong><span class="blue1">Parte 2: Visualización de la lista de cosas por hacer</span></strong></h4>
<p class="noindent">Ahora que tienes un programa para escribir una lista de cosas por hacer en un archivo, necesitas mostrar la lista de cosas por hacer en el chat de Minecraft, línea a línea. El listado <a href="ch11.xhtml#ch11ex2">11-2</a> inicia el programa por ti. Copia el listado en un nuevo archivo y guárdalo como <em>outputToDoList.py</em> en la carpeta de <em>archivos</em>.</p>
<p class="sidenote" translate="no"><span class="blue"><em>outputToDoList.py</em></span></p>
<p class="programs" translate="no"> <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br translate="no"/>   mc = Minecraft.create()<br translate="no"/><br translate="no"/><span class="ent">➊</span> toDoList =<br translate="no"/><br translate="no"/> <span class="orange">for</span> line <span class="orange">in</span> toDoList:<br translate="no"/><span class="ent">➋</span> <span class="red"># Output "line" to the chat</span></p>
<p class="examplet"><a id="ch11ex2"></a><em>Listado 11-2: Programa para enviar el archivo de la lista de tareas al chat de Minecraft</em></p>
<p class="indent"><a href="ch11.xhtml#ch11ex2">El listado 11-2</a> utiliza un bucle <span class="literal">for</span> para enviar cada línea del archivo <em>toDoList.txt</em> al chat de Minecraft, de una en una. De momento, el programa está incompleto. Para terminar el programa, añade la función <span class="literal">open()</span> para abrir el archivo <em>toDoList.t</em> xt que creaste con <em>inputToDoList.py</em> <span class="ent">➊.</span> Asegúrate de que el archivo tiene permisos de lectura. Después de abrir el archivo, añade código dentro del bucle <span class="literal">for</span> para enviar la cadena almacenada en la variable <span class="literal">line</span> al chat de Minecraft <span class="ent">➋.</span> Para ello tendrás que utilizar las funciones <span class="literal">readline()</span> y <span class="literal">postToChat()</span>.</p>
<p class="indent"><a href="ch11.xhtml#ch11fig2">La Figura 11</a> -2 muestra mi lista de tareas pendientes en el chat de Minecraft.</p>
<div class="image"><img alt="image" src="../images/f11-02.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig2"></a><em>Figura 11-2: Ahora, cuando vuelva a construir, podré ver lo que tengo que hacer.</em></p>
<h3 class="h3" id="ch11lev1sec02"><span epub:type="pagebreak" id="page_242"></span><strong><span class="blue1">Uso de módulos</span></strong></h3>
<p class="noindent"><em>Los</em> módulos son colecciones de funciones que puedes importar a Python para no tener que escribir esas funciones en tus programas. Un módulo suele tener una finalidad específica, como realizar cálculos científicos o crear juegos, y hay una gran variedad de módulos disponibles para Python. ¡Puede que te sorprenda saber que has estado utilizando módulos a lo largo de este libro! La API Python de Minecraft es un módulo: cada vez que has escrito <span class="literal">from mcpi.minecraft import Minecraft</span>, has estado utilizando un módulo. El módulo API Python de Minecraft te permite conectar tus programas Python a Minecraft. Como está preescrito por otra persona, puedes utilizar las funciones del módulo sin tener que escribir el código tú mismo.</p>
<p class="indent">Python viene con un montón de módulos que puedes utilizar en tus programas. Estos módulos, junto con todo el Python que has aprendido en este libro hasta ahora, se denominan <em>biblioteca estándar de Python</em>. También puedes instalar módulos que no formen parte de la biblioteca estándar; lo haremos en "<a href="ch11.xhtml#ch11lev1sec04">Instalar nuevos módulos con pip</a>" en <a href="ch11.xhtml#page_256">la página 256</a>.</p>
<p class="indent">En esta sección, aprenderás todas las formas en que puedes configurar tus programas para que utilicen módulos. Como ejemplo, utilizaremos el módulo <span class="literal">pickle</span>, que proporciona formas más avanzadas de guardar y cargar datos con archivos que simplemente escribir y leer datos de ellos. Veamos ahora el módulo <span class="literal">pickle</span>.</p>
<h4 class="h4" id="ch11lev2sec08"><strong><span class="blue1">El módulo pickle</span></strong></h4>
<p class="noindent">El módulo <span class="literal">pickle</span> es muy útil cuando escribes datos complicados en un archivo. Por ejemplo, los diccionarios y las listas multidimensionales son difíciles de almacenar y recuperar utilizando las funciones estándar que hemos utilizado anteriormente en el capítulo. Aquí es donde el módulo <span class="literal">pickle</span> resulta útil.</p>
<p class="indent">El módulo <span class="literal">pickle</span> puede ahorrarte horas de escribir y depurar tus propias soluciones para almacenar datos complejos. También puedes utilizar el módulo <span class="literal">pickle</span> con datos sencillos: por ejemplo, puedes utilizarlo para almacenar números sin convertirlos a y desde cadenas, lo que es necesario para la entrada y salida estándar de archivos.</p>
<p class="indent">En otras palabras, puedes utilizar el módulo <span class="literal">pickle</span> para guardar el valor de una variable en un archivo y luego leer el valor de la variable directamente en otro programa sin ningún procesamiento adicional. El tipo de datos sigue siendo el mismo que cuando guardaste el valor, aunque el tipo de datos sea una cadena, un entero, un flotante o un booleano.</p>
<p class="indent">A continuación, aprenderás a importar módulos utilizando <span class="literal">pickle</span> como ejemplo. Luego utilizarás <span class="literal">pickle</span> para guardar algunos datos complejos: ¡un edificio entero de Minecraft!</p>
<h4 class="h4" id="ch11lev2sec09"><strong><span class="blue1">Importar pickle</span></strong></h4>
<p class="noindent">Para utilizar las funciones de cualquier módulo, tienes que importarlo utilizando la palabra clave <span class="literal">import</span>. En realidad, ya has utilizado la palabra clave <span class="literal">importar</span> para importar módulos, como el módulo <span class="literal">del tiempo</span>, así como funciones de la API Minecraft de Python.</p>
<p class="indent"><span epub:type="pagebreak" id="page_243"></span>Una vez que hayas importado el módulo en tu programa, puedes utilizar las funciones del módulo utilizando la notación punto. Incluye el nombre del módulo, un punto y la función que quieras utilizar. Vamos a importar el módulo <span class="literal">pickle</span> y a utilizar un par de sus funciones:</p>
<p class="programs" translate="no"><span class="ent">➊</span> <span class="orange">import</span> pickle<br translate="no"/><br translate="no"/>   locations = {<span class="green">'John'</span>: <span class="green">'Forest'</span>, <span class="green">'Phillipa'</span>: <span class="green">'Mountains'</span>, <span class="green">'Pete'</span>: <span class="green">'City'</span>}<br translate="no"/><br translate="no"/><span class="ent">➋</span> secretFile= <span class="rose">open</span>(<span class="green">"secretFile.txt", "wb"</span>)<br translate="no"/><span class="ent">➌</span> pickle.dump(locations, secretFile)</p>
<p class="indent">Importamos el módulo <span class="literal">pickle</span> en <span class="ent">➊.</span> A continuación abrimos <em>secretFile.txt</em> con un permiso de archivo especial, <span class="literal">"wb"</span> <span class="ent">➋.</span> Cuando abres un archivo con <span class="literal">pickle</span>, debes añadir <span class="literal">b</span> al permiso del archivo. En este caso, <span class="literal">"</span> wb" escribe datos en el archivo utilizando un formato especial que requiere el módulo <span class="literal">pickle</span>.</p>
<p class="indent">La función <span class="literal">dump</span> () escribe en el archivo en <span class="ent">➌.</span> La función <span class="literal">dump</span> () del módulo <span class="literal">pickle</span> almacena una variable en un archivo. Toma dos argumentos: los datos que se escribirán en el archivo y el archivo abierto en el que escribirá. Este ejemplo almacena las ubicaciones de los agentes secretos en un diccionario llamado <span class="literal">ubicaciones</span> y luego vuelca ese diccionario en un archivo llamado <span class="literal">archivoSecreto</span>. Como <span class="literal">dump()</span> pertenece al módulo <span class="literal">pickle</span>, debes utilizar la notación con puntos para especificar tanto el módulo como la función con <span class="literal">pickle.dump()</span>. A diferencia de las funciones de archivo estándar de Python, la función <span class="literal">dump</span> () guarda los datos en el archivo automáticamente: no necesitas cerrar el archivo con la función <span class="literal">close()</span>.</p>
<p class="indent">El módulo <span class="literal">pickle</span> también te permite leer datos almacenados. Puedes utilizar la función <span class="literal">load()</span> de <span class="literal">pickle</span>para leer el contenido de un archivo. Toma un argumento, el archivo que quieres cargar, y devuelve el contenido del archivo. El siguiente ejemplo carga el diccionario de <span class="literal">localizaciones</span> que almacenamos anteriormente. Añade este código al programa:</p>
<p class="programs" translate="no"> <span class="orange">import</span> pickle<br translate="no"/><br translate="no"/><span class="ent">➊</span> secretFile= <span class="rose">open</span>(<span class="green">"secretFile.txt"</span>, <span class="green">"rb"</span>)<br translate="no"/>   locations = pickle.load(secretFile)</p>
<p class="indent">Primero abrimos el archivo con el permiso <span class="literal">"rb"</span> <span class="ent">➊,</span> que permite a tu programa leer un formato de datos especial que utiliza <span class="literal">pickle</span>. Luego cargamos el diccionario.</p>
<p class="indent">Una vez cargado el diccionario, puedes tratarlo como cualquier otro diccionario. Por ejemplo, puedes acceder al valor de una de las claves. Sólo tienes que añadir este código después de la función pickle <span class="literal">.load()</span>:</p>
<p class="programs" translate="no"><span class="rose">print</span>(locations[<span class="green">'Phillipa'</span>])</p>
<p class="indent">Esto imprimirá <span class="literal">'Montañas'</span>, el valor de la clave <span class="literal">'Phillipa'</span>. Esto se debe a que el diccionario del archivo no cambia cuando se carga en el programa <span epub:type="pagebreak" id="page_244"></span>con pickle <span class="literal">:</span>sigue siendo un diccionario, por lo que podemos acceder a sus claves y valores y utilizarlo como cualquier otro diccionario de Python. También podrías hacer lo mismo con una lista o una variable.</p>
<h4 class="h4" id="ch11lev2sec10"><strong><span class="blue1">Importar una función con la cláusula from</span></strong></h4>
<p class="noindent">Importar un módulo significa que tienes acceso a todas las funciones de ese módulo, pero a veces sólo necesitas una función de un módulo. Si quieres importar sólo una función, utiliza la cláusula <span class="literal">from</span> al importar el módulo. Esta cláusula te permite acceder a la función sin incluir el nombre del módulo y la notación de punto cada vez que llames a una función. Sólo tendrías que escribir <span class="literal">function()</span> en lugar de <span class="literal">module.function()</span>.</p>
<p class="indent">A veces, cuando utilizas el módulo <span class="literal">pickle</span>, puedes querer utilizar sólo la función <span class="literal">dump()</span>, y no sus otras funciones. Para ello, cambia el código que escribiste antes para que tenga este aspecto:</p>
<p class="programs" translate="no"><span class="ent">➊</span> <span class="orange">from</span> pickle <span class="orange">import</span> dump<br translate="no"/><br translate="no"/>   locations = {<span class="green">'John'</span>: <span class="green">'Forest'</span>, <span class="green">'Phillipa'</span>: <span class="green">'Mountains'</span>, <span class="green">'Pete'</span>: <span class="green">'City'</span>}<br translate="no"/><br translate="no"/>   secretFile= <span class="rose">open</span>(<span class="green">"secretFile"</span>, <span class="green">"wb"</span>)<br translate="no"/><span class="ent">➋</span> dump(locations, secretFile)</p>
<p class="indent">La primera línea utiliza la cláusula <span class="literal">from</span> para importar sólo la función dump( <span class="literal">)</span> del módulo <span class="literal">pickle</span> <span class="ent">➊.</span> La última línea llama a la función <span class="literal">dump</span> () <span class="ent">➋.</span> Fíjate en que no tiene notación de punto. Simplemente llamas al nombre de la función sin hacer referencia al nombre del módulo.</p>
<p class="indent">También puedes importar más de una función de un módulo utilizando <span class="literal">from</span>. Lo único que tienes que hacer es separar los nombres de las funciones con una coma. Por ejemplo, si quieres utilizar las funciones <span class="literal">dump()</span> y <span class="literal">load()</span> de <span class="literal">pickle</span> en el mismo archivo, puedes importarlas ambas:</p>
<p class="programs" translate="no"><span class="ent">➊</span> <span class="orange">from</span> pickle <span class="orange">import</span> dump, load<br translate="no"/>   locations = {<span class="green">'John'</span>: <span class="green">'Forest'</span>, <span class="green">'Phillipa'</span>: <span class="green">'Mountains'</span>, <span class="green">'Pete'</span>: <span class="green">'City'</span>}<br translate="no"/><br translate="no"/>   secretFile= <span class="rose">open</span>(<span class="green">"secretFile"</span>, <span class="green">"wb"</span>)<br translate="no"/><span class="ent">➋</span> dump(locations, secretFile)<br translate="no"/><br translate="no"/><span class="ent">➌</span> locations = load(secretFile)<br translate="no"/> <span class="rose">print</span>(locations[<span class="green">'Phillipa'</span>])</p>
<p class="indent">La primera línea utiliza la cláusula <span class="literal">from</span> con comas para importar las funciones dump( <span class="literal">)</span> y load( <span class="literal">)</span> <span class="ent">➊.</span> Esto significa que más adelante en el programa, puedes utilizar estas funciones sin tener que incluir el nombre de la función y la notación de puntos, que puedes ver en <span class="ent">➋</span> y <span class="ent">➌.</span></p>
<h4 class="h4" id="ch11lev2sec11"><span epub:type="pagebreak" id="page_245"></span><strong><span class="blue1">Importar todas las funciones con *</span></strong></h4>
<p class="noindent">También puedes importar todas las funciones de un módulo para no tener que incluir el nombre del módulo con la notación de puntos cada vez que lo utilices. Para ello, introduce un asterisco<span class="literal">(*</span>) al final de la sentencia <span class="literal">import</span>, como se indica a continuación:</p>
<p class="programs" translate="no"><span class="ent">➊</span> <span class="orange">from</span> pickle <span class="orange">import</span> *<br translate="no"/>   locations = {<span class="green">'John'</span>: <span class="green">'Forest'</span>, <span class="green">'Phillipa'</span>: <span class="green">'Mountains'</span>, <span class="green">'Pete'</span>: <span class="green">'City'</span>}<br translate="no"/><br translate="no"/>   secretFile= <span class="rose">open</span>(<span class="green">"secretFile"</span>, <span class="green">"wb"</span>)<br translate="no"/><span class="ent">➋</span> dump(locations, secretFile)<br translate="no"/><br translate="no"/><span class="ent">➌</span> locations = load(secretFile)<br translate="no"/> <span class="rose">print</span>(locations[<span class="green">'Phillipa'</span>])</p>
<p class="indent">Como este código importó todas las funciones del módulo utilizando un asterisco <span class="ent">➊,</span> no necesitamos utilizar la notación con puntos cuando llamemos a las funciones <span class="literal">dump()</span> <span class="ent">➋</span> y <span class="literal">load()</span> <span class="ent">➌</span>.</p>
<p class="indent">La opción <span class="literal">*</span> es muy práctica, ¡pero conlleva un riesgo! Si trabajas con varios módulos, puede que dos módulos compartan los mismos nombres de función. Cuando esto ocurra, Python se confundirá y podrías obtener un error. Por eso, cuando trabajes con muchos módulos, es mejor que evites utilizar la opción <span class="literal">*</span> y en su lugar importes sólo las funciones que necesites utilizar.</p>
<h4 class="h4" id="ch11lev2sec12"><strong><span class="blue1">Dar un apodo a un módulo</span></strong></h4>
<p class="noindent">A veces querrás cambiar el nombre de un módulo porque su nombre es demasiado largo y quieres utilizar un nombre más corto en tu programa. O quieres cambiar el nombre del módulo para que sea más fácil de recordar. O quizás quieras cambiar su nombre porque el módulo comparte el mismo nombre que otro módulo y quieres evitar conflictos.</p>
<p class="indent">Puedes utilizar la cláusula <span class="literal">as</span> con la sentencia <span class="literal">import</span> para dar a un módulo un <em>alias, un</em>apodo. Por ejemplo, este código importa el módulo <span class="literal">pickle</span> y lo renombra a <span class="literal">p</span>:</p>
<p class="programs" translate="no"><span class="orange">import</span> pickle as p</p>
<p class="indent">Ahora, cada vez que quieras utilizar el módulo <span class="literal">pickle</span>, puedes escribir <span class="literal">p</span> en tu programa en lugar de <span class="literal">pickle</span>. Aquí tienes un ejemplo de esto en acción:</p>
<p class="programs" translate="no">p.dump(locations, secretFile)</p>
<p class="indent">Observa que se utiliza p. <span class="literal">dump()</span> en lugar de pickle <span class="literal">.dump()</span>. Esto te ahorra tiempo, ¡porque no tienes que seguir escribiendo <span class="literal">pickle</span>!</p>
<h4 class="h4a" id="ch11lev2sec13"><span epub:type="pagebreak" id="page_246"></span><strong>Misión nº 65: Salvar un edificio</strong></h4>
<p class="noindent">Construir cosas es mi parte favorita de Minecraft. Me he pasado horas construyendo casas, castillos, aldeas y muchas otras cosas. Pero cuando me traslado a otra parte del mapa o a un mundo diferente, tengo que dejar atrás mis creaciones. Seguro que tú también has tenido que abandonar algunas creaciones increíbles.</p>
<p class="indent">¿No sería genial que pudieras guardar tus edificios y llevártelos contigo cuando te trasladas a mundos diferentes? Pues con <span class="literal">Pickle</span> y la API de Python, ¡puedes hacerlo!</p>
<p class="indent">En esta misión, desarrollarás dos programas que guardarán y cargarán edificios en tu juego Minecraft. Un programa guardará el edificio, y el otro lo cargará. Ambos programas se basan en <em>duplicateArea.py</em> del <a href="ch10.xhtml#ch10">Capítulo 10</a><a href="ch10.xhtml#page_229">(página 229</a>).</p>
<h4 class="h4" id="ch11lev2sec14"><strong><span class="blue1">Parte 1: Guardar el edificio</span></strong></h4>
<p class="noindent">El primer programa guardará un edificio en un archivo. <a href="ch11.xhtml#ch11ex3">El listado 11-3</a> incluye el código para copiar el edificio. Copia el listado en un archivo en IDLE y guárdalo como <em>guardarEstructura.</em> py en la carpeta <em>archivos</em>.</p>
<p class="sidenote" translate="no"><span class="blue"><em>saveStructure.py</em></span></p>
<p class="programs" translate="no"> <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br translate="no"/>   mc = Minecraft.create()<br translate="no"/><br translate="no"/> <span class="orange">import</span> pickle<br translate="no"/><br translate="no"/><br translate="no"/> <span class="orange">def</span> <span class="blue1">sortPair</span>(val1, val2):<br translate="no"/> <span class="orange">if</span> val1 &gt; val2:<br translate="no"/> <span class="orange">return</span> val2, val1<br translate="no"/> <span class="orange">else</span>:<br translate="no"/> <span class="orange">return</span> val1, val2<br translate="no"/><br translate="no"/><br translate="no"/><span class="ent">➊</span> <span class="orange">def</span> <span class="blue1">copyStructure</span>(x1, y1, z1, x2, y2, z2):<br translate="no"/>       x1, x2 = sortPair(x1, x2)<br translate="no"/>       y1, y2 = sortPair(y1, y2)<br translate="no"/>       z1, z2 = sortPair(z1, z2)<br translate="no"/><br translate="no"/>       width = x2 - x1<br translate="no"/>       height = y2 - y1<br translate="no"/>       length = z2 - z1<br translate="no"/><br translate="no"/>       structure = []<br translate="no"/><br translate="no"/> <span class="rose">print</span>(<span class="green">"Please wait..."</span> )<br translate="no"/><br translate="no"/> <span class="red"># Copy the structure</span><br translate="no"/> <span class="orange">for</span> row <span class="orange">in</span> <span class="rose">range</span>(height):<br translate="no"/>           structure.append([])<br translate="no"/> <span class="orange">for</span> column <span class="orange">in</span> <span class="rose">range</span>(width):<br translate="no"/>               structure[row].append([])<br translate="no"/> <span class="orange">for</span> depth <span class="orange">in</span> <span class="rose">range</span>(length):<br translate="no"/><span class="ent">➋</span>                 block = mc.getBlock(x1 + column, y1 + row, z1 + depth)<br translate="no"/>                   structure[row][column].append(block)<br translate="no"/><br translate="no"/> <span class="orange">return</span> structure<br translate="no"/><br translate="no"/><span class="ent">➌</span> <span class="red"># Get the position of the first corner</span><br translate="no"/> <span class="rose">input</span>(<span class="green">"Move to the first position and press ENTER in this window"</span>)<br translate="no"/>   pos1 = mc.player.getTilePos()<br translate="no"/><br translate="no"/>   x1 = pos1.x<br translate="no"/>   y1 = pos1.y<br translate="no"/>   z1 = pos1.z<br translate="no"/><br translate="no"/><span class="ent">➍</span> <span class="red"># Get the position of the second corner</span><br translate="no"/> <span class="rose">input</span>(<span class="green">"Move to the opposite corner and press ENTER in this window"</span>)<br translate="no"/>   pos2 = mc.player.getTilePos()<br translate="no"/><br translate="no"/>   x2 = pos2.x<br translate="no"/>   y2 = pos2.y<br translate="no"/>   z2 = pos2.z<br translate="no"/><br translate="no"/><span class="ent">➎</span> structure = copyStructure( x1, y1, z1, x2, y2, z2)<br translate="no"/><br translate="no"/><span class="ent">➏</span> <span class="red"># Store the structure in a file</span></p>
<p class="examplet"><span epub:type="pagebreak" id="page_247"></span><a id="ch11ex3"></a><em>Listado 11-3: Código incompleto para guardar un edificio en un archivo</em></p>
<p class="indent">La función <span class="literal">copiarEstructura(</span> ) copia un área del juego en un conjunto de listas tridimensionales <span class="ent">➊.</span> Toma dos conjuntos de coordenadas como argumentos. He hecho un ligero cambio en la función <span class="literal">copyStructure</span> () en comparación con <em>duplicateArea.py</em>. He utilizado la función <span class="literal">getBlockWithData</span> () en lugar de la función <span class="literal">getBlock()</span> <span class="ent">➋.</span> En lugar de obtener sólo el ID de bloque de un bloque en unas coordenadas determinadas, la función <span class="literal">getBlockWithData</span> () obtiene también el estado del bloque. Esto es útil para bloques como las escaleras, donde la dirección de las escaleras se almacena en el estado del bloque. Cuando se copie la estructura, las escaleras y otros bloques que estén orientados en una dirección determinada se construirán en la dirección correcta.</p>
<p class="indent">He incluido un código muy útil para que puedas utilizar la posición del jugador para establecer las coordenadas de un edificio que quieras copiar. Cuando ejecutes el programa, te pedirá que te desplaces a la primera esquina de la estructura y luego pulses <small>INTRO</small> en el intérprete de comandos de Python <span class="ent">➌.</span> El programa utiliza la posición del jugador para obtener el primer conjunto de coordenadas del edificio. A continuación, te pide que te muevas a la esquina opuesta de la estructura y hagas lo mismo <span class="ent">➍.</span> Como resultado, puedes situarte donde quieras para empezar a copiar tu edificio en lugar de escribir las coordenadas o codificarlas en tu programa.</p>
<p class="indent">Los valores de estas variables de coordenadas se pasan a la función <span class="literal">copiarEstructura()</span> en <span class="ent">➎.</span> El valor devuelto se almacena en una variable llamada <span class="literal">estructura</span>.</p>
<p class="indent">Para completar el código, necesitas abrir un nuevo archivo con <span class="literal">pickle</span>. Llama al nuevo archivo <span class="literal">"pickleArchivo"</span>. A continuación, escribe el código para almacenar el edificio en el archivo. Hazlo utilizando el módulo <span class="literal">pickle</span> para escribir el valor de la variable <span class="literal">estructura</span> en un archivo ➏.</p>
<p class="indent"><span epub:type="pagebreak" id="page_248"></span><a href="ch11.xhtml#ch11fig3">La Figura 11-3</a> muestra una torre que construí en mi mundo Minecraft.</p>
<div class="image"><img alt="image" src="../images/f11-03.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig3"></a><em>Figura 11-3: Mi torre que quiero copiar</em></p>
<p class="indent">Para copiar la torre utilizando <em>saveStructure.</em>py, me muevo a una esquina y pulso <small>ENTER</small> en IDLE<a href="ch11.xhtml#ch11fig4">(Figura 11-4</a>).</p>
<div class="image"><img alt="image" src="../images/f11-04.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig4"></a><em>Figura 11-4: De pie junto a una esquina de la torre</em></p>
<p class="indent">Luego me desplazo a la esquina opuesta de la torre y pulso <small>ENTER</small> en IDLE por segunda vez (Figura<a href="ch11.xhtml#ch11fig5">11-5</a>).</p>
<div class="image"><span epub:type="pagebreak" id="page_249"></span><img alt="image" src="../images/f11-05.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig5"></a><em>Figura 11-5: Volando hacia la esquina opuesta de la torre</em></p>
<p class="indent">Sigue los mismos pasos para utilizar <em>saveStructure.</em> py para guardar uno de tus propios edificios. A continuación completaremos la otra mitad del proceso y cargaremos nuestros edificios guardados en el juego.</p>
<h4 class="h4" id="ch11lev2sec15"><strong><span class="blue1">Parte 2: Cargar el edificio</span></strong></h4>
<p class="noindent">El segundo programa necesita cargar el edificio en el juego desde el archivo (llamado <em>pickleFile</em>) creado por <em>saveStructure</em>.py. <a href="ch11.xhtml#ch11ex4">El listado 11-4</a> incluye código del programa <em>duplicarArea.py</em><a href="ch10.xhtml#page_229">(página 229</a>) que coloca un edificio guardado en listas. Copia el listado en un archivo en IDLE y guárdalo como <em>loadStructure.</em> py en la carpeta de <em>archivos</em>.</p>
<p class="sidenote" translate="no"><span class="blue"><em>loadStructure.py</em></span></p>
<p class="programs" translate="no"> <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br translate="no"/>   mc = Minecraft.create()<br translate="no"/><br translate="no"/> <span class="orange">import</span> pickle<br translate="no"/><br translate="no"/><br translate="no"/><span class="ent">➊</span> <span class="orange">def</span> <span class="blue1">buildStructure</span>(x, y, z, structure):<br translate="no"/>       xStart = x<br translate="no"/>       zStart = z<br translate="no"/> <span class="orange">for</span> row <span class="orange">in</span> structure:<br translate="no"/> <span class="orange">for</span> column <span class="orange">in</span> row:<br translate="no"/> <span class="orange">for</span> block <span class="orange">in</span> column:<br translate="no"/>                   mc.setBlock(x, y, z, block.id, block.data)<br translate="no"/>                   z += 1<br translate="no"/>               x += 1<br translate="no"/>               z = zStart<br translate="no"/>           y += 1<br translate="no"/>           x = xStart<br translate="no"/><br translate="no"/> <span class="red"># Open and load the structure file</span><br translate="no"/><span class="ent">➋</span> structure =<br translate="no"/><br translate="no"/><span class="ent">➌</span> pos = mc.player.getTilePos()<br translate="no"/>   x = pos.x<br translate="no"/>   y = pos.y<br translate="no"/>   z = pos.z<br translate="no"/><span class="ent">➍</span> buildStructure(x, y, z, structure)</p>
<p class="examplet"><span epub:type="pagebreak" id="page_250"></span><a id="ch11ex4"></a><em>Listado 11-4: Cuando esté completo, este programa construirá un edificio a partir de un archivo.</em></p>
<p class="indent">La función <span class="literal">buildStructure()</span> <span class="ent">➊</span> hace la mayor parte del trabajo en este programa. Construye la estructura en el juego utilizando cuatro argumentos: coordenadas x, y y z y una estructura almacenada en una lista tridimensional.</p>
<p class="indent">Importa el módulo <span class="literal">pickle</span> para poder cargar la estructura en el programa, y luego almacénala en la variable <span class="literal">estructura</span> en <span class="ent">➋.</span> Utilizando la función <span class="literal">open()</span>, abre el archivo <em>pickleFile</em> en el que guardaste la estructura. A continuación, cárgala en la variable <span class="literal">estructura</span> utilizando la función <span class="literal">load()</span> de <span class="literal">pickle</span>. Una vez cargada la estructura, cierra <em>pickleFile</em> utilizando la función <span class="literal">close()</span> de <span class="literal">pickle</span>.</p>
<p class="indent">También se incluye en <a href="ch11.xhtml#ch11ex4">el Listado 11-4</a> un código que obtiene la posición del jugador para utilizarla como ubicación inicial de la estructura <span class="ent">➌.</span></p>
<p class="indent">Una vez cargada la estructura y fijadas las coordenadas, pasa la estructura a la función <span class="literal">buildStructure(</span> ) junto con una posición <span class="ent">➍,</span> que construirá la estructura guardada.</p>
<p class="indent"><a href="ch11.xhtml#ch11fig6">La Figura 11-6</a> muestra el programa en acción. El edificio que guardé antes se ha cargado en el juego y se ha reconstruido en una nueva posición. Pruébalo tú mismo: ¡ahora puedes llevarte tus creaciones dondequiera que vayas!</p>
<div class="image"><img alt="image" src="../images/f11-06.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig6"></a><em>Figura 11-6: ¡Mira, es una copia de mi torre!</em></p>
<p class="indent">Pero, ¿y si creas un pueblo entero y quieres llevártelo contigo? Podrías guardar cada edificio en su propio archivo utilizando <span class="literal">pickle</span>, pero eso no es muy cómodo. El módulo <span class="literal">pickle</span> funciona muy bien para guardar un solo edificio, pero no es tan bueno para guardar un montón de edificios. Ahí es donde entra en juego el módulo <span class="literal">shelve</span>. Veámoslo a continuación.</p>
<h3 class="h3" id="ch11lev1sec03"><span epub:type="pagebreak" id="page_251"></span><strong><span class="blue1">Almacenar muchos datos con el módulo shelve</span></strong></h3>
<p class="noindent">El módulo <span class="literal">pepinillo</span> sólo puede almacenar un dato cada vez. En algunos programas, puede que quieras almacenar varias variables; si utilizas el módulo <span class="literal">pickle</span>, tendrás que crear varios archivos, lo que puede ser difícil de gestionar.</p>
<p class="indent">El módulo <span class="literal">shelve</span> de Python resuelve este problema. Puede almacenar varios datos en un único archivo. Funciona como un diccionario en el que cada valor de datos tiene una clave que puedes utilizar para almacenar y recuperar los datos. Piensa en <span class="literal">shelve</span> como en una estantería: cada compartimento de la estantería almacena distintos valores de datos.</p>
<h4 class="h4" id="ch11lev2sec16"><strong><span class="blue1">Abrir un archivo con shelve</span></strong></h4>
<p class="noindent">Tras importar el módulo <span class="literal">shelve</span>, utilizarás su función <span class="literal">open()</span> para abrir un archivo. Si el archivo no existe, se creará uno nuevo.</p>
<p class="indent">El siguiente código abre el archivo <em>locationsFile.db</em> y lo almacena en la variable <span class="literal">shelveFile</span>:</p>
<p class="programs" translate="no"><span class="orange">import</span> shelve<br translate="no"/>shelveFile = shelve.open(<span class="green">"locationsFile.db"</span>)</p>
<p class="indent">La función <span class="literal">open(</span> ) sólo toma un argumento, el nombre del archivo. No necesitas especificar los permisos del archivo cuando utilices el módulo <span class="literal">shelve</span>, ya que éste concede automáticamente privilegios de lectura y escritura.</p>
<p class="indent">Al nombrar un archivo con el módulo <span class="literal">shelve</span>, debes incluir la extensión <em>.</em> db al final del nombre del archivo. Puedes ver el <em>.d</em> b al final de mi archivo <em>locationsFile.db</em>.</p>
<h4 class="h4" id="ch11lev2sec17"><strong><span class="blue1">Añadir, modificar y acceder a elementos con shelve</span></strong></h4>
<p class="noindent">El módulo <span class="literal">shelve</span> funciona como un diccionario. Para añadir datos al archivo, utilizas corchetes con un nombre de clave para almacenar un valor. Por ejemplo, supongamos que una agente secreta llamada Beatriz está en un submarino, y queremos almacenar la ubicación de Beatriz en el diccionario <span class="literal">shelveFichero</span>:</p>
<p class="programs" translate="no"><span class="orange">import</span> shelve<br translate="no"/>shelveFile = shelve.open(<span class="green">"locationsFile.db"</span>)<br translate="no"/>shelveFile[<span class="green">'Beatrice'</span>] = <span class="green">'Submarine'</span><br translate="no"/>shelveFile.close()</p>
<p class="indent">Primero abrimos el archivo. A continuación, damos al diccionario <span class="literal">shelveFile</span> una clave <span class="literal">"Beatriz"</span> y el valor <span class="literal">"Submarino"</span>. Esta línea crea un nuevo elemento en el diccionario <span class="literal">shelveFile</span> con la clave " <span class="literal">Beatriz</span> " y el valor "Submarino <span class="literal">"</span>.</p>
<p class="indent">A continuación, utilizamos la función <span class="literal">close()</span> de <span class="literal">shelve</span>para añadir los nuevos datos al archivo y cerrarlo de forma segura.</p>
<p class="indent"><span epub:type="pagebreak" id="page_252"></span>Si una clave ya existe en un archivo shelve, este código actualizaría el valor antiguo por el nuevo. Supongamos que Beatrice termina su misión y vuelve al cuartel general. Podrías actualizar la ubicación de Beatrice de esta forma:</p>
<p class="programs" translate="no"><span class="orange">import</span> shelve<br translate="no"/>shelveFile = shelve.open(<span class="green">'locationsFile.db'</span>)<br translate="no"/>shelveFile[<span class="green">'Beatrice'</span>] = <span class="green">'Headquarters'</span><br translate="no"/>shelveFile.close()</p>
<p class="indent">Ahora el valor correspondiente de la clave Beatrice es <span class="literal">"Cuartel General"</span>. Acceder a un valor desde la <span class="literal">estantería</span> también funciona como en un diccionario. Utilizas claves para acceder a valores concretos. Por ejemplo, para imprimir la ubicación de Beatriz, utilizaríamos el siguiente código:</p>
<p class="programs" translate="no"><span class="orange">import</span> shelve<br translate="no"/>shelveFile = shelve.open(<span class="green">'locationsFile.db'</span>)<br translate="no"/><span class="rose">print</span>(shelveFile[<span class="green">'Beatrice'</span>])</p>
<p class="indent">Esto mostrará la ubicación de Beatriz, <span class="literal">Sede Central</span>.</p>
<p class="indent">Al igual que un diccionario estándar, el módulo <span class="literal">estantería</span> puede almacenar cualquier tipo de datos, incluidos flotantes, cadenas, booleanos, listas multidimensionales, otros diccionarios, etc. De hecho, en la siguiente misión, ¡almacenarás y accederás a listas multidimensionales para guardar y cargar múltiples estructuras!</p>
<h4 class="h4a" id="ch11lev2sec18"><strong>Misión nº 66: Guardar una colección de estructuras</strong></h4>
<p class="noindent">Los programas de esta misión almacenarán y cargarán todas tus estructuras guardadas utilizando un único archivo. Esta misión se divide de nuevo en dos programas: uno para guardar y otro para cargar.</p>
<p class="indent">Tendrás que convertir los programas de la Misión nº 65 para que utilicen el módulo <span class="literal">shelve</span> en lugar del módulo <span class="literal">pickle</span>. También añadirás código para tomar la información del usuario, de modo que éste pueda poner nombre a sus edificios. Abre los archivos <em>saveStructure.py</em> y <em>loadStructure.py</em> y guárdalos como <em>saveCollection.py</em> y <em>loadCollection.py</em>.</p>
<p class="indent">Como hicimos en la misión anterior, vamos a realizar los cambios en estos programas en dos partes.</p>
<h4 class="h4" id="ch11lev2sec19"><strong><span class="blue1">Parte 1: Guardar una estructura en una colección</span></strong></h4>
<p class="noindent">Aquí se incluye y anota parte del archivo original <em>saveStructure.</em> py para ayudarte a identificar dónde realizarás los cambios. Aquí tienes la primera línea y las últimas líneas de <em>saveCollection</em>.py:</p>
<p class="sidenote" translate="no"><span class="blue"><em>saveCollection.py</em></span></p>
<p class="programs" translate="no"><span class="ent">➊</span> <span class="orange">import</span> pickle<br translate="no"/><br translate="no"/>--<span class="codeitalic">snip</span>--<br translate="no"/><br translate="no"/> <span class="red"># Name the structure</span><br translate="no"/><span class="ent">➋</span> structureName = <span class="rose">input</span>(<span class="green">"What do you want to call the structure?"</span>)<br translate="no"/> <span class="red"># Store the structure in a file</span><br translate="no"/><span class="ent">➌</span> pickleFile = <span class="rose">open</span>(<span class="green">"pickleFile"</span>, <span class="green">"wb"</span>)<br translate="no"/><span class="ent">➍</span> pickleFile.dump(structure)</p>
<p class="indent"><span epub:type="pagebreak" id="page_253"></span>Se añade una línea extra al archivo para preguntar cómo quieres llamar a la estructura cuando la guardes con <span class="literal">pickle</span> <span class="ent">➋.</span> Por ejemplo, mi versión del programa pregunta "¿Cómo quieres llamar a la estructura?" y puedo responder con algo como "Casa" o "Bosque de pasteles". Asegúrate de llamar a cada nueva estructura por un nombre distinto; si una nueva estructura tiene el mismo nombre que otra, la estructura antigua será sobrescrita por la nueva.</p>
<p class="indent">Para cambiar este programa para que utilice el módulo <span class="literal">shelve</span> en lugar de <span class="literal">pickle</span>, tienes que hacer dos cambios. Primero, cambia la importación del módulo <span class="literal">pickle</span> por <span class="literal">shelve</span> <span class="ent">➊.</span> En segundo lugar, cambia las últimas líneas del código para utilizar <span class="literal">shelve</span> en lugar de <span class="literal">pickle</span>. Abre un archivo llamado <em>structuresFile.db</em> y guárdalo en una variable llamada <span class="literal">shelveFile</span> utilizando la función <span class="literal">shelve.open(</span> ) <span class="ent">➌.</span> A continuación, almacena la variable de <span class="literal">estructura</span> en un diccionario <span class="literal">shelve</span> utilizando la variable <span class="literal">structureName</span> para el nombre de la clave del diccionario <span class="ent">➍.</span> Debería quedar algo así: shelveFile <span class="literal">[nombredelaestructura] = estructura</span>. Por último, cierra <span class="literal">shelveFile</span> en la última línea utilizando <span class="literal">close()</span>.</p>
<h4 class="h4" id="ch11lev2sec20"><strong><span class="blue1">Parte 2: Cargar una estructura desde una colección</span></strong></h4>
<p class="noindent">Ahora tienes que modificar el archivo <em>loadCollection.py</em>. He eliminado la parte central del archivo para ahorrar espacio y para que las partes que tienes que cambiar sean más fáciles de ver:</p>
<p class="sidenote" translate="no"><span class="blue"><em>loadCollection.py</em></span></p>
<p class="programs" translate="no"><span class="ent">➊</span> <span class="orange">import</span> pickle<br translate="no"/><br translate="no"/>--<span class="codeitalic">snip</span>--<br translate="no"/><span class="ent">➋</span> structure = pickle.load(<span class="green">"pickleFile"</span>)<br translate="no"/><span class="ent">➌</span> structureName = <span class="rose">input</span>(<span class="green">"Enter the structure's name"</span>)<br translate="no"/><br translate="no"/>   pos = mc.player.getTilePos()<br translate="no"/>   x = pos.x<br translate="no"/>   y = pos.y<br translate="no"/>   z = pos.z<br translate="no"/><br translate="no"/><span class="ent">➍</span> buildStructure(x, y, z, structureDictionary[structureName])</p>
<p class="indent">He añadido una línea extra al código que pide el nombre de la estructura que quieres construir <span class="ent">➌.</span> Además, he añadido un poco de código a la última línea que obtiene la estructura del diccionario de <span class="literal">estanterías</span> y la pasa a la función <span class="literal">buildStructure()</span>.</p>
<p class="indent">Tienes que hacer un par de cambios en este programa. Primero, al igual que en <em>saveCollection.py</em>, cambia <span class="literal">import</span> por <span class="literal">shelve</span> en lugar de <span class="literal">pickle</span> <span class="ent">➊.</span> En segundo lugar, carga el <span class="literal">archivo shelveFile</span> que creaste en saveCollection <em>.</em> py utilizando <span class="literal">shelve.open()</span> <span class="ent">➋.</span> Almacena los datos devueltos por la función shelve.open( <span class="literal">)</span> en la variable <span epub:type="pagebreak" id="page_254"></span><span class="literal">structureDictionary</span> <span class="ent">➍.</span> El código debería ser algo parecido a lo siguiente: estructuraDiccionario <span class="literal">= shelve.load("archivo shelve")</span>.</p>
<p class="indent">Todos los datos de las estructuras, incluidos sus nombres y bloques, se almacenan en el archivo <em>structuresFile.db</em>, lo que significa que no necesitas hacer ningún cambio en <em>loadCollection.</em> py antes de ejecutarlo. Todo lo que tienes que hacer es introducir el nombre de la estructura que quieres utilizar cuando ejecutes el programa.</p>
<p class="indent">Veamos el programa en acción, utilizando una estructura de mi mundo Minecraft. Primero, copio la estructura utilizando <em>saveCollection.</em> py volando hasta una esquina de la estructura y pulsando <small>ENTER</small><a href="ch11.xhtml#ch11fig7">(Figura 11-7</a>).</p>
<div class="image"><img alt="image" src="../images/f11-07.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig7"></a><em>Figura 11-7: Me desplazo a una esquina de la estructura que quiero guardar.</em></p>
<p class="indent">Después, vuelo hasta la esquina opuesta de la estructura y pulso <small>ENTER</small> de nuevo<a href="ch11.xhtml#ch11fig8">(</a>Figura 11-8).</p>
<div class="image"><img alt="image" src="../images/f11-08.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig8"></a><em>Figura 11-8: Me desplazo a la esquina opuesta.</em></p>
<p class="indent"><span epub:type="pagebreak" id="page_255"></span>A continuación, el programa me pide que introduzca un nombre para mi estructura. La Figura <a href="ch11.xhtml#ch11fig9">11-9</a> muestra que he llamado a mi estructura <span class="literal">"Árbol de tartas"</span>.</p>
<div class="image"><img alt="image" src="../images/f11-09.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig9"></a><em>Figura 11-9: Introduzco el nombre con el que quiero guardar la estructura.</em></p>
<p class="indent">Por último, ejecuto <em>loadCollection.py</em>, vuelo a la ubicación donde quiero construir una copia de la estructura e introduzco el nombre de la estructura que quiero construir<a href="ch11.xhtml#ch11fig10">(Figura 11</a>-10). El programa empieza a construir delante de mí, ¡como por arte de magia!</p>
<div class="image"><img alt="image" src="../images/f11-10.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig10"></a><em>Figura 11-10: Ahora, cuando quiero crear una copia, sólo tengo que introducir el nombre de la estructura y se construye.</em></p>
<p class="indent">Puedes repetir este proceso con tantos edificios o estructuras como quieras; por ejemplo, yo he hecho una copia de una cabaña en la <a href="ch11.xhtml#ch11fig11">Figura 11-11</a>. Cuando hayas copiado una estructura una vez, podrás cargarla cuando quieras con sólo ejecutar <em>loadCollection.py</em> e introducir el nombre de la estructura.</p>
<div class="image"><span epub:type="pagebreak" id="page_256"></span><img alt="image" src="../images/f11-11.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig11"></a><em>Figura 11-11: Puedes utilizar el programa para guardar varias estructuras. Aquí he copiado una cabaña.</em></p>
<h3 class="h3" id="ch11lev1sec04"><strong><span class="blue1">Instalar nuevos módulos con pip</span></strong></h3>
<p class="noindent">Además de <span class="literal">pickle</span> y <span class="literal">shelve</span>, puedes importar miles de módulos más para utilizarlos en tus programas Python. Con tantos módulos disponibles, instalarlos correctamente es muy importante. Para simplificar la instalación de módulos, Python proporciona un gestor de paquetes llamado pip. Un gestor de <em>paquetes</em> es un software que tiene una base de datos de otros programas que puedes instalar en tu ordenador. También incluye funciones que facilitan la instalación, actualización y desinstalación del otro software.</p>
<p class="indent">El gestor de paquetes pip puede instalar, actualizar y eliminar paquetes en Python. También tiene una gran colección de módulos que puedes utilizar en Python. Esta sección te muestra cómo instalar un paquete utilizando pip y muestra el módulo <span class="literal">Flask</span>, ¡que puedes utilizar para crear un sitio web!</p>
<p class="indent">Si utilizas la versión más reciente de Python 3, pip está preinstalado. Si utilizas una versión anterior de Python, puede que pip no esté instalado. La forma más fácil de conseguir pip es instalar la última versión de Python. (Consulta "<a href="ch01.xhtml#ch01lev2sec02">Instalar Py</a>thon" en la <a href="ch01.xhtml#page_3">página 3</a> para Windows y en <a href="ch01.xhtml#page_15">la página 15</a> para Mac).</p>
<p class="indent">Veamos cómo utilizar pip. Dependiendo del sistema operativo que utilices, puedes usar pip de un par de maneras. ¡Asegúrate de seguir las instrucciones que correspondan a tu ordenador!</p>
<h4 class="h4" id="ch11lev2sec21"><strong><span class="blue1">Utilizar pip en Windows</span></strong></h4>
<p class="noindent">Para utilizar pip en Windows, tienes que abrir el símbolo del sistema de Windows. El símbolo del sistema es similar al shell de Python. Te permite introducir un único comando en una línea, que se ejecuta cuando pulsas <small>ENTER</small>.</p>
<p class="indent">Para abrir el símbolo del sistema, pulsa la tecla Windows o abre el menú Inicio y busca <span class="literal">cmd</span>. Cuando abras el programa, verás una ventana negra<a href="ch11.xhtml#ch11fig12">(Figura 11</a>-12).</p>
<div class="image"><span epub:type="pagebreak" id="page_257"></span><img alt="image" src="../images/f11-12.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig12"></a><em>Figura 11-12: El símbolo del sistema de Windows</em></p>
<p class="indent">Para utilizar pip en el símbolo del sistema, escribe <span class="literal">pip</span> seguido de la acción que quieres que realice. Por ejemplo, vamos a instalar el módulo <span class="literal">Flask</span> de Python, que puedes utilizar para crear sitios web con Python. Introduce el siguiente comando en el símbolo del sistema:</p>
<p class="programs" translate="no">&gt; <span class="codestrong">pip install Flask</span></p>
<p class="indent">En el sitio web del índice de paquetes de Python en <em><a href="http://pypi.python.org/">http://pypi.python.org/,</a></em> puedes encontrar muchos otros módulos de Python que puedes instalar.</p>
<h4 class="h4" id="ch11lev2sec22"><strong><span class="blue1">Utilizar pip en un Mac o Raspberry Pi</span></strong></h4>
<p class="noindent">Si utilizas pip en un Mac o en una Raspberry Pi, tendrás que incluir <span class="literal">sudo</span> al principio del comando para que funcione. Por ejemplo, introduce esta línea:</p>
<p class="programs" translate="no">$ <span class="codestrong">sudo pip install Flask</span></p>
<p class="indent">Si aparece un error, consulta el <a href="ch01.xhtml#ch01">Capítulo 1</a> para volver a comprobar las instrucciones de instalación en Mac o Raspberry Pi.</p>
<p class="indent">En el sitio web del índice de paquetes de Python, <em><a href="http://pypi.python.org/">http://pypi.python.org/,</a></em> puedes encontrar muchos otros módulos de Python que puedes instalar.</p>
<h3 class="h3" id="ch11lev1sec05"><strong><span class="blue1">Utilizar un módulo de pip: Flask</span></strong></h3>
<p class="noindent"><span class="literal">Flask</span> es un módulo de Python que puedes utilizar para desarrollar sitios web. En esta sección, aprenderás a configurar un sitio web básico de <span class="literal">Flask</span> y luego a integrar el sitio web con Minecraft, ¡para que puedas mostrar la posición de tu jugador en un sitio web!</p>
<p class="indent">Con <span class="literal">Flask</span>, sólo necesitas unas pocas líneas de código para crear y gestionar un sitio web. Sólo tienes que escribir el código Python como lo harías normalmente y añadir a <span epub:type="pagebreak" id="page_258"></span>alguna información extra relacionada con <span class="literal">Flask</span>. A continuación, ejecutas tu código, y éste crea un sitio web al que tu ordenador puede acceder. Entonces podrás ver el sitio web en tu navegador.</p>
<p class="indent"><a href="ch11.xhtml#ch11ex5">El listado 11-5</a> crea un sitio web <span class="literal">Flask</span> básico que incluye la información más importante sobre mí: mi nombre.</p>
<p class="sidenote" translate="no"><span class="blue"><em>namePage.py</em></span></p>
<p class="programs" translate="no"> <span class="orange">from</span> flask <span class="orange">import</span> Flask<br translate="no"/><span class="ent">➊</span> app = Flask(__name__)<br translate="no"/><br translate="no"/><span class="ent">➋</span> @app.route(<span class="green">"/"</span>)<br translate="no"/> <span class="orange">def</span> <span class="blue1">showName</span>():<br translate="no"/><span class="ent">➌</span> <span class="orange">return</span> <span class="green">"Craig Richardson"</span><br translate="no"/><br translate="no"/><span class="ent">➍</span> app.run()</p>
<p class="examplet"><a id="ch11ex5"></a><em>Listado 11-5: Un programa Python que utiliza</em> <span class="literal"><span class="codeitalic">Flask</span></span> <em>para crear un</em> sitio web</p>
<p class="indent">Para utilizar <span class="literal">Flask</span>, primero tienes que crear <span class="literal">Flask</span> utilizando la función <span class="literal">Flask()</span> <span class="ent">➊.</span> El argumento <span class="literal">__name__</span> indica a <span class="literal">Flask</span> que tu proyecto <span class="literal">Flask</span> está contenido en este archivo, y no necesita buscar en ningún otro sitio para encontrar otras partes del programa. Observa los dos guiones bajos, no uno, al principio y al final del argumento <span class="literal">__name__</span>.</p>
<p class="indent">La etiqueta <span class="literal">@app.route(</span> ) utiliza un decorador. <em>Los decor</em> adores proporcionan información adicional a Python sobre tus funciones. Por ejemplo, en este programa el decorador @app <span class="literal">.route</span> () indica a <span class="literal">Flask</span> en qué parte del sitio web se utilizará la función. En este caso, <span class="literal">"/"</span> le dice a <span class="literal">Flask</span> que la función <span class="literal">showName</span> () se utilizará en la página de inicio <span class="ent">➋.</span> La declaración de <span class="literal">retorno</span> de la función indica a <span class="literal">Flask</span> lo que se mostrará en la página. En este ejemplo, devuelve mi nombre, por lo que mi nombre se mostrará en la página <span class="ent">➌.</span> La última línea del programa indica a Python que inicie <span class="literal">Flask</span> cuando se ejecute este archivo <span class="ent">➍.</span></p>
<p class="indent">Guarda este archivo como <em>nombrePágina.py</em> en la carpeta de <em>archivos</em>. Añade tu propio texto para crear tu propio sitio web.</p>
<p class="indent">Para ejecutar el sitio web, haz clic en <strong>Ejecutar</strong> <img alt="image" src="../images/arrow.jpg" translate="no"/> <strong>Ejecutar módulo</strong> en IDLE. El programa se ejecuta y genera un archivo de sitio web que puedes abrir en un navegador web. Para encontrar la ubicación del sitio web, tienes que leer la línea de código que emite el programa cuando empiezas a ejecutarlo. Cuando ejecuto el programa, la salida tiene este aspecto:</p>
<p class="programs" translate="no"><span class="blue1">* Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)</span></p>
<p class="indent">A partir de esta línea, puedo saber que si introduzco <em>http://127.0.0.1:5000/</em> en un navegador web me llevará al sitio web <span class="literal">de Flask</span> que acabo de empezar a ejecutar. Ahora, cuando abro el navegador y entro en este sitio, puedo ver mi nombre en la página<a href="ch11.xhtml#ch11fig13">(Figura 11-13</a>).</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTA</span></strong></p>
<p class="notep"><em>El sitio web que creas en este programa sólo está disponible en tu ordenador en este momento. Sólo tú puedes acceder a este sitio web, nadie más en Internet puede verlo.</em></p>
</div>
<div class="image"><span epub:type="pagebreak" id="page_259"></span><img alt="image" src="../images/f11-13.jpg" translate="no"/></div>
<p class="figcap"><a id="ch11fig13"></a><em>Figura 11-13: ¡Mira mi sitio web! Puedes cambiar lo que se muestra aquí por lo que quieras. ¿Qué escribirás en tu sitio web?</em></p>
<p class="indent">Para detener el programa, entra en IDLE y pulsa <small>CTRL-C</small> o haz clic en <strong>Shell</strong> <img alt="image" src="../images/arrow.jpg" translate="no"/> <strong>Reiniciar Shell</strong>.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTA</span></strong></p>
<p class="notep"><em>Este capítulo sólo cubre una introducción muy básica a</em> <span class="literal"><span class="codeitalic">Flask</span></span>. Es <em>muy útil aprender Flask porque te permite construir sitios web interactivos rápidamente con Python. Si quieres saber más sobre</em> <span class="literal"><span class="codeitalic">Flask</span></span><em>, consulta este tutorial en el</em> <em>sitio web</em> <span class="literal"><span class="codeitalic">de Flask</span></span> <em>en</em> <a href="http://flask.pocoo.org/docs/0.10/tutorial/">http://flask.pocoo.org/docs/0.10/tutorial/.</a></p>
</div>
<h4 class="h4a" id="ch11lev2sec23"><strong>Misión nº 67: Posicionar sitio web</strong></h4>
<p class="noindent">Una de las mejores cualidades de Python es que es fácil integrar las características de diferentes módulos en un único programa. Has estado utilizando el módulo API Python de Minecraft durante todo el libro y acabas de conocer el módulo <span class="literal">Flask</span>. Con unos pocos pasos puedes integrar ambos.</p>
<p class="indent">En esta misión, combinarás la API Python de Minecraft con <span class="literal">Flask</span> para mostrar la posición de un jugador en una página web.</p>
<p class="indent">Crea un nuevo archivo en IDLE y guárdalo como <em>positionPage.py</em> en la carpeta de <em>archivos</em>. Tienes que obtener la posición del jugador desde Minecraft y mostrarla en la página web utilizando una función con la etiqueta <span class="literal">@app.route("/") de Flask</span>. Puedes basar el código en el ejemplo del <a href="ch11.xhtml#ch11ex5">Listado 11-5</a>. Haz que el código muestre la posición en el formato <span class="literal">"x 10, y 110, z 12"</span>.</p>
<p class="indent">Ejecuta el programa y comprueba tu página web. Muy chulo, ¿eh? Con <span class="literal">Flask</span> puedes crear páginas web con todo tipo de información. ¡Incluso puedes subir estas páginas a Internet para compartirlas con tus amigos!</p>
<h3 class="h3" id="ch11lev1sec06"><span epub:type="pagebreak" id="page_260"></span><strong><span class="blue1">Lo que has aprendido</span></strong></h3>
<p class="noindent">En este capítulo se te ha presentado el uso de archivos con Python. Aprendiste a leer y escribir en archivos utilizando la biblioteca estándar de Python, lo que te da control sobre los archivos cuando creas tus propios programas. También aprendiste a utilizar módulos, que amplían las capacidades de Python y lo que puedes hacer en Python.</p>
<p class="indent">Exploraste el módulo <span class="literal">pickle</span>, el módulo <span class="literal">shelve</span> y el gestor de paquetes pip. Los módulos <span class="literal">pickle</span> y <span class="literal">shelve</span> se utilizan con fines distintos. El módulo <span class="literal">pickle</span> guarda el valor de una única variable, especialmente cuando contiene una lista multidimensional o un diccionario, que sería difícil de almacenar y abrir utilizando la biblioteca estándar. El módulo <span class="literal">shelve</span> tiene los mismos puntos fuertes que el módulo <span class="literal">pickle</span>, pero te da más flexibilidad para almacenar varios valores a la vez en una estructura similar a un diccionario. Con pip aprendiste a instalar nuevos módulos. También conociste el módulo <span class="literal">Flask</span>, que es una forma rápida y flexible de crear sitios web con Python.</p>
<p class="indent">Con estos conocimientos, completaste cuatro misiones. La primera te permitió crear listas de tareas, que puedes mostrar en el juego Minecraft para recordar en qué estás trabajando. La segunda permitía guardar edificios y cargarlos en tu mundo actual y en otros mundos. La tercera misión modificó la segunda para que pudieras guardar todos tus edificios en un único archivo en lugar de un archivo para cada edificio. La última misión te mostró cómo utilizar el módulo <span class="literal">Flask</span> para crear una página web que muestre la posición actual del jugador.</p>
<p class="indent">¡Has hecho un gran trabajo hasta ahora! El próximo capítulo es el capítulo final. Aprenderás sobre las clases y la programación orientada a objetos, un popular estilo de programación que te permite reutilizar el código.</p>
</body>
</html>