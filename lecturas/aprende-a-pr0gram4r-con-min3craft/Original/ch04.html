<html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:ns="http://www.w3.org/2001/10/synthesis">
<head>
<title>Aprende a programar con Minecraft</title>
<link href="../styles/9781593276706.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:40af8c70-d268-482b-9282-0b537fc6ae71" name="Adept.expected.resource"/>
</head>
<body>
<h2 class="h2" id="ch04"><span epub:type="pagebreak" id="page_69"></span><strong><span class="blue1"><span class="big">4</span></span></strong><br translate="no"/><strong>HABLAR CON CADENAS</strong></h2>
<div class="image1"><img alt="image" src="../images/common01.jpg" translate="no"/></div>
<p class="noindent">En los <a href="ch02.xhtml#ch02">Capítulos 2</a> y <a href="ch03.xhtml#ch03">3</a>, trabajaste con enteros y flotantes, que son tipos de números. En este capítulo, utilizarás otro tipo de datos llamado <em>cadenas</em>. Puedes utilizar cadenas para trabajar con letras y símbolos, además de con números.</p>
<p class="indent">Las cadenas te ayudan a mostrar datos a las personas que utilizan tus programas, una parte importante de la programación. Usando cadenas, puedes decirle a Python que <em>envíe</em> datos a la pantalla, que muestre y comunique información al usuario.</p>
<p class="indent">En Minecraft puedes utilizar cadenas en varios lugares, como para enviar mensajes al chat, que es una forma de comunicarte con otros jugadores cuando estás en modo multijugador. Aunque enviar mensajes es una función estándar en otras versiones de Minecraft, es una función oculta en la versión Rasp-berry Pi. Pero puedes acceder a esta función mediante el poder de la programación. ¡Podrás compartir información secreta con tus amigos y presumir de tus tesoros!</p>
<p class="indent"><span epub:type="pagebreak" id="page_70"></span>También aprenderás sobre las funciones en este capítulo. Si tienes ojo de lince, te habrás dado cuenta de que ya has visto algunas funciones. <span class="literal">setPos()</span>, <span class="literal">setTilePos()</span>, <span class="literal">setBlock()</span>, <span class="literal">setBlocks()</span>, <span class="literal">getPos()</span> y <span class="literal">getTilePos()</span> son todas ellas <em>funciones:</em>bloques de código <em>reutilizables</em>que te facilitan la realización de tareas. Muy chulo, ¿eh?</p>
<p class="indent">En las misiones de este capítulo, ampliarás los conocimientos que has aprendido hasta ahora. Imprimirás mensajes en el chat de Minecraft utilizando cadenas y practicarás la introducción de datos para crear objetos en tu mundo Minecraft.</p>
<h3 class="h3" id="ch04lev1sec01"><strong><span class="blue1">¿Qué son las cadenas?</span></strong></h3>
<p class="noindent">Un tipo de dato <em>cadena</em> incluye cualquier cantidad de texto, desde una sola letra o símbolo -como <span class="literal">"a"</span> o <span class="literal">"&amp;"</span>- hasta un gran bloque de texto. Cada letra, número o símbolo de una cadena se denomina <em>carácter</em>. Cuando quieras incluir letras, símbolos, palabras, frases o una combinación de estas cosas en tu programa, utilizarás cadenas.</p>
<p class="indent">Con el tipo de datos cadena, puedes almacenar letras, números y símbolos. Todas las cadenas van entre comillas. Por ejemplo, esto es una cadena:</p>
<p class="programs" translate="no"><span class="green">"Look out! There's a zombie behind you!"</span></p>
<p class="indent">Lo siguiente también es una cadena:</p>
<p class="programs" translate="no"><span class="green">'Welcome to my secret base!'</span></p>
<p class="indent">¿Has notado la ligera diferencia en la forma de escribir estos ejemplos? Al escribir una cadena, puedes utilizar comillas simples o dobles: <span class="literal">'</span> o <span class="literal">"</span>. ¡Ten cuidado de no mezclar las comillas! Si empiezas una cadena con una comilla simple, debes terminarla con una comilla simple. Si empiezas con comillas dobles, termina con comillas dobles. Hay una buena razón para incluir ambas opciones en el lenguaje de programación Python; por ejemplo, si quieres utilizar un apóstrofo en tu cadena, puedes incluirlo con seguridad si encierras tu cadena entre comillas dobles.</p>
<h3 class="h3" id="ch04lev1sec02"><strong><span class="blue1">La función print()</span></strong></h3>
<p class="noindent">Mostrar texto y otra información al usuario es importante para la interacción con él; de lo contrario, no sabrá lo que ocurre en tus programas. La información que muestras al usuario se llama <em>salida</em>. Para mostrar datos en la pantalla del usuario, utiliza la función <span class="literal">print()</span>.</p>
<p class="indent">Para mostrar un mensaje, pasa una cadena a la función print( <span class="literal">)</span> como argumento:</p>
<p class="programs" translate="no"><span class="mer">&gt;&gt;&gt;</span> <span class="rose">print</span>(<span class="green">"String"</span>)</p>
<p class="indent"><span epub:type="pagebreak" id="page_71"></span>Esto indica a Python que quieres mostrar al usuario la palabra <span class="literal">Cadena</span>. Así, para imprimir <span class="literal">chocolate</span> en el shell de Python, escribes:</p>
<p class="programs" translate="no"><span class="mer">&gt;&gt;&gt;</span> <span class="rose">print</span>(<span class="green">"chocolate"</span>)</p>
<p class="indent">Y la salida sería</p>
<p class="programs" translate="no"><span class="blue1">chocolate</span></p>
<p class="indent">También puedes utilizar <span class="literal">print()</span> para imprimir los valores de las variables. Por ejemplo, si tienes una variable llamada <span class="literal">nombre</span> que almacena un nombre como cadena, y quieres mostrarlo en la pantalla, puedes hacer lo siguiente:</p>
<p class="programs" translate="no"><span class="mer">&gt;&gt;&gt;</span> name = <span class="green">"Steve the Miner"</span></p>
<p class="indent">Después de almacenar la cadena <span class="literal">"Steve el minero"</span> en <span class="literal">nombre</span>, puedes escribir simplemente <span class="literal">print(nombre)</span> para mostrar esta salida:</p>
<p class="programs" translate="no"><span class="mer">&gt;&gt;&gt;</span> <span class="rose">print</span>(name)<br translate="no"/><span class="blue1">Steve the Miner</span></p>
<p class="indent">Ahora que ya conoces los conceptos básicos de las cadenas, ¡completa la misión para saludar a tu mundo Minecraft!</p>
<h4 class="h4a" id="ch04lev2sec01"><strong>Misión nº 11: Hola, Mundo Minecraft</strong></h4>
<p class="noindent">Si quieres chatear con otros jugadores en Minecraft Pi, la API Python de Minecraft te permite enviar mensajes al chat utilizando la función <span class="literal">postToChat</span> (). La función <span class="literal">postToChat</span> () toma una cadena como argumento y publica esa cadena en la ventana de chat de Minecraft. Por ejemplo, <a href="ch04.xhtml#ch4ex1">el Listado 4-1</a> envía <span class="literal">"Hola, Mundo Minecraft"</span> al chat.</p>
<p class="sidenote" translate="no"><span class="blue"><em>message.py</em></span></p>
<p class="programs" translate="no"><span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br translate="no"/>mc = Minecraft.create()<br translate="no"/>mc.postToChat(<span class="green">"Hello, Minecraft World"</span>)</p>
<p class="examplet"><a id="ch4ex1"></a><em>Listado 4-1: Utiliza Python para enviar un saludo a través del chat de Minecraft.</em></p>
<p class="indent">Recuerda que un argumento es información que pasas a una función cuando la llamas. La función necesita esta información para hacer su trabajo. Por ejemplo, en el capítulo anterior, necesitábamos pasar números a nuestras funciones para definir lo que queríamos que hicieran. En este caso, postToChat( <span class="literal">)</span> necesita una cadena, como <span class="literal">"Hola, Mundo Minecraft"</span>.</p>
<p class="indent">La función <span class="literal">postToChat</span> () es similar a la función <span class="literal">print()</span>. Ambas pueden mostrar cadenas en la pantalla, y ambas pueden tomar como argumento una variable que almacene una cadena. La diferencia es que la función <span class="literal">print</span> () envía cadenas al shell de Python, mientras que postToChat <span class="literal">()</span> muestra la salida en el chat de Minecraft.</p>
<p class="indent"><span epub:type="pagebreak" id="page_72"></span>Copia el código <a href="ch04.xhtml#ch4ex1">del Listado 4-1</a> y guárdalo como <em>mensaje.py</em> en una nueva carpeta llamada <em>cadenas</em>. Cuando ejecutes el programa, deberías ver el mensaje publicado en el chat, como se muestra en la <a href="ch04.xhtml#ch4fig1">Figura 4</a>-1.</p>
<div class="image"><img alt="image" src="../images/f04-01.jpg" translate="no"/></div>
<p class="figcap"><a id="ch4fig1"></a><em>Figura 4-1: Mi mensaje se ha publicado en el chat.</em></p>
<p class="indent">Prueba a pasar una cadena diferente a <span class="literal">postToChat()</span> para que muestre un mensaje de chat diferente.</p>
<div class="sidebar">
<p class="sidebart" id="ch04sb01"><strong>OBJETIVO EXTRA: ¿DÓNDE ESTÁS?</strong></p>
<p class="noindent">Puedes publicar todo tipo de información en el chat utilizando la función <span class="literal">mc.postToChat()</span>. Prueba a mostrar la posición x actual del jugador o el tipo de bloque sobre el que se encuentra. Recuerda que la función mc. <span class="literal">player.getTilePos</span> () obtiene la posición actual del jugador y la función <span class="literal">mc.getBlock()</span> te indica el tipo de bloque en determinadas coordenadas.</p>
</div>
<h3 class="h3" id="ch04lev1sec03"><strong><span class="blue1">La función input()</span></strong></h3>
<p class="noindent">Hasta ahora, todas tus variables se han establecido en tus programas, o se han <em>codificado</em>. Para cambiar el valor de una variable, tendrías que editar el programa. Sería práctico poder cambiar estas variables mientras el programa se está ejecutando o aceptar la <em>entrada</em> del usuario por parte del jugador.</p>
<p class="indent">Una forma de añadir este tipo de interactividad a tu programa es utilizar la función <span class="literal">input()</span>. Imprime una cadena en la consola (para indicar al usuario qué tipo de información debe introducir) y luego espera a que el usuario escriba una respuesta. Intenta introducir este código en el intérprete de comandos de Python para ver qué ocurre:</p>
<p class="programs" translate="no"><span class="mer">&gt;&gt;&gt;</span> <span class="rose">input</span>(<span class="green">"What is your name? "</span>)</p>
<p class="indent"><span epub:type="pagebreak" id="page_73"></span>Verás la cadena que pasaste a <span class="literal">input()</span>, y podrás escribir una respuesta.</p>
<p class="programs" translate="no"><span class="blue1">What is your name?</span></p>
<p class="indent">Cuando introduzcas una respuesta, deberías ver algo así:</p>
<p class="programs" translate="no"><span class="blue1">What is your name?</span> Craig<br translate="no"/>'Craig'</p>
<p class="indent">¡Genial! Pero si quieres utilizar esta entrada en algún lugar de tu programa, tendrás que guardarla en una variable. A diferencia del shell de Python, los programas creados en el editor de texto no muestran automáticamente los resultados de las sentencias. Por ejemplo:</p>
<p class="programs" translate="no"><span class="mer">&gt;&gt;&gt;</span> name = <span class="rose">input</span>(<span class="green">"What is your name? "</span>)<br translate="no"/><span class="blue1">What is your name?</span> Craig</p>
<p class="indent">Observa cómo esta vez, después de escribir tu nombre y pulsar <small>INTRO</small>, el programa no muestra automáticamente tu entrada. Para ver la entrada guardada, sólo tienes que pasar el <span class="literal">nombre de</span> la variable como argumento a la función <span class="literal">print()</span>:</p>
<p class="programs" translate="no"><span class="mer">&gt;&gt;&gt;</span> <span class="rose">print</span>(name)<br translate="no"/><span class="blue1">Craig</span></p>
<p class="indent">¡Genial! Ahora has guardado tu entrada en una variable y has impreso el valor de la variable. Esto es muy útil porque te permite obtener información del usuario para utilizarla en cualquier parte de tu programa. ¡Utilicemos esta técnica para escribir mensajes de chat en el chat de Minecraft!</p>
<h4 class="h4a" id="ch04lev2sec02"><strong>Misión nº 12: Escribe tu propio mensaje de chat</strong></h4>
<p class="noindent">¡Hagamos el chat más interactivo! Puedes utilizar el intérprete de comandos Python para escribir un mensaje en el chat de Minecraft, como hiciste en la Misión nº 11. En esta misión, escribiremos un programa ligeramente diferente que guarde la cadena que quieras publicar en el chat en una variable llamada <span class="literal">mensaje</span>.</p>
<p class="indent"><a href="ch04.xhtml#ch4ex2">El listado 4-2</a> te ayudará a empezar. Cópialo en un nuevo archivo en IDLE y guárdalo como <em>mensajeInput.</em> py en tu carpeta de <em>cadenas</em>.</p>
<p class="sidenote" translate="no"><span class="blue"><em>messageInput.py</em></span></p>
<p class="programs" translate="no"> <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br translate="no"/>   mc = Minecraft.create()<br translate="no"/><span class="ent">➊</span> message = <span class="green">"This is the default message."</span><br translate="no"/><span class="ent">➋</span> mc.postToChat(message)</p>
<p class="examplet"><a id="ch4ex2"></a><em>Listado 4-2: Cómo enviar cadenas al chat de Minecraft</em></p>
<p class="indent">El programa almacena el mensaje que quieres enviar al chat en la variable <span class="literal">mensaje</span> <span class="ent">➊.</span> En este caso, la variable es una cadena que dice <span class="literal">"Este es el mensaje por defecto".</span> Luego el programa pasa <span class="literal">el</span> mensaje a la función <span class="literal">postToChat(</span> ) <span class="ent">➋,</span> que emite la cadena al chat de Minecraft.</p>
<p class="indent"><span epub:type="pagebreak" id="page_74"></span>En este programa, la cadena está codificada, lo que significa que será la misma cada vez que se ejecute el programa. Pero con un simple cambio, ¡puedes hacer que imprima lo que el usuario escriba! En otras palabras, puedes escribir tus propios mensajes personalizados cada vez que ejecutes el programa. Crearás tu propio programa de chat.</p>
<p class="indent">Para que el programa acepte entradas, sustituye la cadena " <span class="literal">Este es el mensaje por defecto"</span>. <span class="ent">➊</span> por la función input( <span class="literal">)</span>. Dale a la función input( <span class="literal">)</span> un argumento, como <span class="literal">"Introduce tu</span> mensaje: <span class="literal">"</span>. Recuerda poner esta cadena dentro de los paréntesis de la función input( <span class="literal">)</span>. Cuando hayas hecho los cambios en el programa, ejecútalo. Deberías ver un mensaje en el intérprete de comandos de Python que diga "Introduce tu mensaje <span class="literal">:</span> <span class="literal">"</span>. Escribe tu mensaje y pulsa <small>INTRO</small>. El mensaje aparecerá en el intérprete de comandos y en el chat de Minecraft, como se muestra en la <a href="ch04.xhtml#ch4fig2">Figura 4-2</a>.</p>
<div class="image"><img alt="image" src="../images/f04-02.jpg" translate="no"/></div>
<p class="figcap"><a id="ch4fig2"></a><em>Figura 4-2: Cuando introduzco un mensaje en el intérprete de comandos IDLE, se publica en el chat de Minecraft.</em></p>
<p class="indent">Ahora tu programa te permite escribir un mensaje para mostrarlo en el chat, en lugar de tener que escribir tú el mensaje en tu programa. ¿Ves cuánto más fácil es chatear utilizando la entrada?</p>
<div class="sidebar">
<p class="sidebart" id="ch04sb02"><strong>OBJETIVO EXTRA: MÁS MENSAJES</strong></p>
<p class="noindent">El programa pide un mensaje, pero ¿puedes averiguar cómo hacer que pida un mensaje, espere unos segundos (utilizando la función <span class="literal">sleep()</span> ), y luego pida un segundo mensaje?</p>
</div>
<h3 class="h3" id="ch04lev1sec04"><span epub:type="pagebreak" id="page_75"></span><strong><span class="blue1">Unir cadenas</span></strong></h3>
<p class="noindent">A menudo, necesitarás imprimir una combinación de cadenas. Esto se llama unir, o <em>concatenar</em>, cadenas, y Python lo hace fácil.</p>
<p class="indent">En el <a href="ch03.xhtml#ch03">Capítulo 3</a> utilizamos el operador de suma<span class="literal">(+</span>) para sumar números, pero también puedes utilizarlo para concatenar cadenas. Por ejemplo:</p>
<p class="programs" translate="no">firstName = <span class="green">"Charles"</span><br translate="no"/>lastName = <span class="green">"Christopher"</span><br translate="no"/><span class="rose">print</span>(firstName + lastName)</p>
<p class="indent">La salida de <span class="literal">print(</span> ) será <span class="literal">"CarlosCristóbal"</span>. Si quieres un carácter de espacio entre los valores, puedes añadir un espacio utilizando el operador de suma de esta forma:</p>
<p class="programs" translate="no"><span class="rose">print</span>(firstName + <span class="green">" "</span> + lastName)</p>
<p class="indent">Python suele ofrecer varias formas de conseguir el mismo resultado. En este caso, podrías utilizar una coma para crear el espacio:</p>
<p class="programs" translate="no"><span class="rose">print</span>(firstName, lastName)</p>
<p class="indent">Ambas sentencias darán como resultado <span class="literal">"Charles Christopher"</span>. También puedes concatenar cadenas codificadas con variables que sean cadenas. Sólo tienes que escribir el valor como escribirías cualquier otra cadena:</p>
<p class="programs" translate="no"><span class="rose">print</span>(<span class="green">"His name is "</span> + firstName + <span class="green">" "</span> + lastName)</p>
<p class="indent">Esto dará como resultado "Se llama <span class="literal"> Carlos Cristóbal</span>".</p>
<p class="indent">Unir bloques de texto es útil, pero a veces querrás unir cadenas con otro tipo de datos, como un entero. Python no te permitirá concatenar una cadena con un entero; en este caso, tienes que decirle a Python que primero convierta el entero en una cadena. Vamos a intentarlo.</p>
<h4 class="h4" id="ch04lev2sec03"><strong><span class="blue1">Convertir números en cadenas</span></strong></h4>
<p class="noindent">Convertir un tipo de variable en otro es muy práctico. Por ejemplo, imagina que almacenas el número de manzanas de oro que tienes, que es un número entero, en una variable llamada <span class="literal">misManzanasDeOro</span>. Quieres presumir ante tus amigos de cuántas manzanas doradas tienes, porque son raras y te gusta presumir. Podrías imprimir un mensaje como " <span class="literal">Mi alijo no tan secreto de manzanas doradas: "</span>, seguido del valor almacenado en <span class="literal">misManzanasDoradas</span>. Pero antes de poder incluir el valor de <span class="literal">misManzanasDoradas</span> en el mensaje impreso, tienes que decirle a Python que cambie el número entero de <span class="literal">misManzanasDoradas</span> por una cadena.</p>
<p class="indent">La función <span class="literal">str(</span> ) convierte tipos de datos que no son cadenas, como enteros y flotantes, en cadenas. Para convertir a cadena, pon el valor que quieres convertir dentro de los paréntesis de la función str( <span class="literal">)</span>.</p>
<p class="indent"><span epub:type="pagebreak" id="page_76"></span>Volvamos a tu almacén de manzanas de oro. Digamos que has puesto <span class="literal">misManzanasDoradas</span> a 2, y quieres que Python trate ese 2 como una cadena en lugar de como un entero. Así es como imprimirías tu mensaje:</p>
<p class="programs" translate="no"><span class="rose">print</span>(<span class="green">"My not-so-secret golden apple stash: "</span> + <span class="rose">str</span>(myGoldenApples))</p>
<p class="indent">Esta sentencia muestra la cadena <span class="literal">"Mi alijo no tan secreto de manzanas de oro: 2"</span>. También puedes convertir valores flotantes en cadenas. Supongamos que te has comido media manzana golden, y ahora <span class="literal">misManzanasGolden</span> almacenan 1,5 manzanas. <span class="literal">str(misManzanasGolden)</span> funciona igual con el 1,5 que con el 2. Convierte el 1,5 en una cadena para que puedas incluirlo en tu mensaje.</p>
<p class="indent">Una vez convertidos los números en cadenas, puedes concatenarlos como quieras. ¡Vamos a divertirnos convirtiendo números en cadenas y concatenándolas!</p>
<h4 class="h4" id="ch04lev2sec04"><strong><span class="blue1">Concatenar números enteros y flotantes</span></strong></h4>
<p class="noindent">Si quieres concatenar dos datos, deben ser cadenas. Pero el signo más se utiliza tanto para sumar como para concatenar, así que si concatenas enteros, flotantes y otros números, Python intentará sumarlos en su lugar. Debes cambiar los valores numéricos a cadenas para poder unirlos utilizando la concatenación.</p>
<p class="indent">Para unir dos números en lugar de sumarlos, sólo tienes que utilizar el método <span class="literal">str()</span>:</p>
<p class="programs" translate="no"><span class="rose">print</span>(<span class="rose">str</span>(19) + <span class="rose">str</span>(84))</p>
<p class="indent">Como le has dicho a Python que trate los números 19 y 84 como cadenas y los concatene, esta sentencia produce <span class="literal">1984</span> en lugar de <span class="literal">103</span>, la suma de 19 y 84.</p>
<p class="indent">Puedes utilizar la concatenación tantas veces como quieras dentro de una sentencia. Por ejemplo:</p>
<p class="programs" translate="no"><span class="rose">print</span>(<span class="green">"The year is "</span> + <span class="rose">str</span>(19) + <span class="rose">str</span>(84))</p>
<p class="indent">Esta línea de código da como resultado <span class="literal">El año es 1984</span>.</p>
<p class="indent">Ahora que ya tienes un poco de práctica en el uso de la concatenación, ¡pon a prueba tus nuevas habilidades en la siguiente misión!</p>
<h4 class="h4a" id="ch04lev2sec05"><strong>Misión nº 13: Añadir nombres de usuario al chat</strong></h4>
<p class="noindent">Cuando juegas una partida con más de dos personas, puede ser confuso averiguar quién está escribiendo un mensaje en el chat de Minecraft. La solución obvia es incluir el nombre del usuario al principio de su mensaje. En esta misión, modificarás el programa de la Misión nº 12 para incluir un nombre de usuario en todos los mensajes enviados al chat.</p>
<p class="indent">Abre <em>messageInput.</em> py en IDLE y guárdalo como un nuevo archivo llamado <em>userChat.py</em> en la carpeta <em>strings</em>. A continuación, añade código para introducir el nombre del usuario antes de introducir su mensaje. El mensaje enviado al chat debe tener en <span epub:type="pagebreak" id="page_77"></span>el siguiente formato: <span class="literal">"Anna: Necesito TNT".</span> Tendrás que utilizar la concatenación para cumplir esta misión.</p>
<p class="indent">En el programa, busca esta línea de código:</p>
<p class="programs" translate="no">message = <span class="rose">input</span>(<span class="green">"Enter your message: "</span>)</p>
<p class="indent">En la línea anterior, tienes que añadir otra variable llamada nombre de <span class="literal">usuario</span> y establecer su valor en <span class="literal">input("Por favor, introduce un nombre de usuario: ")</span>. Después de añadir la variable <span class="literal">nombredeusuario</span>, busca esta línea:</p>
<p class="programs" translate="no">mc.postToChat(message)</p>
<p class="indent">Usando la concatenación, une las cadenas <span class="literal">nombredeusuario</span> y <span class="literal">mensaje</span> dentro de la función <span class="literal">postToChat()</span>. Añade <span class="literal">": "</span> entre las dos cadenas para que la salida tenga dos puntos y un espacio entre la variable nombre de <span class="literal">usuario</span> y la variable <span class="literal">mensaje</span>. <a href="ch04.xhtml#ch4fig3">La Figura 4-3</a> muestra el aspecto que debería tener la salida del programa terminado.</p>
<div class="image"><img alt="image" src="../images/f04-03.jpg" translate="no"/></div>
<p class="figcap"><a id="ch4fig3"></a><em>Figura 4-3: Ahora, cuando publico en el chat utilizando mi programa, aparece mi nombre de usuario.</em></p>
<p class="indent">Guarda tu programa actualizado y ejecútalo. En el intérprete de comandos de Python se te pedirá que introduzcas un nombre de usuario. Escribe tu nombre y pulsa <small>INTRO</small>. A continuación se te pedirá que escribas un mensaje, así que hazlo también. Tu nombre de usuario y tu mensaje deberían aparecer en el chat de Minecraft.</p>
<div class="sidebar">
<p class="sidebart" id="ch04sb03"><strong>OBJETIVO EXTRA: UN USUARIO SIN NOMBRE</strong></p>
<p class="noindent">¿Qué ocurre si dejas el nombre de usuario en blanco y pulsas <span class="literal">ENTER</span>? ¿A qué crees que se debe?</p>
</div>
<h3 class="h3" id="ch04lev1sec05"><span epub:type="pagebreak" id="page_78"></span><strong><span class="blue1">Convertir cadenas en enteros con int()</span></strong></h3>
<p class="noindent">Al igual que la función <span class="literal">str</span> (), que convierte tipos de datos que no son cadenas en cadenas, la función int( <span class="literal">)</span> convierte tipos de datos que no son enteros en enteros.</p>
<p class="indent">La función <span class="literal">int</span> () es útil cuando se utiliza con la función input <span class="literal">()</span>. La función <span class="literal">input</span> () devuelve la entrada del usuario como una cadena, pero a menudo querrás utilizar esta entrada en operaciones matemáticas. Para ello, primero tendrás que convertir la entrada a un tipo entero utilizando int( <span class="literal">)</span>.</p>
<p class="indent">Funciona así. Supongamos que ya hemos asignado un valor entero a una variable llamada <span class="literal">latasDeAtúnPorGato</span>, y queremos un programa que nos diga cuánto atún se come, en función del número de gatos que tenga el usuario. Aquí tienes un ejemplo de programa que podríamos escribir:</p>
<p class="programs" translate="no">cansOfTunaPerCat = 4<br translate="no"/>cats = <span class="rose">input</span>(<span class="green">"How many cats do you have? "</span>)<br translate="no"/>cats = <span class="rose">int</span>(cats)<br translate="no"/>dailyTunaEaten = cats * cansOfTunaPerCat</p>
<p class="indent">Puedes hacer lo mismo en una sola línea poniendo una función dentro de la otra:</p>
<p class="programs" translate="no">cats = <span class="rose">int</span>(<span class="rose">input</span>(<span class="green">"How many cats do you have? "</span>))<br translate="no"/>dailyTunaEaten = cats * cansOfTunaPerCat</p>
<p class="indent">Ahora que sabes cómo convertir la entrada en un número entero, puedes utilizarlo para introducir tipos de bloque en los programas de Minecraft.</p>
<h4 class="h4a" id="ch04lev2sec06"><strong>Misión nº 14: Crear un bloque con entrada</strong></h4>
<p class="noindent">Hay montones de tipos de bloques en Minecraft. Aunque puedes elegir muchos bloques en el modo creativo, muchos otros no se pueden utilizar. Sin embargo, la API de Python para Minecraft te da acceso a todos los tipos de bloque y te permite establecerlos mediante la función <span class="literal">setBlocks()</span>.</p>
<p class="indent">Ya has utilizado antes la función <span class="literal">setBlocks</span> (), pero tenías que codificar el tipo de bloque en tu programa. Esto significa que no podías cambiarlo mientras se ejecutaba el programa. Ahora puedes utilizar la función <span class="literal">input()</span>. Si escribes un programa que acepte entradas, cada vez que ejecutes el programa podrás elegir el tipo de bloque que quieres crear. Podrías crear un bloque de lana la primera vez que ejecutes el programa, y luego crear mineral de hierro la segunda vez.</p>
<p class="indent">En esta misión, escribirás un programa que permita al usuario decidir qué tipo de bloque quiere crear. Copia <a href="ch04.xhtml#ch4ex3">el Listado 4-3</a> en un nuevo archivo y guárdalo como <em>blockInput.py</em> en tu carpeta de <em>cadenas</em>.</p>
<p class="sidenote" translate="no"><span class="blue"><em>blockInput.py</em></span></p>
<p class="programs" translate="no"> <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br translate="no"/>   mc = Minecraft.create()<br translate="no"/><span class="ent">➊</span> blockType = <span class="red"># Add input() function here</span><br translate="no"/>   pos = mc.player.getTilePos()<br translate="no"/>   x = pos.x<br translate="no"/>   y = pos.y<br translate="no"/>   z = pos.z<br translate="no"/>   mc.setBlock(x, y, z, blockType)</p>
<p class="examplet"><span epub:type="pagebreak" id="page_79"></span><a id="ch4ex3"></a><em>Listado 4-3: Código para establecer un bloque en la posición del jugador</em></p>
<p class="indent">Este programa establece un bloque en la posición actual del jugador. Cámbialo para que la variable <span class="literal">blockType</span> se establezca mediante la función input <span class="literal">()</span> <span class="ent">➊.</span> Te sugiero que incluyas una pregunta u otro aviso de texto para que el usuario sepa que debe escribir un número de bloque, y no otro tipo de entrada. Si no incluyes una pregunta, IDLE se limitará a esperar en una línea en blanco hasta que el usuario introduzca algo, y tú quieres dejar claro que el programa necesita un número del usuario.</p>
<p class="indent">Recuerda que <span class="literal">input()</span> devuelve la entrada como una cadena, y para que introduzca el valor como un número entero, tienes que utilizar la función <span class="literal">int()</span>. La expresión para recoger la entrada para el tipo de bloque debería tener este aspecto:</p>
<p class="programs" translate="no">blockType = <span class="rose">int</span>(<span class="rose">input</span>(<span class="green">"Enter a block type: "</span>))</p>
<p class="indent">Guarda tu programa modificado, ejecútalo e introduce el número de bloque que quieras. <a href="ch04.xhtml#ch4fig4">La Figura 4-4</a> muestra el resultado del programa.</p>
<div class="image"><img alt="image" src="../images/f04-04.jpg" translate="no"/></div>
<p class="figcap"><a id="ch4fig4"></a><em>Figura 4-4: ¡Ahora puedo crear el bloque que quiera!</em></p>
<div class="sidebar">
<p class="sidebart" id="ch04sb04"><strong>OBJETIVO EXTRA: JUEGOS MÁS INTERACTIVOS</strong></p>
<p class="noindent">Puedes utilizar tantas entradas en el programa como quieras. De momento, el programa crea el bloque en la posición actual del jugador. Piensa cómo establecerías las variables <span class="literal">x</span>, <span class="literal">y</span> y <span class="literal">z</span> utilizando entradas. Si te sientes realmente aventurero, intenta teletransportar al jugador a unas coordenadas concretas utilizando entradas.</p>
</div>
<h3 class="h3" id="ch04lev1sec06"><span epub:type="pagebreak" id="page_80"></span><strong><span class="blue1">Recuperarse de los errores</span></strong></h3>
<p class="noindent">Python utiliza el manejo de <em>excepciones</em> para asegurarse de que tu programa pueda recuperarse de los errores y continuar ejecutándose cuando se produzcan. Por ejemplo, el manejo de excepciones es una forma de gestionar las entradas incorrectas del usuario.</p>
<p class="indent">Supongamos que tu programa solicita un número entero, pero el usuario introduce una cadena. Normalmente, el programa mostraría un mensaje de error, lo que también se llama <em>lanzar una</em> excepción, y dejaría de ejecutarse.</p>
<p class="indent">Con el manejo de excepciones, puedes gestionar tú mismo ese error: puedes mantener el programa funcionando sin problemas, mostrar un mensaje de error útil al usuario -como <span class="literal">"Por favor, introduzca un número en su lugar"</span>- y darle la oportunidad de solucionar su problema sin reiniciar el programa.</p>
<p class="indent">Una sentencia <span class="literal">try-except</span> es una herramienta que puedes utilizar para gestionar errores. Es especialmente buena para proporcionar información útil al usuario cuando introduce datos incorrectos, y puede evitar que tu programa se detenga cuando se produce un error.</p>
<p class="indent">La sentencia se compone de dos partes: el <span class="literal">try</span> y el <span class="literal">except</span>. La primera parte, <span class="literal">try</span>, es el código que quieres ejecutar si no se produce ningún error. Este código puede tomar una entrada o imprimir una cadena. La parte <span class="literal">except</span> de la sentencia se ejecutará sólo si se produce un error en la parte <span class="literal">try</span>.</p>
<p class="indent">Imagina un código que te pregunta cuántos pares de gafas de sol tienes (tengo tres pares):</p>
<p class="programs" translate="no"> <span class="orange">try</span>:<br translate="no"/><span class="ent">➊</span>    noOfSunglasses = <span class="rose">int</span>(<span class="rose">input</span>(<span class="green">"How many sunglasses do you own? "</span>))<br translate="no"/> <span class="orange">except</span>:<br translate="no"/><span class="ent">➋</span> <span class="rose">print</span>(<span class="green">"Invalid input: please enter a number"</span>)</p>
<p class="indent">Este programa requiere un número. Si introduces letras o símbolos, imprimirá <span class="literal">"Entrada no válida: introduce un número"</span>. El error se produce porque la función <span class="literal">int(</span> ) sólo puede convertir cadenas que contengan sólo números enteros <span class="ent">➊.</span> Si introduces un número, el código funcionará, pero si introduces algo que no es un número, como <span class="literal">muchas gafas de sol</span>, esta entrada provocará un error en la función int( <span class="literal">)</span>.</p>
<p class="indent">Por cierto, ¿has notado algo diferente en este trozo de código? Es la primera vez que utilizamos una sentencia que requiere <em>sangría</em>, que es cuando escribes varios espacios <em>antes de</em> escribir cualquier texto. Hablaré más de la sangría cuando trate las sentencias <span class="literal">if</span> en <a href="ch06.xhtml#ch06">el Capítulo 6</a> y los bucles <span class="literal">for</span> en <a href="ch07.xhtml#ch07">los Capítulos 7</a> y <a href="ch09.xhtml#ch09">9</a>. Por ahora, asegúrate de que escribes tu código exactamente como aparece en este libro.</p>
<p class="indent">Normalmente, cuando se produce un error, Python muestra un mensaje difícil de entender y no indica claramente al usuario cómo solucionar el problema. Pero con <span class="literal">try-except</span>, puedes evitar que los mensajes de error de Python se muestren al usuario cuando introduzca un tipo de datos incorrecto; en su lugar, puedes darle instrucciones sencillas y útiles sobre lo que debe hacer. A veces el usuario simplemente pulsa <small>INTRO</small> en lugar de introducir datos. Normalmente, esto crea un error, pero con el código dentro de la sentencia <span class="literal">try-except</span> <span class="ent">➊,</span> en su lugar se imprimirá la cadena " <span class="literal">Entrada no válida: por favor, introduzca un número</span> <span class="ent">➋.</span></p>
<p class="indent"><span epub:type="pagebreak" id="page_81"></span>Puedes poner casi cualquier código dentro de una sentencia <span class="literal">try-except</span>, incluso otras sentencias <span class="literal">try-except</span>. ¡Pruébalo en la siguiente misión!</p>
<h4 class="h4a" id="ch04lev2sec07"><strong>Misión nº 15: Sólo se permiten números</strong></h4>
<p class="noindent">¿Recuerdas el programa que escribiste en la Misión 14? Cuando introducías un valor entero, el programa funcionaba exactamente como debía y creaba un bloque. Pero si introducías una cadena, el programa dejaba de funcionar y mostraba un error, como se muestra en la <a href="ch04.xhtml#ch4fig5">Figura 4-5</a>.</p>
<div class="image"><img alt="image" src="../images/f04-05.jpg" translate="no"/></div>
<p class="figcap"><em><a id="ch4fig5"></a>Figura</em><em>4-5:</em> <span class="literal"><span class="codeitalic">cake</span></span> <em>no es un número, por lo que el programa no creó un bloque.</em></p>
<p class="indent">Este mensaje de error tiene sentido cuando estás acostumbrado a Python. Pero, ¿qué pasaría si alguien que nunca antes hubiera utilizado Python intentara introducir una cadena en lugar de un número entero? Recibiría un mensaje de error que no entendería. Tu misión es utilizar el tratamiento de errores para escribir un mensaje que sea fácil de entender.</p>
<p class="indent">Abre el programa bloqueEntrada <em>.py</em> que creaste en la Misión 14. Guarda el programa como <em>blockInputFix.py</em> en la carpeta <em>strings</em>.</p>
<p class="indent">Vas a cambiar el programa para que utilice una sentencia <span class="literal">try-except</span> cuando te pida un número de bloque. Busca la última línea de código en el programa. Debe tener este aspecto:</p>
<p class="programs" translate="no">mc.setBlock(x, y, z, blockType)</p>
<p class="indent">Añade una sentencia <span class="literal">try</span> en la línea anterior a ésta y añade cuatro espacios al principio de la línea antes de la función <span class="literal">mc.setBlock()</span>. Después, en la línea anterior a setBlock( <span class="literal">)</span>, añade este código para obtener una entrada del usuario: <span class="literal">blockType = int(input("Introduce un tipo de bloque: "))</span>.</p>
<p class="indent">A continuación, en la línea justo después de la función setBlock <span class="literal">()</span>, escribe una sentencia <span class="literal">except</span>. Dentro de la sentencia <span class="literal">except</span> añade una línea de código que publique un mensaje en el chat de Minecraft para decir que el tipo de bloque debe ser un número; <span epub:type="pagebreak" id="page_82"></span>por ejemplo, " <span class="literal">¡No has introducido un número! Introduce un número la próxima vez"</span>. Este es el aspecto que debería tener el código modificado (fíjate en los cuatro espacios, o sangría, al principio de las líneas <span class="ent">➊</span> y <span class="ent">➋)</span>:</p>
<p class="programs" translate="no"> <span class="orange">try</span>:<br translate="no"/><span class="ent">➊</span>    blockType = <span class="rose">int</span>(<span class="rose">input</span>(<span class="green">"Enter a block type: "</span>))<br translate="no"/>      mc.setBlock(x, y, z, blockType)<br translate="no"/> <span class="orange">except</span>:<br translate="no"/><span class="ent">➋</span>    mc.postToChat("Yo<span class="green">u did not enter a number! Enter a number next time.")</span></p>
<p class="indent">La función <span class="literal">int(</span> ) espera convertir la entrada introducida por el usuario en un número entero <span class="ent">➊.</span> Como hemos añadido la sentencia <span class="literal">try-except</span> al programa, si el usuario introduce algo que no es un número (como letras o símbolos), se producirá un error. En lugar de mostrar el mensaje de error normal de Python, el programa enviará una cadena al chat pidiendo al usuario que introduzca sólo un número <span class="ent">➋.</span> Quizá quieras cambiar el mensaje del chat para que sea un poco más educado.</p>
<p class="indent">Cuando hayas terminado de introducir un mensaje de error más amable, guarda el archivo <em>blockInputFix.py</em> y ejecútalo para admirar tu obra. El resultado debería parecerse a <a href="ch04.xhtml#ch4fig6">la Figura 4-6</a>.</p>
<div class="image"><img alt="image" src="../images/f04-06.jpg" translate="no"/></div>
<p class="figcap"><a id="ch4fig6"></a><em>Figura 4-6: El mensaje de error mostrado en el chat es mucho más fácil de entender.</em></p>
<h4 class="h4a" id="ch04lev2sec08"><strong>Misión nº 16: Sprint Record</strong></h4>
<p class="noindent">La misión final de este capítulo combina todo lo que has aprendido sobre variables<a href="ch02.xhtml#ch02">(Capítulo 2</a>) y operadores matemáticos<a href="ch03.xhtml#ch03">(Capítulo 3</a>) con la publicación de mensajes en el chat. Tu tarea consiste en crear un registrador: el programa calculará la distancia que recorre el jugador en 10 segundos y mostrará los resultados en el chat.</p>
<p class="indent"><span epub:type="pagebreak" id="page_83"></span>Recuerda que puedes utilizar el siguiente código para hacer que tus programas esperen, o duerman, un determinado número de segundos:</p>
<p class="programs" translate="no"><span class="orange">import</span> time     <span class="red"># Place this somewhere near the top of your program</span><br translate="no"/>time.sleep(30)  <span class="red"># Makes the program wait 30 seconds</span></p>
<p class="indent">Utiliza este ejemplo de <span class="literal">sleep()</span> y escribe el siguiente código para empezar con este nuevo programa:</p>
<p class="sidenote" translate="no"><span class="blue"><em>sprint.py</em></span></p>
<p class="programs" translate="no"> <span class="orange">import</span> time<br translate="no"/> <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br translate="no"/>   mc = Minecraft.create()<br translate="no"/><br translate="no"/><span class="ent">➊</span> pos1 = mc.player.getTilePos()<br translate="no"/>   x1 = pos1.x<br translate="no"/>   y1 = pos1.y<br translate="no"/>   z1 = pos1.z<br translate="no"/><br translate="no"/>   time.sleep(10)<br translate="no"/><br translate="no"/><span class="ent">➋</span> pos2 = mc.player.getTilePos()<br translate="no"/>   x2 = pos2.x<br translate="no"/>   y2 = pos2.y<br translate="no"/>   z2 = pos2.z<br translate="no"/><br translate="no"/> <span class="red"># Compare the difference between the starting position and ending position</span><br translate="no"/><span class="ent">➌</span> xDistance = x2 – x1<br translate="no"/>   yDistance =<br translate="no"/>   zDistance =<br translate="no"/><br translate="no"/> <span class="red"># Post the results to the chat</span><br translate="no"/><span class="ent">➍</span> mc.postToChat(<span class="green">""</span>)</p>
<p class="indent">Desglosemos este código. El programa obtiene la posición inicial del jugador <span class="ent">➊,</span> espera 10 segundos y luego obtiene la posición final del jugador <span class="ent">➋.</span> Para terminar el programa, tienes que calcular la diferencia entre las posiciones inicial y final. Para ello, establece los valores de las variables <span class="literal">yDistancia</span> y <span class="literal">zDistancia</span>, que comienzan en <span class="ent">➌.</span> Para ayudarte, he incluido el valor de la variable <span class="literal">xDistancia</span>, que debe ser <span class="literal">x2 - x1</span>. Los valores de las variables <span class="literal">yDistancia</span> y <span class="literal">zDistancia</span> deben ser similares a éste, pero utilizando variables distintas en lugar de <span class="literal">x1</span> y <span class="literal">x2</span>.</p>
<p class="indent">En la última línea, envía los resultados al chat de Minecraft <span class="ent">➍.</span> Los resultados deben tener el siguiente formato <span class="literal">"El jugador se ha movido x: 10, y:</span> 6, <span class="literal"> y z: -3"</span>. Utiliza cadenas, concatenación y los valores de las variables <span class="literal">xDistancia</span>, <span class="literal">yDistancia</span> y <span class="literal">zDistancia</span> para hacerlo.</p>
<p class="indent">Guarda este programa en la carpeta <em>cadenas</em> como <em>sprint.py</em> y ejecútalo. <a href="ch04.xhtml#ch4fig7">La Figura 4-7</a> muestra el resultado del programa.</p>
<div class="image"><span epub:type="pagebreak" id="page_84"></span><img alt="image" src="../images/f04-07.jpg" translate="no"/></div>
<p class="figcap"><a id="ch4fig7"></a><em>Figura 4-7: Al finalizar el programa se muestra la distancia recorrida.</em></p>
<p class="indent">Si tienes el programa en marcha pero te resulta difícil cambiar entre la línea de comandos y Minecraft lo suficientemente rápido, prueba a añadir una cuenta atrás de tres segundos antes del paso 2. Publica esta cuenta atrás en el chat.</p>
<div class="sidebar">
<p class="sidebart" id="ch04sb05"><strong>OBJETIVO EXTRA: A VUELO DE PÁJARO</strong></p>
<p class="noindent">En este punto, el programa muestra la distancia recorrida a lo largo de cada eje por separado: la dirección x, la dirección y y la dirección z. ¿Cómo crearías y mostrarías la distancia recorrida como un único número entero, es decir, a vuelo de pájaro? Pista: Tendrás que utilizar la trigonometría, concretamente el teorema de Pitágoras. Si no estás seguro de cómo hacerlo ahora, no te preocupes; verás un programa similar con código para calcular la distancia recorrida como un único número entero en la Misión 40<a href="ch07.xhtml#page_145">(página 145</a>).</p>
</div>
<h3 class="h3" id="ch04lev1sec07"><strong><span class="blue1">Lo que has aprendido</span></strong></h3>
<p class="noindent">¡Enhorabuena! Has aprendido mucho en este capítulo. Has creado cadenas, has mostrado cadenas mediante sentencias print y las has unido mediante concatenación. Has escrito programas que aceptan entradas del usuario, han cambiado los tipos de datos de los valores y han manejado excepciones. Por el camino, aplicaste tus conocimientos de Python para hacer más animado tu chat de Minecraft.</p>
<p class="indent">En <a href="ch05.xhtml#ch05">el Capítulo 5</a>, aprenderás a controlar el flujo del programa y a indicar a tus programas cómo tomar decisiones.</p>
</body>
</html>