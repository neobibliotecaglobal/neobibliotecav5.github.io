<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 9. Style</title><link href="core.css" rel="stylesheet" type="text/css"/><meta content="DocBook XSL Stylesheets V1.74.0" name="generator"/><style>
    body {
        width: 74%;
        min-height: 84vh;
        font-size: 16px;
        line-height: 1.5;
        margin: 0;
        padding-left: 13%;
        padding-right: 13%;
        padding-top: 3%;
        }
    
    @media screen and (max-width: 768px) {
        body {
            width: 92%;
            padding-left: 4%;
            padding-right: 4%;
            padding-top: 2%;
            font-size: 14px;
        }
    }
    
    @media screen and (max-width: 480px) {
        body {
            width: 96%;
            padding-left: 2%;
            padding-right: 2%;
            padding-top: 1%;
            font-size: 12px;
        }
    }
</style>
</head><body><body><div class="chapter" title="Chapter 9. Style"><div class="titlepage"><div><div><h1 class="title"><a id="style"></a>Capítulo 9. Estilo</h1></div></div></div><div class="epigraph"><p>¡He aquí un tonto estilo señorial!<a class="indexterm" id="IDX-CHP-9-0476"></a></p><div class="attribution"><span>-William<span class="attribution">Shakespeare</span>,<span class="attribution"> <span class="emphasis"><em translate="no">The First Part of Henry the
                Sixth</em></span></span></span></div></div><p>Los programas informáticos son las cosas más complejas que fabrica el ser humano. Los programas se componen de un enorme número de partes, expresadas como funciones, sentencias y expresiones que se ordenan en secuencias que deben estar prácticamente libres de errores. El comportamiento en tiempo de ejecución se parece muy poco al programa que lo implementa. Normalmente se espera que el software se modifique a lo largo de su vida productiva. El proceso de convertir un programa correcto en otro programa correcto diferente es extremadamente difícil.</p><p>Los buenos programas tienen una estructura que anticipa -pero no se ve sobrecargada por- las posibles modificaciones que serán necesarias en el futuro. Los buenos programas también tienen una presentación clara. Si un programa está bien expresado, tenemos más posibilidades de entenderlo para poder modificarlo o repararlo con éxito.</p><p>Estas preocupaciones son válidas para todos los lenguajes de programación, y especialmente para JavaScript. La tipificación poco precisa y la excesiva tolerancia a los errores de JavaScript ofrecen pocas garantías en tiempo de compilación sobre la calidad de nuestros programas, por lo que, para compensar, debemos codificar con una disciplina estricta.</p><p>JavaScript contiene un amplio conjunto de características débiles o problemáticas que pueden socavar nuestros intentos de escribir buenos programas. Evidentemente, debemos evitar las peores características de JavaScript. Sorprendentemente, quizá también debamos evitar las características que suelen ser útiles pero ocasionalmente peligrosas. Dichas funciones son molestias atractivas y, al evitarlas, se evita una gran clase de errores potenciales.</p><p>El valor a largo plazo del software para una organización está en proporción directa con la calidad del código base. A lo largo de su vida, un programa será manejado por muchos pares de manos y ojos. Si un programa es capaz de comunicar claramente su estructura y características, es menos probable que se rompa cuando se modifique en un futuro nunca demasiado lejano.</p><p>El código JavaScript a menudo se envía directamente al público. Siempre debe tener calidad de publicación. La pulcritud cuenta. Si escribes con un estilo claro y coherente, tus programas serán más fáciles de leer.</p><p>Los programadores pueden debatir interminablemente sobre lo que constituye un buen estilo. La mayoría de los programadores están firmemente arraigados a lo que están acostumbrados, como el estilo imperante en el lugar donde fueron a la escuela, o en su primer trabajo. Algunos han tenido carreras provechosas sin ningún sentido del estilo. ¿No es eso una prueba de que el estilo no importa? E incluso si el estilo no importa, ¿no es un estilo tan bueno como cualquier otro?<a class="indexterm" id="IDX-CHP-9-0477"></a><a class="indexterm" id="IDX-CHP-9-0478"></a></p><p>Resulta que el estilo importa en la programación por la misma razón que importa en la escritura. Se lee mejor.</p><p>A veces se piensa que los programas de ordenador son un medio sólo de escritura, por lo que importa poco cómo esté escrito mientras funcione. Pero resulta que la probabilidad de que un programa funcione aumenta significativamente con nuestra capacidad de leerlo, lo que también aumenta la probabilidad de que realmente funcione según lo previsto. Además, la naturaleza del software es modificarse ampliamente a lo largo de su vida productiva. Si podemos leerlo y comprenderlo, podemos esperar modificarlo y mejorarlo.</p><p>A lo largo de este libro he utilizado un estilo coherente. Mi intención era que los ejemplos de código fueran lo más fáciles de leer posible. He utilizado los espacios en blanco de forma coherente para darte más pistas sobre el significado de mis programas.</p><p>He sangrado el contenido de los bloques y los literales de los objetos cuatro espacios. Coloqué un espacio entre <code class="literal" translate="no">if</code> y <code class="literal" translate="no">(</code>para que <code class="literal" translate="no">if</code> no pareciera una invocación a una función. Sólo en las invocaciones hice que <code class="literal" translate="no">(</code> fuera adyacente con el símbolo precedente. Pongo espacios alrededor de todos los operadores infijos excepto en <code class="literal" translate="no">.</code> y <code class="literal" translate="no">[</code>, que no reciben espacios porque tienen mayor precedencia. Pongo un espacio después de cada coma y dos puntos.<a class="indexterm" id="IDX-CHP-9-0479"></a><a class="indexterm" id="IDX-CHP-9-0480"></a><a class="indexterm" id="IDX-CHP-9-0481"></a></p><p>Pongo como máximo una sentencia en cada línea. Si una frase no cabe en una línea, la rompo después de una coma o de un operador binario. Eso ofrece más protección contra los errores de copiar y pegar que se enmascaran con la inserción del punto y coma. (La tragedia de la inserción del punto y coma se desvelará en <a class="xref" href="apa.html" title="Appendix A. Awful Parts">el Apéndice A</a>.) Pongo cuatro espacios más en el resto de la sentencia, u ocho espacios si cuatro es ambiguo (como un salto de línea en la parte de la condición de una sentencia <code class="literal" translate="no">if</code> ).</p><p>I <span class="emphasis"><em translate="no">always</em></span> utilizo bloques con sentencias estructuradas como <code class="literal" translate="no">if</code> y <code class="literal" translate="no">while</code> porque es menos propenso a errores. Lo he visto:<a class="indexterm" id="IDX-CHP-9-0482"></a><a class="indexterm" id="IDX-CHP-9-0483"></a></p><a id="I_programlisting9_d1e7939"></a><pre class="programlisting" translate="no">if (a)
    b(  );</pre><p>convertirse:</p><a id="I_programlisting9_d1e7943"></a><pre class="programlisting" translate="no">if (a)
    b(  );
    c(  );</pre><p>que es un error muy difícil de detectar. Se parece a</p><a id="I_programlisting9_d1e7947"></a><pre class="programlisting" translate="no">if (a) {
    b(  );
    c(  );
}</pre><p>pero significa</p><a id="I_programlisting9_d1e7951"></a><pre class="programlisting" translate="no">if (a) {
    b(  );
}
c(  );</pre><p>El código que parece significar una cosa pero en realidad significa otra es probable que cause errores. Un par de llaves es una protección realmente barata contra errores que pueden ser caros de encontrar.<a class="indexterm" id="IDX-CHP-9-0484"></a><a class="indexterm" id="IDX-CHP-9-0485"></a></p><p>Siempre utilizo el estilo K&amp;R, poniendo el <code class="literal" translate="no">{</code> al final de una línea en lugar de delante, porque evita un horrible error de diseño en la declaración <code class="literal" translate="no">return</code> de JavaScript.<a class="indexterm" id="IDX-CHP-9-0486"></a><a class="indexterm" id="IDX-CHP-9-0487"></a></p><p>He incluido algunos comentarios. Me gusta poner comentarios en mis programas para dejar información que leerán más adelante personas (posiblemente yo mismo) que necesitarán entender lo que estaba pensando. A veces pienso en los comentarios como en una máquina del tiempo que utilizo para enviar mensajes importantes a mi yo futuro.<a class="indexterm" id="IDX-CHP-9-0488"></a><a class="indexterm" id="IDX-CHP-9-0489"></a></p><p>Me esfuerzo por mantener los comentarios actualizados. Los comentarios erróneos pueden hacer que los programas sean aún más difíciles de leer y entender. No puedo permitirme eso.</p><p>He intentado no hacerte perder el tiempo con comentarios inútiles como éste:</p><a id="I_programlisting9_d1e7994"></a><pre class="programlisting" translate="no">i = 0; // Set i to zero.</pre><p>En JavaScript, prefiero utilizar comentarios de línea. Reservo los comentarios de bloque para la documentación formal y para comentar.<a class="indexterm" id="IDX-CHP-9-0490"></a><a class="indexterm" id="IDX-CHP-9-0491"></a><a class="indexterm" id="IDX-CHP-9-0492"></a><a class="indexterm" id="IDX-CHP-9-0493"></a></p><p>Prefiero que la estructura de mis programas sea autoiluminadora, eliminando la necesidad de comentarios. No siempre tengo éxito, así que mientras mis programas esperan la perfección, escribo comentarios.</p><p>JavaScript tiene sintaxis C, pero sus bloques no tienen ámbito. Por tanto, la convención de que las variables deben declararse en su primer uso es un mal consejo en JavaScript. JavaScript tiene ámbito de función, pero no de bloque, así que declaro todas mis variables al principio de cada función. JavaScript permite declarar las variables después de utilizarlas. Eso me parece un error, y no quiero escribir programas que parezcan errores. Quiero que mis errores destaquen. Del mismo modo, nunca utilizo una expresión de asignación en la parte de la condición de un <code class="literal" translate="no">if</code>porque:</p><a id="I_programlisting9_d1e8021"></a><pre class="programlisting" translate="no">if (a = b) { ... }</pre><p>probablemente sea la intención:</p><a id="I_programlisting9_d1e8026"></a><pre class="programlisting" translate="no">if (a === b) { ... }</pre><p>Quiero evitar frases hechas que parezcan errores.</p><p>Nunca permito que los casos de conmutación pasen al caso siguiente. Una vez encontré un error en mi código provocado por un "fall through" involuntario inmediatamente después de haber hecho un enérgico discurso sobre por qué el "fall through" era útil a veces. Tuve la suerte de poder aprender de la experiencia. Cuando reviso las características de un lenguaje, ahora presto especial atención a las características que a veces son útiles pero ocasionalmente peligrosas. Ésas son las <span class="emphasis"><em translate="no">worst parts</em></span> porque es difícil saber si se utilizan correctamente. Es un lugar donde se esconden los bugs.<a class="indexterm" id="IDX-CHP-9-0494"></a></p><p>La calidad no fue una preocupación motivadora en el diseño, implementación o estandarización de JavaScript. Eso pone una mayor carga en los usuarios del lenguaje para resistir las debilidades del mismo.</p><p>JavaScript ofrece soporte para programas grandes, pero también proporciona formas y modismos que van en contra de los programas grandes. Por ejemplo, JavaScript facilita el uso de variables globales, pero éstas resultan cada vez más problemáticas a medida que aumenta la complejidad de los programas.<a class="indexterm" id="IDX-CHP-9-0495"></a><a class="indexterm" id="IDX-CHP-9-0496"></a></p><p>Yo utilizo una única variable global para contener una aplicación o biblioteca. Cada objeto tiene su propio espacio de nombres, por lo que es fácil utilizar objetos para organizar mi código. El uso del cierre proporciona una mayor ocultación de la información, aumentando la solidez de mis módulos.</p></div></body><footer>
<style>
        footer {
            text-align: center;
            margin-top: 2em;
            padding-top: 1em;
            padding-bottom: 2em;
            border-top: 1px solid #eaeaea;
        }
        
        footer a {
            color: #0000FF; /* Color azul para los enlaces */
            text-decoration: none; /* Opcional: elimina el subrayado de los enlaces */
            margin-left: 1em;
            margin-right: 1em;
        }
        footer a:hover {
            text-decoration: underline; /* Opcional: subraya el enlace al pasar el mouse */
        }
    </style>
<a href="ch08.html">← Anterior</a><a href="ch10.html">Siguiente →</a><br/><br/><em>Recursos no desglosados:</em><br/><a href="ch09.docx" target="_blank">&gt; Acceso sin conexión (formato Word / DOCX)</a><br/><a href="..\EN\js-the-good-parts\ch09.html" target="_blank">&gt; Lectura en inglés</a></footer></body></html>