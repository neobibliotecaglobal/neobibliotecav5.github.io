<!DOCTYPE html>

<html lang="es">
<head><meta charset="utf-8"/>
<meta charset="utf-8"/>
<title>Capítulo 2: Visualizar datos con gráficos</title>
<link href="style.css" media="all" rel="stylesheet" type="text/css"/>
<link href="core.css" media="all" rel="stylesheet" type="text/css"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
    body {
        width: 74%;
        min-height: 84vh;
        font-size: 16px;
        line-height: 1.5;
        margin: 0;
        padding-left: 13%;
        padding-right: 13%;
        padding-top: 3%;
        }
    
    @media screen and (max-width: 768px) {
        body {
            width: 92%;
            padding-left: 4%;
            padding-right: 4%;
            padding-top: 2%;
            font-size: 14px;
        }
    }
    
    @media screen and (max-width: 480px) {
        body {
            width: 96%;
            padding-left: 2%;
            padding-right: 2%;
            padding-top: 1%;
            font-size: 12px;
        }
    }
</style>
</head>
<body>
<h3 class="h3" id="ch02lev1sec03"><a id="page_32"></a><strong>Crear gráficos con Matplotlib</strong></h3>
<p class="noindent">Utilizaremos matplotlib para crear gráficos con Python. Matplotlib es un <em>paquete</em> de Python, lo que significa que es una colección de módulos con funcionalidades relacionadas. En este caso, los módulos sirven para trazar números y hacer gráficos. Matplotlib no viene incorporado con la biblioteca estándar de Python, así que tendrás que instalarlo. Las instrucciones de instalación se encuentran en <a href="app01.html#app01">el Apéndice A</a>. Una vez que lo tengas instalado, inicia un intérprete de comandos de Python. Como se explica en las instrucciones de instalación, puedes seguir utilizando el shell IDLE o utilizar el shell incorporado de Python.</p>
<p class="indent">Ahora estamos preparados para crear nuestro primer gráfico. Empezaremos con un gráfico sencillo con sólo tres puntos: (1, 2), (2, 4) y (3, 6). Para crear esta gráfica, primero haremos dos listas de números: una que almacene los valores de las coordenadas <em>x</em> de estos puntos y otra que almacene las <em>coordenadas y</em>. Las dos sentencias siguientes hacen exactamente eso, creando las dos listas <span class="literal" translate="no">x_numbers</span> y <span class="literal" translate="no">y_numbers</span>:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">x_numbers = [1, 2, 3]</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">y_numbers = [2, 4, 6]</span></p>
<p class="indent">A partir de aquí, podemos crear el gráfico:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">from pylab import plot, show</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(x_numbers, y_numbers)</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f83ac60df10&gt;]</p>
<p class="indent">En la primera línea, importamos las funciones <span class="literal" translate="no">plot()</span> y <span class="literal" translate="no">show()</span> del módulo <span class="literal" translate="no">pylab</span>, que forma parte del paquete matplotlib. A continuación, llamamos a la función <span class="literal" translate="no">plot()</span> en la segunda línea. El primer argumento de la función <span class="literal" translate="no">plot()</span> es la lista de números que queremos representar en el eje <em>x</em>, y el segundo argumento es la lista correspondiente de números que queremos representar en el <em>eje y</em>. La función <span class="literal" translate="no">plot()</span> devuelve un objeto o, más exactamente, una lista que contiene un objeto. Este objeto contiene la información sobre el gráfico que le hemos pedido a Python que cree. En este punto, puedes añadir más información, como un título, a la gráfica, o puedes simplemente mostrar la gráfica tal y como es. Por ahora sólo mostraremos el gráfico.</p>
<p class="indent">La función <span class="literal" translate="no">plot()</span> sólo crea el gráfico. Para visualizarla realmente, tenemos que llamar a la función <span class="literal" translate="no">show()</span>:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">show()</span></p>
<p class="indent">Deberías ver la gráfica en una ventana de matplotlib, como se muestra en <a href="ch02.html#ch2fig3">la Figura 2-3</a>. (La ventana de visualización puede tener un aspecto diferente según tu sistema operativo, pero la gráfica debería ser la misma).</p>
<div class="image"><a id="page_33"></a><img alt="image" src="images/f02-03.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig3"></a><em>Figura 2-3: Gráfica de una recta que pasa por los puntos (1, 2), (2, 4) y (3, 6)</em></p>
<p class="indent">Observa que, en lugar de partir del origen (0, 0), el <em>eje x</em> parte del número 1 y el <em>eje y</em> parte del número 2. Estos son los números más bajos de cada uno de los ejes. Estos son los números más bajos de cada una de las dos listas. Además, puedes ver incrementos marcados en cada uno de los ejes (como 2,5, 3,0, 3,5, etc., en el <em>eje y</em>). En "<a href="ch02.html#ch02lev2sec05">Personalizar gráficos</a>", en <a href="ch02.html#page_41">la página 41</a>, aprenderemos a controlar esos aspectos del gráfico, junto con la forma de añadir etiquetas a los ejes y un título para el gráfico.</p>
<p class="indent">Observarás en el intérprete de comandos interactivo que no puedes introducir más sentencias hasta que cierres la ventana de matplotlib. Cierra la ventana del gráfico para poder seguir programando.</p>
<h4 class="h4" id="ch02lev2sec02"><strong><em>Marcar puntos en tu gráfico</em></strong></h4>
<p class="noindent">Si quieres que el gráfico marque los puntos que has suministrado para su trazado, puedes utilizar un argumento de palabra clave adicional al llamar a la función <span class="literal" translate="no">plot()</span>:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">plot(x_numbers, y_numbers, marker='o')</span></p>
<p class="indent"><a id="page_34"></a>Introduciendo <span class="literal" translate="no">marker='o'</span>, le decimos a Python que marque cada punto de nuestras listas con un pequeño punto parecido a una <em>o</em>. Cuando vuelvas a introducir <span class="literal" translate="no">show()</span>, verás que cada punto se marca con un punto (ver <a href="ch02.html#ch2fig4">Figura 2-4</a>).</p>
<div class="image"><img alt="image" src="images/f02-04.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig4"></a><em>Figura 2-4: Gráfico que muestra una recta que pasa por los puntos (1, 2), (2, 4) y (3, 6) con los puntos marcados con un punto</em></p>
<p class="indent">El marcador en (2, 4) es fácilmente visible, mientras que los demás están ocultos en las esquinas del gráfico. Puedes elegir entre varias opciones de <span class="literal" translate="no">marker</span>, incluyendo <span class="literal" translate="no">'o'</span>, <span class="literal" translate="no">'*'</span>, <span class="literal" translate="no">'x'</span> y <span class="literal" translate="no">'+'</span>. El uso de <span class="literal" translate="no">marker=</span> incluye una línea que conecta los puntos (es la opción por defecto). También puedes hacer un gráfico que marque sólo los puntos que has especificado, sin ninguna línea que los conecte, omitiendo <span class="literal" translate="no">marker=</span>:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">plot(x_numbers, y_numbers, 'o')</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f2549bc0bd0&gt;]</p>
<p class="indent">Aquí, <span class="literal" translate="no">'o'</span> indica que cada punto debe marcarse con un punto, pero no debe haber ninguna línea que conecte los puntos. Llama a la función <span class="literal" translate="no">show()</span> para mostrar el gráfico, que debería parecerse al que se muestra en la <a href="ch02.html#ch2fig5">Figura 2-5</a>.</p>
<div class="image"><a id="page_35"></a><img alt="image" src="images/f02-05.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig5"></a><em>Figura 2-5: Gráfica que muestra los puntos (1, 2), (2, 4) y (3, 6)</em></p>
<p class="indent">Como puedes ver, ahora sólo se muestran los puntos en la gráfica, sin ninguna línea que los conecte. Como en el gráfico anterior, el primer y el último punto apenas son visibles, pero pronto veremos cómo cambiar eso.</p>
<h4 class="h4" id="ch02lev2sec03"><strong><em>Gráfico de la temperatura media anual en Nueva York</em></strong></h4>
<p class="noindent">Echemos un vistazo a un conjunto de datos ligeramente mayor para poder explorar más funciones de matplotlib. Las temperaturas medias anuales de la ciudad de Nueva York -medidas en Central Park, concretamente- durante los años 2000 a 2012 son las siguientes: 53,9, 56,3, 56,4, 53,4, 54,5, 55,8, 56,8, 55,0, 55,3, 54,0, 56,7, 56,4 y 57,3 grados Fahrenheit. Ahora mismo, esto parece un revoltijo aleatorio de números, pero podemos trazar este conjunto de temperaturas en un gráfico para que la subida y bajada de la temperatura media de un año a otro sea mucho más clara:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">nyc_temp = [53.9, 56.3, 56.4, 53.4, 54.5, 55.8, 56.8, 55.0, 55.3, 54.0, 56.7, 56.4, 57.3]</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(nyc_temp, marker='o')</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f2549d52f90&gt;]</p>
<p class="indent"><a id="page_36"></a>Almacenamos las temperaturas medias en una lista, <span class="literal" translate="no">nyc_temp</span>. A continuación, llamamos a la función <span class="literal" translate="no">plot()</span> pasándole sólo esta lista (y la cadena del marcador). Cuando utilizas <span class="literal" translate="no">plot()</span> en una sola lista, esos números se trazan automáticamente en el <em>eje y</em>. Los valores correspondientes en el <em>eje x</em> se rellenan como las posiciones de cada valor de la lista. Es decir, al primer valor de temperatura, 53,9, le corresponde un valor 0 <em>en el eje x</em>, porque está en la posición 0 de la lista (recuerda que la posición de la lista empieza a contar desde 0, no desde 1). Como resultado, los números trazados en el eje <em>x</em> son los enteros de 0 a 12, que podemos considerar como correspondientes a los 13 años de los que tenemos datos de temperatura.</p>
<p class="indent">Introduce <span class="literal" translate="no">show()</span> para visualizar el gráfico, que se muestra en la <a href="ch02.html#ch2fig6">Figura 2-6</a>. El gráfico muestra que la temperatura media ha subido y bajado de un año a otro. Si echas un vistazo a los números que hemos trazado, en realidad no están muy alejados entre sí. Sin embargo, el gráfico hace que las variaciones parezcan bastante dramáticas. Entonces, ¿qué está pasando? La razón es que matplotlib elige el rango del <em>eje y</em> de modo que sea justo el suficiente para encerrar los datos suministrados para el trazado. Así, en este gráfico, el <em>eje</em> y empieza en 53,0 y su valor más alto es 57,5. Esto hace que incluso las pequeñas diferencias parezcan aumentadas, porque el rango del eje <em>y</em> es muy pequeño. Aprenderemos a controlar el rango de cada eje en "<a href="ch02.html#ch02lev2sec05">Personalizar gráficos</a>" en <a href="ch02.html#page_41">la página 41</a>.</p>
<div class="image"><img alt="image" src="images/f02-06.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig6"></a><em>Figura 2-6: Gráfico que muestra la temperatura media anual de la ciudad de Nueva York durante los años 2000-2012</em></p>
<p class="indent"><a id="page_37"></a>También puedes ver que los números del <em>eje y</em> son números de coma flotante (porque es lo que pedimos que se representara) y los del <em>eje x</em> son números enteros. Matplotlib puede manejar cualquiera de los dos.</p>
<p class="indent">Trazar la temperatura sin mostrar los años correspondientes es una forma rápida y sencilla de visualizar las variaciones entre los años. Sin embargo, si tuvieras pensado presentar este gráfico a alguien, te gustaría hacerlo más claro mostrando a qué año corresponde cada temperatura. Podemos hacerlo fácilmente creando otra lista con los años y llamando a la función <span class="literal" translate="no">plot()</span>:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">nyc_temp = [53.9, 56.3, 56.4, 53.4, 54.5, 55.8, 56.8, 55.0, 55.3, 54.0, 56.7, 56.4, 57.3]</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">years = range(2000, 2013)</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(years, nyc_temp, marker='o')</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f2549a616d0&gt;]<br translate="no"/>&gt;&gt;&gt; <span class="codestrong">show()</span></p>
<p class="indent">Utilizamos la función <span class="literal" translate="no">range()</span> que conocimos en el <a href="ch01.html#ch01">Capítulo</a> 1 para especificar los años 2000 a 2012. Ahora verás los años mostrados en el <em>eje x</em>(ver <a href="ch02.html#ch2fig7">Figura 2-7</a>).</p>
<div class="image"><img alt="image" src="images/f02-07.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig7"></a><em>Figura 2-7: Gráfico de la temperatura media anual de la ciudad de Nueva York, mostrando los</em> años en el <em>eje</em> x</p>
<h4 class="h4" id="ch02lev2sec04"><a id="page_38"></a><strong><em>Comparación de las tendencias mensuales de la temperatura en Nueva York</em></strong></h4>
<p class="noindent">Sin dejar de observar la ciudad de Nueva York, veamos cómo ha variado la temperatura media mensual a lo largo de los años. Esto nos dará la oportunidad de entender cómo trazar varias líneas en un mismo gráfico. Elegiremos tres años: 2000, 2006 y 2012. Para cada uno de estos años, trazaremos la temperatura media de los 12 meses.</p>
<p class="indent">En primer lugar, tenemos que crear tres listas para almacenar la temperatura (en grados Fahrenheit). Cada lista constará de 12 números correspondientes a la temperatura media de enero a diciembre de cada año:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">nyc_temp_2000 = [31.3, 37.3, 47.2, 51.0, 63.5, 71.3, 72.3, 72.7, 66.0, 57.0, 45.3, 31.1]</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">nyc_temp_2006 = [40.9, 35.7, 43.1, 55.7, 63.1, 71.0, 77.9, 75.8, 66.6, 56.2, 51.9, 43.6]</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">nyc_temp_2012 = [37.3, 40.9, 50.9, 54.8, 65.1, 71.0, 78.8, 76.7, 68.8, 58.0, 43.9, 41.5]</span></p>
<p class="indent">La primera lista corresponde al año 2000, y las dos siguientes a los años 2006 y 2012, respectivamente. Podríamos trazar los tres conjuntos de datos en tres gráficos diferentes, pero eso no facilitaría mucho ver cómo se compara cada año con los demás. ¡Prueba a hacerlo!</p>
<p class="indent">La forma más clara de comparar todas estas temperaturas es trazar los tres conjuntos de datos en un <em>solo</em> gráfico, como éste:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">months = range(1, 13)</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(months, nyc_temp_2000, months, nyc_temp_2006, months, nyc_temp_2012)</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f2549c1f0d0&gt;, &lt;matplotlib.lines.Line2D<br translate="no"/>object at 0x7f2549a61150&gt;, &lt;matplotlib.lines.Line2D object at 0x7f2549c1b550&gt;]</p>
<p class="indent">En primer lugar, creamos una lista (<span class="literal" translate="no">months</span>) donde almacenamos los números 1, 2, 3, y así sucesivamente hasta el 12 utilizando la función <span class="literal" translate="no">range()</span>. A continuación, llamamos a la función <span class="literal" translate="no">plot()</span> con tres pares de listas. Cada par consiste en una lista de meses que se trazarán en el eje <em>x</em> y una lista de temperaturas medias mensuales (de 2000, 2006 y 2012, respectivamente) que se trazarán en el <em>eje y</em>. Hasta ahora, hemos utilizado <span class="literal" translate="no">plot()</span> en un solo par de listas a la vez, pero en realidad puedes introducir varios pares de listas en la función <span class="literal" translate="no">plot()</span>. Con cada lista separada por una coma, la función <span class="literal" translate="no">plot()</span> trazará automáticamente una línea diferente para cada par.</p>
<p class="indent">La función <span class="literal" translate="no">plot()</span> devuelve una lista de tres objetos en lugar de uno. Matplotlib considera que las tres curvas son distintas entre sí, y sabe que debe dibujarlas una encima de la otra cuando llamas a <span class="literal" translate="no">show()</span>. Llamemos a <span class="literal" translate="no">show()</span> para mostrar el gráfico, como se muestra en la <a href="ch02.html#ch2fig8">Figura 2-8</a>.</p>
<div class="image"><a id="page_39"></a><img alt="image" src="images/f02-08.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig8"></a><em>Figura 2-8: Gráfico que muestra la temperatura media mensual de la ciudad de Nueva York durante los años 2000, 2006 y 2012</em></p>
<p class="indent">Ahora tenemos tres gráficos en uno solo. Python elige automáticamente un color diferente para cada línea, para indicar que las líneas se han trazado a partir de conjuntos de datos diferentes.</p>
<p class="indent">En lugar de llamar a la función trazar con los tres pares a la vez, también podríamos llamar a la función trazar tres veces distintas, una para cada par:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">plot(months, nyc_temp_2000)</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f1e51351810&gt;]<br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(months, nyc_temp_2006)</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f1e5ae8e390&gt;]<br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(months, nyc_temp_2012)</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f1e5136ccd0&gt;]<br translate="no"/>&gt;&gt;&gt; <span class="codestrong">show()</span></p>
<p class="indent">Matplotlib lleva la cuenta de los trazados que aún no se han mostrado. Así que, si esperamos a llamar a <span class="literal" translate="no">show()</span> hasta después de llamar tres veces a <span class="literal" translate="no">plot()</span>, todos los gráficos se mostrarán en el mismo gráfico.</p>
<p class="indent"><a id="page_40"></a>Sin embargo, tenemos un problema, porque no tenemos ninguna pista sobre qué color corresponde a cada año. Para solucionarlo, podemos utilizar la función <span class="literal" translate="no">legend()</span>, que nos permite añadir una leyenda al gráfico. Una <em>leyenda</em> es un pequeño recuadro que identifica lo que significan las distintas partes del gráfico. Aquí utilizaremos una leyenda para indicar a qué año corresponde cada línea de color. Para añadir la leyenda, llama primero a la función <span class="literal" translate="no">plot()</span> como antes:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">plot(months, nyc_temp_2000, months, nyc_temp_2006, months, nyc_temp_2012)</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f2549d6c410&gt;, &lt;matplotlib.lines.Line2D<br translate="no"/>object at 0x7f2549d6c9d0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f2549a86850&gt;]</p>
<p class="indent">A continuación, importa la función <span class="literal" translate="no">legend()</span> del módulo <span class="literal" translate="no">pylab</span> y llámala como se indica a continuación:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">from pylab import legend</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">legend([2000, 2006, 2012])</span><br translate="no"/>&lt;matplotlib.legend.Legend object at 0x7f2549d79410&gt;</p>
<p class="indent">Llamamos a la función <span class="literal" translate="no">legend()</span> con una lista de las etiquetas que queremos utilizar para identificar cada parcela del gráfico. Estas etiquetas se introducen en este orden para que coincidan con el orden de los pares de listas que se introdujeron en la función <span class="literal" translate="no">plot()</span>. Es decir, <span class="literal" translate="no">2000</span> será la etiqueta para el gráfico del primer par que introdujimos en la función <span class="literal" translate="no">plot()</span>; <span class="literal" translate="no">2006</span>, para el segundo par; y <span class="literal" translate="no">2012</span>, para el tercero. También puedes especificar un segundo argumento a la función que especificará la posición de la leyenda. Por defecto, siempre se coloca en la parte superior derecha del gráfico. Sin embargo, puedes especificar una posición concreta, como <span class="literal" translate="no">'lower center'</span>, <span class="literal" translate="no">'center left'</span>, y <span class="literal" translate="no">'upper left'</span>. O puedes establecer la posición <span class="literal" translate="no">'best'</span>, y la leyenda se colocará de forma que no interfiera con el gráfico.</p>
<p class="indent">Por último, llamamos a <span class="literal" translate="no">show()</span> para mostrar el gráfico:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">show()</span></p>
<p class="indent">Como puedes ver en el gráfico (ver <a href="ch02.html#ch2fig9">Figura 2-9</a>), ahora hay un cuadro de leyenda en la esquina superior derecha. Nos indica qué línea representa la temperatura media mensual del año 2000, qué línea representa el año 2006 y qué línea representa el año 2012.</p>
<p class="indent">Observando el gráfico, puedes concluir dos hechos interesantes: la temperatura más alta de los tres años se produjo en julio y alrededor de julio (correspondiente a 7 en el <em>eje x</em>), y ha ido aumentando desde el año 2000, con una subida más espectacular entre 2000 y 2006. Tener las tres líneas trazadas juntas en un gráfico hace que sea mucho más fácil ver este tipo de relaciones. Desde luego, es más claro que mirar unas largas listas de números o incluso que mirar tres líneas trazadas en tres gráficos distintos.</p>
<div class="image"><a id="page_41"></a><img alt="image" src="images/f02-09.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig9"></a><em>Figura 2-9: Gráfico que muestra la temperatura media mensual de la ciudad de Nueva York, con una leyenda que muestra el año al que corresponde cada color</em></p>
<h4 class="h4" id="ch02lev2sec05"><strong><em>Personalizar gráficos</em></strong></h4>
<p class="noindent">Ya hemos visto una forma de personalizar un gráfico: añadiendo una leyenda. Ahora aprenderemos otras formas de personalizar un gráfico y hacerlo más claro, añadiendo etiquetas a los ejes <em>x</em> e <em>y</em>, añadiendo un título al gráfico y controlando el rango y los pasos de los ejes.</p>
<h5 class="h5" id="ch02lev3sec01"><strong>Añadir un título y etiquetas</strong></h5>
<p class="noindent">Podemos añadir un título a nuestro gráfico utilizando la función <span class="literal" translate="no">title()</span> y añadir etiquetas para los <em>ejes</em> <em>x</em> e y utilizando las funciones <span class="literal" translate="no">xlabel()</span> y <span class="literal" translate="no">ylabel()</span>. Volvamos a crear el último gráfico y añadamos toda esta información adicional:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">from pylab import plot, show, title, xlabel, ylabel, legend</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(months, nyc_temp_2000, months, nyc_temp_2006, months, nyc_temp_2012)</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f2549a9e210&gt;, &lt;matplotlib.lines.Line2D<br translate="no"/>object at 0x7f2549a4be90&gt;, &lt;matplotlib.lines.Line2D object at 0x7f2549a82090&gt;]<br translate="no"/>&gt;&gt;&gt; <span class="codestrong">title('Average monthly temperature in NYC')</span><br translate="no"/>&lt;matplotlib.text.Text object at 0x7f25499f7150&gt;<br translate="no"/>&gt;&gt;&gt; <span class="codestrong">xlabel('Month')</span><br translate="no"/>&lt;matplotlib.text.Text object at 0x7f2549d79210&gt;<br translate="no"/>&gt;&gt;&gt; <span class="codestrong">ylabel('Temperature')</span><br translate="no"/>&lt;matplotlib.text.Text object at 0x7f2549b8b2d0&gt;<br translate="no"/><a id="page_42"></a><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">legend([2000, 2006, 2012])</span><br translate="no"/>&lt;matplotlib.legend.Legend object at 0x7f2549a82910&gt;</p>
<p class="indent">Las tres funciones -<span class="literal" translate="no">title()</span>, <span class="literal" translate="no">xlabel()</span>, y <span class="literal" translate="no">ylabel()</span>- se llaman con el texto correspondiente que queremos que aparezca en el gráfico introducido como cadenas. Al llamar a la función <span class="literal" translate="no">show()</span> se mostrará el gráfico con toda esta información recién añadida (ver <a href="ch02.html#ch2fig10">Figura 2-10</a>).</p>
<div class="image"><img alt="image" src="images/f02-10.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig10"></a><em>Figura 2-10: Se han añadido al gráfico las etiquetas de los ejes y un título.</em></p>
<p class="indent">Con los tres nuevos datos añadidos, el gráfico es más fácil de entender.</p>
<h5 class="h5" id="ch02lev3sec02"><strong>Personalizar los Ejes</strong></h5>
<p class="noindent">Hasta ahora, hemos permitido que Python determine automáticamente los números de ambos ejes basándose en los datos suministrados a la función <span class="literal" translate="no">plot()</span>. Esto puede estar bien para la mayoría de los casos, pero a veces este rango automático no es la forma más clara de presentar los datos, como vimos en el gráfico en el que trazamos la temperatura media anual de la ciudad de Nueva York (ver <a href="ch02.html#ch2fig7">Figura 2-7</a>). Allí, incluso pequeños cambios en la temperatura parecían grandes porque el rango del eje <em>y</em> elegido automáticamente era muy estrecho. Podemos ajustar el rango de los ejes utilizando la función <span class="literal" translate="no">axis()</span>. Esta función puede utilizarse tanto para recuperar el rango actual como para establecer un nuevo rango para los ejes.</p>
<p class="indent">Considera, una vez más, la temperatura media anual de la ciudad de Nueva York durante los años 2000 a 2012 y crea un gráfico como hicimos anteriormente.</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">nyc_temp = [53.9, 56.3, 56.4, 53.4, 54.5, 55.8, 56.8, 55.0, 55.3, 54.0, 56.7, 56.4, 57.3]</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(nyc_temp, marker='o')</span><br translate="no"/>[&lt;matplotlib.lines.Line2D object at 0x7f3ae5b767d0&gt;]</p>
<p class="indent"><a id="page_43"></a>Ahora, importa la función <span class="literal" translate="no">axis()</span> y llámala:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">from pylab import axis</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">axis()</span><br translate="no"/>(0.0, 12.0, 53.0, 57.5)</p>
<p class="indent">La función devuelve una tupla con cuatro números correspondientes al rango para el <em>eje x</em>(0,0, 12,0) y el <em>eje y</em>(53,0, 57,5). Estos son los mismos valores de rango del gráfico que hicimos antes. Ahora, cambiemos el <em>eje</em> y para que empiece en 0 en lugar de en 53,0:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">axis(ymin=0)</span><br translate="no"/>(0.0, 12.0, 0, 57.5)</p>
<p class="indent">Al llamar a la función <span class="literal" translate="no">axis()</span> con el nuevo valor inicial del eje <em>y</em>(especificado por <span class="literal" translate="no">ymin=0</span>) cambia el rango, y la tupla devuelta lo confirma. Si visualizas el gráfico llamando a la función <span class="literal" translate="no">show()</span>, el <em>eje</em> y empieza en 0, y las diferencias entre los valores de los años consecutivos parecen menos drásticas (ver <a href="ch02.html#ch2fig11">Figura 2-11</a>).</p>
<div class="image"><img alt="image" src="images/f02-11.jpg" translate="no"/></div>
<p class="figuret"><a id="ch2fig11"></a><em>Figura 2-11: Gráfico que muestra la temperatura media anual de la ciudad de Nueva York durante los años 2000-2012. El</em> eje y se ha<em>personalizado para que empiece en 0.</em></p>
<p class="indent"><a id="page_44"></a>Del mismo modo, puedes utilizar <span class="literal" translate="no">xmin</span>, <span class="literal" translate="no">xmax</span>, y <span class="literal" translate="no">ymax</span> para establecer los valores mínimo y máximo del eje <em>x</em> y el valor máximo del <em>eje y</em>, respectivamente. Si vas a cambiar los cuatro valores, puede que te resulte más fácil llamar a la función <span class="literal" translate="no">axis()</span> con los cuatro valores del rango introducidos como una lista, como <span class="literal" translate="no">axis([0, 10, 0, 20])</span>. Esto establecería el rango del eje <em>x</em> en (0, 10) y el del <em>eje</em> y en (0, 20).</p>
<h5 class="h5" id="ch02lev3sec03"><strong>Trazar con pyplot</strong></h5>
<p class="noindent">El módulo <span class="literal" translate="no">pylab</span> es útil para crear gráficos en un intérprete de comandos interactivo, como el intérprete de comandos IDLE, como hemos hecho hasta ahora. Sin embargo, cuando se utiliza matplotlib fuera del shell IDLE -por ejemplo, como parte de un programa más amplio-, el módulo <span class="literal" translate="no">pyplot</span> es más eficiente. No te preocupes: todos los métodos que conociste al utilizar <span class="literal" translate="no">pylab</span> funcionarán igual con <span class="literal" translate="no">pyplot</span>.</p>
<p class="indent">El siguiente programa recrea el primer gráfico de este capítulo utilizando el módulo <span class="literal" translate="no">pyplot</span>:</p>
<p class="programs" translate="no">   '''<br translate="no"/>   Simple plot using pyplot<br translate="no"/>   '''<br translate="no"/><br translate="no"/><span class="ent">➊</span> import matplotlib.pyplot<br translate="no"/><br translate="no"/><span class="ent">➋</span> def create_graph():<br translate="no"/>       x_numbers = [1, 2, 3]<br translate="no"/>       y_numbers = [2, 4, 6]<br translate="no"/><br translate="no"/>       matplotlib.pyplot.plot(x_numbers, y_numbers)<br translate="no"/>       matplotlib.pyplot.show()<br translate="no"/><br translate="no"/>   if __name__ == '__main__':<br translate="no"/>       create_graph()</p>
<p class="indent">En primer lugar, importamos el módulo <span class="literal" translate="no">pyplot</span> utilizando la sentencia import matplotlib .pyplot <span class="ent">➊.</span> Esto significa que estamos importando todo el módulo <span class="literal" translate="no">pyplot</span> del paquete matplotlib. Para hacer referencia a cualquier definición de función o clase definida en este módulo, tendrás que utilizar la sintaxis <span class="literal" translate="no">matplotlib.pyplot.<span class="codeitalic">item</span></span>donde <span class="literal" translate="no"><span class="codeitalic">item</span></span> es la función o clase que quieres utilizar.</p>
<p class="indent">Esto es diferente de importar una única función o clase cada vez, que es lo que hemos estado haciendo hasta ahora. Por ejemplo, en el primer capítulo importamos la clase <span class="literal" translate="no">Fraction</span> como <span class="literal" translate="no">from fractions import Fraction</span>. Importar un módulo entero es útil cuando vas a utilizar varias funciones de ese módulo. En lugar de importarlas individualmente, puedes importar todo el módulo de una vez y hacer referencia a las distintas funciones cuando las necesites.</p>
<p class="indent">En la función <span class="literal" translate="no">create_graph()</span> de <span class="ent">➋,</span> creamos las dos listas de números que queremos trazar en el gráfico y luego pasamos las dos listas a la función <span class="literal" translate="no">plot()</span>, del mismo modo que hicimos antes con <span class="literal" translate="no">pylab</span>. Esta vez, sin embargo, llamamos a la función como <span class="literal" translate="no">matplotlib.pyplot.plot()</span>, lo que significa que estamos llamando a la función <span class="literal" translate="no">plot()</span> definida en el módulo <span class="literal" translate="no">pyplot</span> del paquete matplotlib. A continuación, llamamos a la función <span class="literal" translate="no">show()</span> para visualizar el gráfico. La única diferencia <a id="page_45"></a>entre la forma de trazar los números aquí comparada con lo que hicimos antes es el mecanismo de llamada a las funciones.</p>
<p class="indent">Para ahorrarnos algo de tecleo, podemos importar el módulo <span class="literal" translate="no">pyplot</span> introduciendo <span class="literal" translate="no">import matplotlib.pyplot as plt</span>. Entonces, podemos referirnos a <span class="literal" translate="no">pyplot</span> con la etiqueta <span class="literal" translate="no">plt</span> en nuestros programas, en lugar de tener que escribir siempre <span class="literal" translate="no">matplotlib.pyplot</span>:</p>
<p class="programs" translate="no">'''<br translate="no"/>Simple plot using pyplot<br translate="no"/>'''<br translate="no"/>import matplotlib.pyplot as plt<br translate="no"/><br translate="no"/>def create_graph():<br translate="no"/>    x_numbers = [1, 2, 3]<br translate="no"/>    y_numbers = [2, 4, 6]<br translate="no"/>    plt.plot(x_numbers, y_numbers)<br translate="no"/>    plt.show()<br translate="no"/><br translate="no"/>if __name__ == '__main__':<br translate="no"/>    create_graph()</p>
<p class="indent">Ahora podemos llamar a las funciones anteponiéndoles el prefijo <span class="literal" translate="no">plt</span> en lugar de <span class="literal" translate="no">matplotlib.pyplot</span>.</p>
<p class="indent">A partir de ahora, para el resto de este capítulo y de este libro, utilizaremos <span class="literal" translate="no">pylab</span> en el intérprete de comandos interactivo y <span class="literal" translate="no">pyplot</span> en los demás casos.</p>
<h4 class="h4" id="ch02lev2sec06"><strong><em>Guardar los gráficos</em></strong></h4>
<p class="noindent">Si necesitas guardar tus gráficos, puedes hacerlo utilizando la función <span class="literal" translate="no">savefig()</span>. Esta función guarda el gráfico como un archivo de imagen, que puedes utilizar en informes o presentaciones. Puedes elegir entre varios formatos de imagen, como PNG, PDF y SVG.</p>
<p class="indent">Aquí tienes un ejemplo:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">from pylab import plot, savefig</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">x = [1, 2, 3]</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">y = [2, 4, 6]</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">plot(x, y)</span><br translate="no"/>&gt;&gt;&gt; <span class="codestrong">savefig('mygraph.png')</span></p>
<p class="indent">Este programa guardará el gráfico en un archivo de imagen, <em>mygraph.png</em>, en tu directorio actual. En Microsoft Windows, suele ser <em>C:\Python33</em> (donde instalaste Python). En Linux, el directorio actual suele ser tu directorio personal <em>(</em> <em>/home/</em> <em>)</em>, donde <em></em> es el usuario con el que has iniciado sesión. En Mac, IDLE guarda los archivos en <em>~/Documentos</em> por defecto. Si quieres guardarlo en un directorio distinto, especifica la ruta completa. Por ejemplo, para guardar la imagen en <em>C:\Nen</em> Windows como <em>mygraph.png</em>, llamarías a la función <span class="literal" translate="no">savefig()</span> como se indica a continuación:</p>
<p class="programs" translate="no">&gt;&gt;&gt; <span class="codestrong">savefig('C:\mygraph.png')</span></p>
<p class="indent"><a id="page_46"></a>Si abres la imagen en un programa de visualización de imágenes, verás el mismo gráfico que verías llamando a la función <span class="literal" translate="no">show()</span>. (Verás que el archivo de imagen sólo contiene el gráfico, no toda la ventana que aparece con la función <span class="literal" translate="no">show()</span> ). Para especificar un formato de imagen diferente, simplemente nombra el archivo con la extensión adecuada. Por ejemplo, <span class="literal" translate="no">mygraph.svg</span> creará un archivo de imagen SVG.</p>
<p class="indent">Otra forma de guardar una figura es utilizar el botón Guardar de la ventana que aparece cuando llamas a <span class="literal" translate="no">show()</span>.</p>
<footer>
<style>
        footer {
            text-align: center;
            margin-top: 2em;
            padding-top: 1em;
            padding-bottom: 2em;
            border-top: 1px solid #eaeaea;
        }
        
        footer a {
            color: #0000FF; /* Color azul para los enlaces */
            text-decoration: none; /* Opcional: elimina el subrayado de los enlaces */
            margin-left: 1em;
            margin-right: 1em;
        }
        footer a:hover {
            text-decoration: underline; /* Opcional: subraya el enlace al pasar el mouse */
        }
    </style>
<p><a href="ch02_3.html">anterior</a><a href="ch02.html">Subtema 4 de 7: (Ver todo)</a><a href="ch02_5.html">siguiente</a><br/></p>
<br/><a href="ch02_4.docx" target="_blank"></a></footer>
</body>
</html>
