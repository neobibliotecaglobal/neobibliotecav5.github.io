<!DOCTYPE html>

<html lang="es">
<head><meta charset="utf-8"/>
<link href="Styles/Style00.css" rel="stylesheet" type="text/css"/>
<style type="text/css">body{margin:1em;background-color:transparent!important;}#sbo-rt-content *{text-indent:0pt!important;}#sbo-rt-content .bq{margin-right:1em!important;}#sbo-rt-content *{word-wrap:break-word!important;word-break:break-word!important;}#sbo-rt-content table,#sbo-rt-content pre{overflow-x:unset!important;overflow:unset!important;overflow-y:unset!important;white-space:pre-wrap!important;}</style><meta content="width=device-width, initial-scale=1.0" name="viewport"/><style>
    body {
        width: 74%;
        min-height: 84vh;
        font-size: 16px;
        line-height: 1.5;
        margin: 0;
        padding-left: 13%;
        padding-right: 13%;
        padding-top: 3%;
        }
    
    @media screen and (max-width: 768px) {
        body {
            width: 92%;
            padding-left: 4%;
            padding-right: 4%;
            padding-top: 2%;
            font-size: 14px;
        }
    }
    
    @media screen and (max-width: 480px) {
        body {
            width: 96%;
            padding-left: 2%;
            padding-right: 2%;
            padding-top: 1%;
            font-size: 12px;
        }
    }
</style>
</head>
<body>
<h3 id="h2-502703c10-0018">Utilización de json.dumps() y json.loads()</h3>
<p class="BodyFirst">Vamos a escribir un breve programa que almacene un conjunto de números y otro programa que vuelva a leer estos números en la memoria. El primer programa utilizará <code translate="no">json.dumps()</code> para almacenar el conjunto de números, y el segundo programa utilizará <code translate="no">json.loads()</code>.</p>
<p>La función <code translate="no">json.dumps()</code> toma un argumento: un dato que debe convertirse al formato JSON. La función devuelve una cadena, que podemos escribir en un archivo de datos:</p>
<p class="CodeLabel" translate="no"><b>number_writer.py</b></p>
<pre translate="no"><code translate="no">from pathlib import Path
import json

numbers = [2, 3, 5, 7, 11, 13]

<span aria-label="annotation1" class="CodeAnnotationHang">❶</span> path = Path('numbers.json')
<span aria-label="annotation2" class="CodeAnnotationHang">❷</span> contents = json.dumps(numbers)
path.write_text(contents)</code></pre>
<p>Primero importamos el módulo <code translate="no">json</code>, y luego creamos una lista de números con los que trabajar. A continuación, elegimos un nombre de archivo en el que almacenar la lista de números <span aria-label="annotation1" class="CodeAnnotation">❶.</span> Es habitual utilizar la extensión de archivo <em translate="no">.json</em> para indicar que los datos del archivo se almacenan en formato JSON. A continuación, utilizamos la función <code translate="no">json.dumps()</code> <span aria-label="annotation2" class="CodeAnnotation">❷</span> para generar una cadena que contenga la representación JSON de los datos con los que estamos trabajando. Una vez que tenemos esta cadena, la escribimos en el archivo utilizando el mismo método <code translate="no">write_text()</code> que utilizamos antes.</p>
<p>Este programa no tiene salida, pero abramos el archivo <em translate="no">numbers.json</em> y echémosle un vistazo. Los datos se almacenan en un formato parecido al de Python:</p>
<pre translate="no"><code translate="no">[2, 3, 5, 7, 11, 13]</code></pre>
<p><span epub:type="pagebreak" id="Page_202" title="202"></span>Ahora escribiremos un programa independiente que utilice <code translate="no">json.loads()</code> para volver a leer la lista en la memoria:</p>
<p class="CodeLabel" translate="no"><b>number_reader.py</b></p>
<pre translate="no"><code translate="no">from pathlib import Path
import json

<span aria-label="annotation1" class="CodeAnnotationHang">❶</span> path = Path('numbers.json')
<span aria-label="annotation2" class="CodeAnnotationHang">❷</span> contents = path.read_text()
<span aria-label="annotation3" class="CodeAnnotationHang">❸</span> numbers = json.loads(contents)

print(numbers)</code></pre>
<p>Nos aseguramos de leer del mismo archivo que escribimos en <span aria-label="annotation1" class="CodeAnnotation">❶.</span> Como el archivo de datos es sólo un archivo de texto con un formato específico, podemos leerlo con el método <code translate="no">read_text()</code> <span aria-label="annotation2" class="CodeAnnotation">❷.</span> A continuación, pasamos el contenido del archivo a <code translate="no">json.loads()</code> <span aria-label="annotation3" class="CodeAnnotation">❸.</span> Esta función recibe una cadena con formato JSON y devuelve un objeto Python (en este caso, una lista), que asignamos a <code translate="no">numbers</code>. Por último, imprimimos la lista de números recuperada y vemos que es la misma lista creada en <em translate="no">number_writer.py</em>:</p>
<pre translate="no"><code translate="no">[2, 3, 5, 7, 11, 13]</code></pre>
<p>Ésta es una forma sencilla de compartir datos entre dos programas.</p>
<footer>
<style>
        footer {
            text-align: center;
            margin-top: 2em;
            padding-top: 1em;
            padding-bottom: 2em;
            border-top: 1px solid #eaeaea;
        }
        
        footer a {
            color: #0000FF; /* Color azul para los enlaces */
            text-decoration: none; /* Opcional: elimina el subrayado de los enlaces */
            margin-left: 1em;
            margin-right: 1em;
        }
        footer a:hover {
            text-decoration: underline; /* Opcional: subraya el enlace al pasar el mouse */
        }
    </style>
<p><a href="c10_32.html">anterior</a><a href="c10.html">Subtema 33 de 37: (Ver todo)</a><a href="c10_34.html">siguiente</a><br/></p>
<br/><a href="c10_33.docx" target="_blank"></a></footer>
</body>
</html>
