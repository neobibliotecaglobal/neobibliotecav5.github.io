<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:pls="http://www.w3.org/2005/01/pronunciation-lexicon" xmlns:ssml="http://www.w3.org/2001/10/synthesis" xmlns:svg="http://www.w3.org/2000/svg">
<head>
  <meta charset="UTF-8" />
  <title>Chapter 3: Describing Data with Statistics</title>
  <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  <link type="text/css" rel="stylesheet" media="all" href="core.css" />
</head>
<body>
  <div id="sbo-rt-content"><h2 class="h2" id="ch03"><a id="page_61"></a><strong><span class="big">3</span></strong><br/><strong>Describing Data with Statistics</strong></h2>
<div class="image1"><img src="images/common-01.jpg" alt="image" /></div>
<p class="noindent">In this chapter, we’ll use Python to explore statistics so we can study, describe, and better understand sets of data. After looking at some basic statistical measures—the mean, median, mode, and range—we’ll move on to some more advanced measures, such as variance and standard deviation. Then, we’ll see how to calculate the correlation coefficient, which allows you to quantify the relationship between two sets of data. We’ll end the chapter by learning about scatter plots. Along the way, we’ll learn more about the Python language and standard library modules. Let’s get started with one of the most commonly used statistical measures—the mean.</p>
<div class="note">
<p class="notet"><strong><span class="bordera">NOTE</span></strong></p>
<p class="noindent"><em>In statistics, some statistical measures are calculated slightly differently depending on whether you have data for an entire population or just a sample. To keep things simple, we’ll stick with the calculation methods for a population in this chapter.</em></p>
</div>
<h3 class="h3" id="ch03lev1sec01"><a id="page_62"></a><strong>Finding the Mean</strong></h3>
<p class="noindent">The <em>mean</em> is a common and intuitive way to summarize a set of numbers. It’s what we might simply call the “average” in everyday use, although as we’ll see, there are other kinds of averages as well. Let’s take a sample set of numbers and calculate the mean.</p>
<p class="indent">Say there’s a school charity that’s been taking donations over a period of time spanning the last 12 days (we’ll refer to this as period A). In that time, the following 12 numbers represent the total dollar amount of donations received for each day: 100, 60, 70, 900, 100, 200, 500, 500, 503, 600, 1000, and 1200. We can calculate the mean by summing these totals and then dividing the sum by the number of days. In this case, the sum of the numbers is 5733. If we divide this number by 12 (the number of days), we get 477.75, which is the <em>mean</em> donation per day. This number gives us a general idea of how much money was donated on any given day.</p>
<p class="indent">In a moment, we’ll write a program that calculates and prints the mean for a collection of numbers. As we just saw, to calculate the mean, we’ll need to take the sum of the list of numbers and divide it by the number of items in the list. Let’s look at two Python functions that make both of these operations very easy: <span class="literal">sum()</span> and <span class="literal">len()</span>.</p>
<p class="indent">When you use the <span class="literal">sum()</span> function on a list of numbers, it adds up all the numbers in the list and returns the result:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">shortlist = [1, 2, 3]</span><br/>&gt;&gt;&gt; <span class="codestrong">sum(shortlist)</span><br/>6</p>
<p class="indent">We can use the <span class="literal">len()</span> function to give us the length of a list:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">len(shortlist)</span><br/>3</p>
<p class="indent">When we use the <span class="literal">len()</span> function on the list, it returns <span class="literal">3</span> because there are three items in <span class="literal">shortlist</span>. Now we’re ready to write a program that will calculate the mean of the list of donations.</p>
<p class="programs">   '''<br/>   Calculating the mean<br/>   '''<br/><br/>   def calculate_mean(numbers):<br/><span class="ent">➊</span>     s = sum(numbers)<br/><span class="ent">➋</span>     N = len(numbers)<br/>       # Calculate the mean<br/><span class="ent">➌</span>     mean = s/N<br/><br/>       return mean<br/><a id="page_63"></a><br/>   if __name__ == '__main__':<br/><span class="ent">➍</span>     donations = [100, 60, 70, 900, 100, 200, 500, 500, 503, 600, 1000, 1200]<br/><span class="ent">➎</span>     mean = calculate_mean(donations)<br/>       N = len(donations)<br/><span class="ent">➏</span>     print('Mean donation over the last {0} days is {1}'.format(N, mean))</p>
<p class="indent">First, we define a function, <span class="literal">calculate_mean()</span>, that accepts the argument <span class="literal">numbers</span>, which is a list of numbers. At <span class="ent">➊</span>, we use the <span class="literal">sum()</span> function to add up the numbers in the list and create a label, <span class="literal">s</span>, to refer to the total. Similarly, at <span class="ent">➋</span>, we use the <span class="literal">len()</span> function to get the length of the list and create a label, <span class="literal">N</span>, to refer to it. Then, as you can see at <span class="ent">➌</span>, we calculate the mean by simply dividing the sum (<span class="literal">s</span>) by the number of members (<span class="literal">N</span>). At <span class="ent">➍</span>, we create a list, <span class="literal">donations</span>, with the values of the donations listed earlier. We then call the <span class="literal">calculate_mean()</span> function, passing this list as an argument at <span class="ent">➎</span>. Finally, we print the mean that was calculated at <span class="ent">➏</span>.</p>
<p class="indent">When you run the program, you should see the following:</p>
<p class="programs">Mean donation over the last 12 days is 477.75</p>
<p class="indent">The <span class="literal">calculate_mean()</span> function will calculate the sum and length of <em>any</em> list, so we can reuse it to calculate the mean for other sets of numbers, too.</p>
<p class="indent">We calculated that the mean donation per day was 477.75. It’s worth noting that the donations during the first few days were much lower than the mean donation we calculated and that the donations during the last couple of days were much higher. The mean gives us one way to summarize the data, but it doesn’t give us a full picture. There are other statistical measurements, however, that can tell us more about the data when compared with the mean.</p>
<h3 class="h3" id="ch03lev1sec02"><strong>Finding the Median</strong></h3>
<p class="noindent">The <em>median</em> of a collection of numbers is another kind of average. To find the median, we sort the numbers in ascending order. If the length of the list of numbers is odd, the number in the middle of the list is the median. If the length of the list of numbers is even, we get the median by taking the mean of the two middle numbers. Let’s find the median of the previous list of donations: 100, 60, 70, 900, 100, 200, 500, 500, 503, 600, 1000, and 1200.</p>
<p class="indent">After sorting from smallest to largest, the list of numbers becomes 60, 70, 100, 100, 200, 500, 500, 503, 600, 900, 1000, and 1200. We have an even number of items in the list (12), so to get the median, we need to take the mean of the two middle numbers. In this case, the middle numbers are the sixth and the seventh numbers—500 and 500—and the mean of these two numbers is (500 + 500)/2, which comes out to 500. That means the median is 500.</p>
<p class="indent">Now assume—just for this example—that we have another donation total for the 13th day so that the list now looks like this: 100, 60, 70, 900, 100, 200, 500, 500, 503, 600, 1000, 1200, and 800.</p>
<p class="indent"><a id="page_64"></a>Once again, we have to sort the list, which becomes 60, 70, 100, 100, 200, 500, 500, 503, 600, 800, 900, 1000, and 1200. There are 13 numbers in this list (an odd number), so the median for this list is simply the middle number. In this case, that’s the seventh number, which is 500.</p>
<p class="indent">Before we write a program to find the median of a list of numbers, let’s think about how we could automatically calculate the middle elements of a list in either case. If the length of a list (<em>N</em>) is odd, the middle number is the one in position (<em>N</em> + 1)/2. If <em>N</em> is even, the two middle elements are <em>N</em>/2 and (<em>N</em>/2) + 1. For our first example in this section, <em>N</em> = 12, so the two middle elements were the 12/2 (sixth) and 12/2 + 1 (seventh) elements. In the second example, <em>N</em> = 13, so the seventh element, (<em>N</em> + 1)/2, was the middle element.</p>
<p class="indent">In order to write a function that calculates the median, we’ll also need to sort a list in ascending order. Luckily, the <span class="literal">sort()</span> method does just that:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">samplelist = [4, 1, 3]</span><br/>&gt;&gt;&gt; <span class="codestrong">samplelist.sort()</span><br/>&gt;&gt;&gt; <span class="codestrong">samplelist</span><br/>[1, 3, 4]</p>
<p class="indent">Now we can write our next program, which finds the median of a list of numbers:</p>
<p class="programs">   '''<br/>   Calculating the median<br/>   '''<br/><br/>   def calculate_median(numbers):<br/><span class="ent">➊</span>     N = len(numbers)<br/><span class="ent">➋</span>     numbers.sort()<br/><br/>       # Find the median<br/>       if N % 2 == 0:<br/>           # if N is even<br/>           m1 = N/2<br/>           m2 = (N/2) + 1<br/>           # Convert to integer, match position<br/><span class="ent">➌</span>         m1 = int(m1) - 1<br/><span class="ent">➍</span>         m2 = int(m2) - 1<br/><span class="ent">➎</span>         median = (numbers[m1] + numbers[m2])/2<br/>       else:<br/><span class="ent">➏</span>         m = (N+1)/2<br/>           # Convert to integer, match position<br/>           m = int(m) - 1<br/>           median = numbers[m]<br/><br/>       return median<br/><br/>   if __name__ == '__main__':<br/>       donations = [100, 60, 70, 900, 100, 200, 500, 500, 503, 600, 1000, 1200]<br/><a id="page_65"></a><br/>       median = calculate_median(donations)<br/>       N = len(donations)<br/>       print('Median donation over the last {0} days is {1}'.format(N, median))</p>
<p class="indent">The overall structure of the program is similar to that of the earlier program that calculates the mean. The <span class="literal">calculate_median()</span> function accepts a list of numbers and returns the median. At <span class="ent">➊</span>, we calculate the length of the list and create a label, <span class="literal">N</span>, to refer to it. Next, at <span class="ent">➋</span>, we sort the list using the <span class="literal">sort()</span> method.</p>
<p class="indent">Then, we check to see whether <span class="literal">N</span> is even. If so, we find the middle elements, <span class="literal">m1</span> and <span class="literal">m2</span>, which are the numbers at positions <span class="literal">N/2</span> and <span class="literal">(N/2) + 1</span> in the sorted list. The next two statements (<span class="ent">➌</span> and <span class="ent">➍</span>) adjust <span class="literal">m1</span> and <span class="literal">m2</span> in two ways. First, we use the <span class="literal">int()</span> function to convert <span class="literal">m1</span> and <span class="literal">m2</span> into integer form. This is because results of the division operator are always returned as floating point numbers, even when the result is equivalent to an integer. For example:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">6/2</span><br/>3.0</p>
<p class="indent">We cannot use a floating point number as an index in a list, so we use <span class="literal">int()</span> to convert that result to an integer. We also subtract 1 from both <span class="literal">m1</span> and <span class="literal">m2</span> because positions in a list begin with 0 in Python. This means that to get the sixth and seventh numbers from the list, we have to ask for the numbers at index 5 and index 6. At <span class="ent">➎</span>, we calculate the median by taking the mean of the two numbers in the middle positions.</p>
<p class="indent">Starting at <span class="ent">➏</span>, the program finds the median if there’s an odd number of items in the list, once again using <span class="literal">int()</span> and subtracting 1 to find the proper index. Finally, the program calculates the median for the list of donations and returns it. When you execute the program, it calculates that the median is 500:</p>
<p class="programs">Median donation over the last 12 days is 500.0</p>
<p class="indent">As you can see, the mean (477.75) and the median (500) are pretty close in this particular list, but the median is a little higher.</p>
<h3 class="h3" id="ch03lev1sec03"><strong>Finding the Mode and Creating a Frequency Table</strong></h3>
<p class="noindent">Instead of finding the mean value or the median value of a set of numbers, what if you wanted to find the number that occurs most frequently? This number is called the <em>mode</em>. For example, consider the test scores of a math test (out of 10 points) in a class of 20 students: 7, 8, 9, 2, 10, 9, 9, 9, 9, 4, 5, 6, 1, 5, 6, 7, 8, 6, 1, and 10. The mode of this list would tell you which score was the most common in the class. From the list, you can see that the score of 9 occurs most frequently, so 9 is the mode for this list of numbers. There’s no symbolic formula for calculating the mode—you simply count how many times each unique number occurs and find the one that occurs the most.</p>
<p class="indent"><a id="page_66"></a>To write a program to calculate the mode, we’ll need to have Python count how many times each number occurs within a list and print the one that occurs most frequently. The <span class="literal">Counter</span> class from the <span class="literal">collections</span> module, which is part of the standard library, makes this really simple for us.</p>
<h4 class="h4" id="ch03lev2sec01"><strong><em>Finding the Most Common Elements</em></strong></h4>
<p class="noindent">Finding the most common number in a data set can be thought of as a subproblem of finding an arbitrary number of most common numbers. For instance, instead of the most common score, what if you wanted to know the five most common scores? The <span class="literal">most_common()</span> method of the <span class="literal">Counter</span> class allows us to answer such questions easily. Let’s see an example:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">simplelist = [4, 2, 1, 3, 4]</span><br/>&gt;&gt;&gt; <span class="codestrong">from collections import Counter</span><br/>&gt;&gt;&gt; <span class="codestrong">c = Counter(simplelist)</span><br/>&gt;&gt;&gt; <span class="codestrong">c.most_common()</span><br/>[(4, 2), (1, 1), (2, 1), (3, 1)]</p>
<p class="indent">Here, we start off with a list of five numbers and import <span class="literal">Counter</span> from the collections module. Then, we create a <span class="literal">Counter</span> object, using <span class="literal">c</span> to refer to the object. We then call the <span class="literal">most_common()</span> method, which returns a list ordered by the most common elements.</p>
<p class="indent">Each member of the list is a tuple. The first element of the first tuple is the number that occurs most frequently, and the second element is the number of times it occurs. The second, third, and fourth tuples contain the other numbers along with the count of the number of times they appear. This result tells us that 4 occurs the most (twice), while the others appear only once. Note that numbers that occur an equal number of times are returned by the <span class="literal">most_common()</span> method in an arbitrary order.</p>
<p class="indent">When you call the <span class="literal">most_common()</span> method, you can also provide an argument telling it the number of most common elements you want it to return. For example, if we just wanted to find the most common element, we would call it with the argument <span class="literal">1</span>:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">c.most_common(1)</span><br/>[(4, 2)]</p>
<p class="indent">If you call the method again with <span class="literal">2</span> as an argument, you’ll see this:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">c.most_common(2)</span><br/>[(4, 2), (1, 1)]</p>
<p class="indent">Now the result returned by the <span class="literal">most_common</span> method is a list with two tuples. The first is the most common element, followed by the second most common. Of course, in this case, there are several elements tied for most common, so the fact that the function returns 1 here (and not 2 or 3) is arbitrary, as noted earlier.</p>
<p class="indent"><a id="page_67"></a>The <span class="literal">most_common()</span> method returns both the numbers and the number of times they occur. What if we want only the numbers and we don’t care about the number of times they occur? Here’s how we can retrieve that information:</p>
<p class="programs"><span class="ent">➊</span> &gt;&gt;&gt; <span class="codestrong">mode = c.most_common(1)</span><br/>   &gt;&gt;&gt; <span class="codestrong">mode</span><br/>   [(4, 2)]<br/><span class="ent">➋</span> &gt;&gt;&gt; <span class="codestrong">mode[0]</span><br/>   (4, 2)<br/><span class="ent">➌</span> &gt;&gt;&gt; <span class="codestrong">mode[0][0]</span><br/>   4</p>
<p class="indent">At <span class="ent">➊</span>, we use the label <span class="literal">mode</span> to refer to the result returned by the <span class="literal">most_common()</span> method. We retrieve the first (and the only) element of this list with <span class="literal">mode[0]</span> <span class="ent">➋</span>, which gives us a tuple. Because we just want the first element of the tuple, we can retrieve that using <span class="literal">mode[0][0]</span> <span class="ent">➌</span>. This returns 4— the most common element, or the mode.</p>
<p class="indent">Now that we know how the <span class="literal">most_common()</span> method works, we’ll apply it to solve the next two problems.</p>
<h4 class="h4" id="ch03lev2sec02"><strong><em>Finding the Mode</em></strong></h4>
<p class="noindent">We’re ready to write a program that finds the mode for a list of numbers:</p>
<p class="programs">   '''<br/>   Calculating the mode<br/>   '''<br/><br/>   from collections import Counter<br/><br/>   def calculate_mode(numbers):<br/><span class="ent">➊</span>     c = Counter(numbers)<br/><span class="ent">➋</span>     mode = c.most_common(1)<br/><span class="ent">➌</span>     return mode[0][0]<br/><br/>   if __name__=='__main__':<br/>       scores = [7,8,9,2,10,9,9,9,9,4,5,6,1,5,6,7,8,6,1,10]<br/>       mode = calculate_mode(scores)<br/><br/>       print('The mode of the list of numbers is: {0}'.format(mode))</p>
<p class="indent">The <span class="literal">calculate_mode()</span> function finds and returns the mode of the numbers passed to it as a parameter. To calculate the mode, we first import the class <span class="literal">Counter</span> from the <span class="literal">collections</span> module and use it to create a <span class="literal">Counter</span> object at <span class="ent">➊</span>. Then, at <span class="ent">➋</span>, we use the <span class="literal">most_common()</span> method, which, as we saw earlier, gives us a list that contains a tuple with the most common number and the number of times it occurs. We assign that list the label <span class="literal">mode</span>. Finally, we use <span class="literal">mode[0][0]</span> <span class="ent">➌</span> to access the number we want: the most frequent number from the list, which is the mode.</p>
<p class="indent"><a id="page_68"></a>The rest of the program applies the <span class="literal">calculate_mode</span> function to the list of test scores we saw earlier. When you run the program, you should see the following output:</p>
<p class="programs">The mode of the list of numbers is: 9</p>
<p class="indent">What if you have a set of data where two or more numbers occur the same maximum number of times? For example, in the list of numbers 5, 5, 5, 4, 4, 4, 9, 1, and 3, both 4 and 5 are present three times. In such cases, the list of numbers is said to have multiple modes, and our program should find and print all the modes. The modified program follows:</p>
<p class="programs">   '''<br/>   Calculating the mode when the list of numbers may<br/>   have multiple modes<br/>   '''<br/><br/><br/>   from collections import Counter<br/><br/><br/>   def calculate_mode(numbers):<br/><br/>       c = Counter(numbers)<br/><span class="ent">➊</span>     numbers_freq = c.most_common()<br/><span class="ent">➋</span>     max_count = numbers_freq[0][1]<br/><br/>       modes = []<br/>       for num in numbers_freq:<br/><span class="ent">➌</span>         if num[1] == max_count:<br/>               modes.append(num[0])<br/>       return modes<br/><br/>   if __name__ == '__main__':<br/>       scores = [5, 5, 5, 4, 4, 4, 9, 1, 3]<br/>       modes = calculate_mode(scores)<br/>       print('The mode(s) of the list of numbers are:')<br/><span class="ent">➍</span>     for mode in modes:<br/>           print(mode)</p>
<p class="indent">At <span class="ent">➊</span>, instead of finding only the most common element, we retrieve all the numbers and the number of times each appears. Next, at <span class="ent">➋</span>, we find the value of the maximum count—that is, the maximum number of times any number occurs. Then, for each of the numbers, we check whether the number of times it appears is equal to the maximum count <span class="ent">➌</span>. Each number that fulfills this condition is a mode, and we add it to the list <span class="literal">modes</span> and return the list.</p>
<p class="indent">At <span class="ent">➍</span>, we iterate over the list returned from the <span class="literal">calculate_mode()</span> function and print each of the numbers.</p>
<p class="indent"><a id="page_69"></a>When you execute the preceding program, you should see the following output:</p>
<p class="programs">The mode(s) of the list of numbers are:<br/>4<br/>5</p>
<p class="indent">What if you wanted to find the number of times every number occurs instead of just the mode? A <em>frequency table</em>, as the name indicates, is a table that shows how many times each number occurs within a collection of numbers.</p>
<h4 class="h4" id="ch03lev2sec03"><strong><em>Creating a Frequency Table</em></strong></h4>
<p class="noindent">Let’s consider the list of test scores again: 7, 8, 9, 2, 10, 9, 9, 9, 9, 4, 5, 6, 1, 5, 6, 7, 8, 6, 1, and 10. The frequency table for this list is shown in <a href="ch03.html#ch3tab1">Table 3-1</a>. For each number, we list the number of times it occurs in the second column.</p>
<p class="tablet"><a id="ch3tab1"></a><strong>Table 3-1:</strong> Frequency Table</p>
<table border="0" cellpadding="0" cellspacing="0" class="topbot" width="30%">
<thead>
<tr>
<td valign="top" class="table_th"><p class="table"><strong>Score</strong></p></td>
<td valign="top" class="table_th"><p class="table"><strong>Frequency</strong></p></td>
</tr>
</thead>
<tbody>
<tr>
<td valign="top" class="table"><p class="table">1</p></td>
<td valign="top" class="table"><p class="table">2</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">2</p></td>
<td valign="top" class="table"><p class="table">1</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">4</p></td>
<td valign="top" class="table"><p class="table">1</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">5</p></td>
<td valign="top" class="table"><p class="table">2</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">6</p></td>
<td valign="top" class="table"><p class="table">3</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">7</p></td>
<td valign="top" class="table"><p class="table">2</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">8</p></td>
<td valign="top" class="table"><p class="table">2</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">9</p></td>
<td valign="top" class="table"><p class="table">5</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">10</p></td>
<td valign="top" class="table"><p class="table">2</p></td>
</tr>
</tbody>
</table>
<p class="indent">Note that the sum of the individual frequencies in the second column adds up to the total number of scores (in this case, 20).</p>
<p class="indent">We’ll use the <span class="literal">most_common()</span> method once again to print the frequency table for a given set of numbers. Recall that when we don’t supply an argument to the <span class="literal">most_common()</span> method, it returns a list of tuples with all the numbers and the number of times they appear. We can simply print each number and its frequency from this list to display a frequency table.</p>
<p class="indent">Here’s the program:</p>
<p class="programs">   '''<br/>   Frequency table for a list of numbers<br/>   '''<br/><br/>   from collections import Counter<br/><a id="page_70"></a><br/>   def frequency_table(numbers):<br/><span class="ent">➊</span>     table = Counter(numbers)<br/>       print('Number\tFrequency')<br/><span class="ent">➋</span>     for number in table.most_common():<br/>           print('{0}\t{1}'.format(number[0], number[1]))<br/><br/>   if __name__=='__main__':<br/>       scores = [7,8,9,2,10,9,9,9,9,4,5,6,1,5,6,7,8,6,1,10]<br/>       frequency_table(scores)</p>
<p class="indent">The function <span class="literal">frequency_table()</span> prints the frequency table of the list of numbers passed to it. At <span class="ent">➊</span>, we first create a <span class="literal">Counter</span> object and create the label <span class="literal">table</span> to refer to it. Next, using a <span class="literal">for</span> loop <span class="ent">➋</span>, we go through each of the tuples, printing the first member (the number itself) and the second member (the frequency of the corresponding number). We use <span class="literal">\t</span> to print a tab between each value to space the table. When you run the program, you’ll see the following output:</p>
<p class="programs">Number  Frequency<br/>9       5<br/>6       3<br/>1       2<br/>5       2<br/>7       2<br/>8       2<br/>10      2<br/>2       1<br/>4       1</p>
<p class="indent">Here, you can see that the numbers are listed in decreasing order of frequency because the <span class="literal">most_common()</span> function returns the numbers in this order. If, instead, you want your program to print the frequency table sorted by value from lowest to highest, as shown in <a href="ch03.html#ch3tab1">Table 3-1</a>, you’ll have to re-sort the list of tuples.</p>
<p class="indent">The <span class="literal">sort()</span> method is all we need to modify our earlier frequency table program:</p>
<p class="programs">   '''<br/>   Frequency table for a list of numbers<br/>   Enhanced to display the table sorted by the numbers<br/>   '''<br/><br/>   from collections import Counter<br/><br/>   def frequency_table(numbers):<br/>       table = Counter(numbers)<br/><span class="ent">➊</span>     numbers_freq = table.most_common()<br/><span class="ent">➋</span>     numbers_freq.sort()<br/><br/>       print('Number\tFrequency')<br/><span class="ent">➌</span>     for number in numbers_freq:<br/>           print('{0}\t{1}'.format(number[0], number[1]))<br/><br/>   if __name__ == '__main__':<br/>       scores = [7,8,9,2,10,9,9,9,9,4,5,6,1,5,6,7,8,6,1,10]<br/>       frequency_table(scores)</p>
<p class="indent"><a id="page_71"></a>Here, we store the list returned by the <span class="literal">most_common()</span> method in <span class="literal">numbers_freq</span> at <span class="ent">➊</span>, and then we sort it by calling the <span class="literal">sort()</span> method <span class="ent">➋</span>. Finally, we use the <span class="literal">for</span> loop to go over the sorted tuples and print each number and its frequency <span class="ent">➌</span>. Now when you run the program, you’ll see the following table, which is identical to <a href="ch03.html#ch3tab1">Table 3-1</a>:</p>
<p class="programs">Number  Frequency<br/>1       2<br/>2       1<br/>4       1<br/>5       2<br/>6       3<br/>7       2<br/>8       2<br/>9       5<br/>10      2</p>
<p class="indent">In this section, we’ve covered mean, median, and mode, which are three common measures for describing a list of numbers. Each of these can be useful, but they can also hide other aspects of the data when considered in isolation. Next, we’ll look at other, more advanced statistical measures that can help us draw more conclusions about a collection of numbers.</p>
<h3 class="h3" id="ch03lev1sec04"><strong>Measuring the Dispersion</strong></h3>
<p class="noindent">The next statistical calculations we’ll look at measure the <em>dispersion</em>, which tells us how far away the numbers in a set of data are from the mean of the data set. We’ll learn to calculate three different measurements of dispersion: range, variance, and standard deviation.</p>
<h4 class="h4" id="ch03lev2sec04"><strong><em>Finding the Range of a Set of Numbers</em></strong></h4>
<p class="noindent">Once again, consider the list of donations during period A: 100, 60, 70, 900, 100, 200, 500, 500, 503, 600, 1000, and 1200. We found that the mean donation per day is 477.75. But just looking at the mean, we have no idea whether all the donations fell into a narrow range—say between 400 and 500—or whether they varied much more than that—say between 60 and 1200, as in this case. For a list of numbers, the <em>range</em> is the difference between the highest number and the lowest number. You could have two groups of numbers with the exact same mean but with vastly different ranges, so knowing the range fills in more information about a set of numbers beyond what we can learn from just looking at the mean, median, and mode.</p>
<p class="indent"><a id="page_72"></a>The next program finds the range of the preceding list of donations:</p>
<p class="programs">   '''<br/>   Find the range<br/>   '''<br/><br/>   def find_range(numbers):<br/><br/><span class="ent">➊</span>     lowest = min(numbers)<br/><span class="ent">➋</span>     highest = max(numbers)<br/>       # Find the range<br/>       r = highest-lowest<br/><br/><span class="ent">➌</span>     return lowest, highest, r<br/><br/>   if __name__ == '__main__':<br/>       donations = [100, 60, 70, 900, 100, 200, 500, 500, 503, 600, 1000, 1200]<br/><span class="ent">➍</span>     lowest, highest, r = find_range(donations)<br/>       print('Lowest: {0} Highest: {1} Range: {2}'.format(lowest, highest, r))</p>
<p class="indent">The function <span class="literal">find_range()</span> accepts a list as a parameter and finds the range. First, it calculates the lowest and the highest numbers using the <span class="literal">min()</span> and the <span class="literal">max()</span> functions at <span class="ent">➊</span> and <span class="ent">➋</span>. As the function names indicate, they find the minimum and the maximum values in a list of numbers.</p>
<p class="indent">We then calculate the range by taking the difference between the highest and the lowest numbers, using the label <span class="literal">r</span> to refer to this difference. At <span class="ent">➌</span>, we return all three numbers—the lowest number, the highest number, and the range. This is the first time in the book that we’re returning multiple values from a function—instead of just returning one value, this function returns three. At <span class="ent">➍</span>, we use three labels to <em>receive</em> the three values being returned from the <span class="literal">find_range()</span> function. Finally, we print the values. When you run the program, you should see the following output:</p>
<p class="programs">Lowest: 60 Highest: 1200 Range: 1140</p>
<p class="indent">This tells us that the days’ total donations were fairly spread out, with a range of 1140, because we had daily totals as small as 60 and as large as 1200.</p>
<h4 class="h4" id="ch03lev2sec05"><strong><em>Finding the Variance and Standard Deviation</em></strong></h4>
<p class="noindent">The range tells us the difference between the two extremes in a set of numbers, but what if we want to know more about how all of the individual numbers vary from the mean? Were they all similar, clustered near the mean, or were they all different, closer to the extremes? There are two related measures of dispersion that tell us more about a list of numbers along these lines: the <em>variance</em> and the <em>standard deviation</em>. To calculate either of these, we first need to find the difference of each of the numbers from the mean. The variance is the average of the squares of those differences. <a id="page_73"></a>A high variance means that values are far from the mean; a low variance means that the values are clustered close to the mean. We calculate the variance using the formula</p>
<div class="image2"><img src="images/e0073-01.jpg" alt="image" /></div>
<p class="indent">In the formula, <em>x<sub>i</sub></em> stands for individual numbers (in this case, daily total donations), <em>x</em><sub>mean</sub> stands for the mean of these numbers (the mean daily donation), and <em>n</em> is the number of values in the list (the number of days on which donations were received). For each value in the list, we take the difference between that number and the mean and square it. Then, we add all those squared differences together and, finally, divide the whole sum by <em>n</em> to find the variance.</p>
<p class="indent">If we want to calculate the standard deviation as well, all we have to do is take the square root of the variance. Values that are within one standard deviation of the mean can be thought of as fairly typical, whereas values that are three or more standard deviations away from the mean can be considered much more atypical—we call such values <em>outliers</em>.</p>
<p class="indent">Why do we have these two measures of dispersion—variance and standard deviation? In short, the two measures are useful in different situations. Going back to the formula we used to calculate the variance, you can see that the variance is expressed in square units because it’s the average of the squared difference from the mean. For some mathematical formulas, it’s nicer to work with those square units instead of taking the square root to find the standard deviation. On the other hand, the standard deviation is expressed in the same units as the population data. For example, if you calculate the variance for our list of donations (as we will in a moment), the result is expressed in dollars squared, which doesn’t make a lot of sense. Meanwhile, the standard deviation is simply expressed in dollars, the same unit as each of the donations.</p>
<p class="indent">The following program finds the variance and standard deviation for a list of numbers:</p>
<p class="programs">   '''<br/>   Find the variance and standard deviation of a list of numbers<br/>   '''<br/><br/>   def calculate_mean(numbers):<br/>       s = sum(numbers)<br/>       N = len(numbers)<br/>       # Calculate the mean<br/>       mean = s/N<br/><br/>       return mean<br/><br/>   def find_differences(numbers):<br/>       # Find the mean<br/>       mean = calculate_mean(numbers)<br/>       # Find the differences from the mean<br/>       diff = []<br/>       for num in numbers:<br/>           diff.append(num-mean)<br/><br/>       return diff<br/><br/>   def calculate_variance(numbers):<br/><br/>       # Find the list of differences<br/><span class="ent">➊</span>     diff = find_differences(numbers)<br/>       # Find the squared differences<br/>       squared_diff = []<br/><span class="ent">➋</span>     for d in diff:<br/>           squared_diff.append(d**2)<br/>       # Find the variance<br/>       sum_squared_diff = sum(squared_diff)<br/><span class="ent">➌</span>     variance = sum_squared_diff/len(numbers)<br/>       return variance<br/><br/>   if __name__ == '__main__':<br/>       donations = [100, 60, 70, 900, 100, 200, 500, 500, 503, 600, 1000, 1200]<br/>       variance = calculate_variance(donations)<br/>       print('The variance of the list of numbers is {0}'.format(variance))<br/><br/><span class="ent">➍</span>     std = variance**0.5<br/>       print('The standard deviation of the list of numbers is {0}'.format(std))</p>
<p class="indent">The function <span class="literal">calculate_variance()</span> calculates the variance of the list of numbers passed to it. First, it calls the <span class="literal">find_differences()</span> function at <span class="ent">➊</span> to calculate the difference of each of the numbers from the mean. The <span class="literal">find_differences()</span> function returns the difference of each donation from the mean value as a list. In this function, we use the <span class="literal">calculate_mean()</span> function we wrote earlier to find the mean donation. Then, starting at <span class="ent">➋</span>, the squares of these differences are calculated and saved in a list labeled <span class="literal">squared_diff</span>. Next, we use the <span class="literal">sum()</span> function to find the sum of the squared differences and, finally, calculate the variance at <span class="ent">➌</span>. At <span class="ent">➍</span>, we calculate the standard deviation by taking the square root of the variance.</p>
<p class="indent">When you run the preceding program, you should see the following output:</p>
<p class="programs">The variance of the list of numbers is 141047.35416666666<br/>The standard deviation of the list of numbers is 375.5627166887931</p>
<p class="indent">The variance and the standard deviation are both very large, meaning that the individual daily total donations vary greatly from the mean. Now, let’s compare the variance and the standard deviation for a different set of donations that have the same mean: 382, 389, 377, 397, 396, 368, 369, 392, 398, 367, 393, and 396. In this case, the variance and the standard deviation turn out to be 135.38888888888889 and 11.63567311713804, respectively. Lower values for variance and standard deviation tell us that the individual numbers are closer to the mean. <a href="ch03.html#ch3fig1">Figure 3-1</a> illustrates this point visually.</p>
<div class="image"><a id="page_75"></a><img src="images/f03-01.jpg" alt="image" /></div>
<p class="figuret"><a id="ch3fig1"></a><em>Figure 3-1: Variation of the donations around the average donation</em></p>
<p class="indent">The mean donations for both lists of donations are similar, so the two lines overlap, appearing as a single line in the figure. However, the donations from the first list vary widely from the mean, whereas the donations from the second list are very close to the mean, which confirms what we inferred from the lower variance value.</p>
<h3 class="h3" id="ch03lev1sec05"><strong>Calculating the Correlation Between Two Data Sets</strong></h3>
<p class="noindent">In this section, we’ll learn how to calculate a statistical measure that tells us the nature and strength of the relationship between two sets of numbers: the <em>Pearson correlation coefficient</em>, which I’ll call simply the <em>correlation coefficient</em>. Note that this coefficient measures the strength of the <em>linear</em> relationship. We’d have to use other measures (which we won’t be discussing here) to find out the coefficient when two sets have a nonlinear relationship. The coefficient can be either positive or negative, and its magnitude can range between –1 and 1 (inclusive).</p>
<p class="indent">A correlation coefficient of 0 indicates that there’s no linear correlation between the two quantities. (Note that this doesn’t mean the two quantities are independent of each other. There could still be a nonlinear relationship between them, for example). A coefficient of 1 or close to 1 indicates that there’s a strong positive linear correlation; a coefficient of exactly 1 is referred <a id="page_76"></a>to as perfect positive correlation. Similarly, a correlation coefficient of –1 or close to –1 indicates a strong negative correlation, where 1 indicates a perfect negative correlation.</p>
<div class="sidebar">
<p class="sidebart"><strong>CORRELATION AND CAUSATION</strong></p>
<p class="noindent">In statistics, you’ll often come across the statement “correlation doesn’t imply causation.” This is a reminder that even if two sets of observations are strongly correlated with each other, that doesn’t mean one variable <em>causes</em> the other. When two variables are strongly correlated, sometimes there’s a third factor that influences both variables and explains the correlation. A classic example is the correlation between ice cream sales and crime rates—if you track both of these variables in a typical city, you’re likely to find a correlation, but this doesn’t mean that ice cream sales cause crime (or vice versa). Ice cream sales and crime are correlated because they both go up as the weather gets hotter during the summer. Of course, this doesn’t mean that hot weather directly causes crime to go up either; there are more complicated causes behind that correlation as well.</p>
</div>
<h4 class="h4" id="ch03lev2sec06"><strong><em>Calculating the Correlation Coefficient</em></strong></h4>
<p class="noindent">The correlation coefficient is calculated using the formula</p>
<div class="image2"><img src="images/e0076-01.jpg" alt="image" /></div>
<p class="indent">In the above formula, <em>n</em> is the total number of values present in each set of numbers (the sets have to be of equal length). The two sets of numbers are denoted by <em>x</em> and <em>y</em> (it doesn’t matter which one you denote as which). The other terms are described as follows:</p>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td valign="top" class="table"><p class="table">Σ<em>xy</em></p></td>
<td valign="top" class="table"><p class="table">Sum of the products of the individual elements of the two sets of numbers, <em>x</em> and <em>y</em></p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">Σ<em>x</em></p></td>
<td valign="top" class="table"><p class="table">Sum of the numbers in set <em>x</em></p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">Σ<em>y</em></p></td>
<td valign="top" class="table"><p class="table">Sum of the numbers in set <em>y</em></p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">(Σ<em>x</em>)<sup>2</sup></p></td>
<td valign="top" class="table"><p class="table">Square of the sum of the numbers in set <em>x</em></p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">(Σ<em>y</em>)<sup>2</sup></p></td>
<td valign="top" class="table"><p class="table">Square of the sum of the numbers in set <em>y</em></p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">Σ<em>x</em><sup>2</sup></p></td>
<td valign="top" class="table"><p class="table">Sum of the squares of the numbers in set <em>x</em></p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">Σ<em>y</em><sup>2</sup></p></td>
<td valign="top" class="table"><p class="table">Sum of the squares of the numbers in set <em>y</em></p></td>
</tr>
</tbody>
</table>
<p class="indent"><a id="page_77"></a>Once we’ve calculated these terms, you can combine them according to the preceding formula to find the correlation coefficient. For small lists, it’s possible to do this by hand without too much effort, but it certainly gets complicated as the size of each set of numbers increases.</p>
<p class="indent">In a moment, we’ll write a program that calculates the correlation coefficient for us. In this program, we’ll use the <span class="literal">zip()</span> function, which will help us calculate the sum of products from the two sets of numbers. Here’s an example of how the <span class="literal">zip()</span> function works:</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">simple_list1 = [1, 2, 3]</span><br/>&gt;&gt;&gt; <span class="codestrong">simple_list2 = [4, 5, 6]</span><br/>&gt;&gt;&gt; <span class="codestrong">for x, y in zip(simple_list1, simple_list2):</span><br/>        <span class="codestrong">print(x, y)</span><br/><br/>1 4<br/>2 5<br/>3 6</p>
<p class="indent">The <span class="literal">zip()</span> function returns pairs of the corresponding elements in <span class="literal">x</span> and <span class="literal">y</span>, which you can then use in a loop to perform other operations (like printing, as shown in the preceding code). If the two lists are unequal in length, the function terminates when all the elements of the smaller list have been read.</p>
<p class="indent">Now we’re ready to write a program that will calculate the correlation coefficient for us:</p>
<p class="programs">   def find_corr_x_y(x,y):<br/>       n = len(x)<br/><br/>       # Find the sum of the products<br/>       prod = []<br/><span class="ent">➊</span>     for xi,yi in zip(x,y):<br/>           prod.append(xi*yi)<br/><br/><span class="ent">➋</span>     sum_prod_x_y = sum(prod)<br/><span class="ent">➌</span>     sum_x = sum(x)<br/><span class="ent">➍</span>     sum_y = sum(y)<br/>       squared_sum_x = sum_x**2<br/>       squared_sum_y = sum_y**2<br/><br/>       x_square = []<br/><span class="ent">➎</span>     for xi in x:<br/>           x_square.append(xi**2)<br/>       # Find the sum<br/>       x_square_sum = sum(x_square)<br/><br/>       y_square=[]<br/>        for yi in y:<br/>           y_square.append(yi**2)<br/>       # Find the sum<br/>       y_square_sum = sum(y_square)<br/><a id="page_78"></a><br/>       # Use formula to calculate correlation<br/><span class="ent">➏</span>     numerator = n*sum_prod_x_y - sum_x*sum_y<br/>       denominator_term1 = n*x_square_sum - squared_sum_x<br/>       denominator_term2 = n*y_square_sum - squared_sum_y<br/><span class="ent">➐</span>     denominator = (denominator_term1*denominator_term2)**0.5<br/><span class="ent">➑</span>     correlation = numerator/denominator<br/><br/>       return correlation</p>
<p class="indent">The <span class="literal">find_corr_x_y()</span> function accepts two arguments, <span class="literal">x</span> and <span class="literal">y</span>, which are the two sets of numbers we want to calculate the correlation for. At the beginning of this function, we find the length of the lists and create a label, <span class="literal">n</span>, to refer to it. Next, at <span class="ent">➊</span>, we have a <span class="literal">for</span> loop that uses the <span class="literal">zip()</span> function to calculate the product of the corresponding values from each list (multiplying together the first item of each list, then the second item of each list, and so on). We use the <span class="literal">append()</span> method to add these products to the list labeled <span class="literal">prod</span>.</p>
<p class="indent">At <span class="ent">➋</span>, we calculate the sum of the products stored in <span class="literal">prod</span> using the <span class="literal">sum()</span> function. In the statements at <span class="ent">➌</span> and <span class="ent">➍</span>, we calculate the sum of the numbers in <span class="literal">x</span> and <span class="literal">y</span>, respectively (once again, using the <span class="literal">sum()</span> function). Then, we calculate the squares of the sum of the elements in <span class="literal">x</span> and <span class="literal">y</span>, creating the labels <span class="literal">squared_sum_x</span> and <span class="literal">squared_sum_y</span> to refer to them, respectively.</p>
<p class="indent">In the loop starting at <span class="ent">➎</span>, we calculate the square of each of the elements in <span class="literal">x</span> and find the sum of these squares. Then, we do the same for the elements in <span class="literal">y</span>. We now have all the terms we need to calculate the correlation, and we do this in the statements at <span class="ent">➏</span>, <span class="ent">➐</span>, and <span class="ent">➑</span>. Finally, we return the correlation. Correlation is an oft-cited measure in statistical studies—in popular media and scientific articles alike. Sometimes we know ahead of time that there’s a correlation, and we just want to find the strength of that correlation. We’ll see an example of this in “<a href="ch03.html#ch03lev2sec09">Reading Data from a CSV File</a>” on <a href="ch03.html#page_86">page 86</a>, when we calculate the correlation between data read from a file. Other times, we might only suspect that there might be a correlation, and we must investigate the data to verify whether there actually is one (as in the following example).</p>
<h4 class="h4" id="ch03lev2sec07"><strong><em>High School Grades and Performance on College Admission Tests</em></strong></h4>
<p class="noindent">In this section, we’ll consider a fictional group of 10 students in high school and investigate whether there’s a relationship between their grades in school and how they fared on their college admission tests. <a href="ch03.html#ch3tab2">Table 3-2</a> lists the data we’re going to assume for our study and base our experiments on. The “High school grades” column lists the percentile scores of the students’ grades in high school, and the “College admission test scores” column shows their percentile scores on the college admission test.</p>
<p class="tablet"><a id="page_79"></a><a id="ch3tab2"></a><strong>Table 3-2:</strong> High School Grades and College Admission Test Performance</p>
<table border="0" cellpadding="0" cellspacing="0" class="topbot" width="100%">
<thead>
<tr>
<td valign="top" class="table_th"><p class="table"><strong>High school grades</strong></p></td>
<td valign="top" class="table_th"><p class="table"><strong>College admission test scores</strong></p></td>
</tr>
</thead>
<tbody>
<tr>
<td valign="top" class="table"><p class="table">90</p></td>
<td valign="top" class="table"><p class="table">85</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">92</p></td>
<td valign="top" class="table"><p class="table">87</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">95</p></td>
<td valign="top" class="table"><p class="table">86</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">96</p></td>
<td valign="top" class="table"><p class="table">97</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">87</p></td>
<td valign="top" class="table"><p class="table">96</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">87</p></td>
<td valign="top" class="table"><p class="table">88</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">90</p></td>
<td valign="top" class="table"><p class="table">89</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">95</p></td>
<td valign="top" class="table"><p class="table">98</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">98</p></td>
<td valign="top" class="table"><p class="table">98</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">96</p></td>
<td valign="top" class="table"><p class="table">87</p></td>
</tr>
</tbody>
</table>
<p class="indent">To analyze this data, let’s look at a <em>scatter plot</em>. <a href="ch03.html#ch3fig2">Figure 3-2</a> shows the scatter plot of the preceding data set, with the <em>x</em>-axis representing high school grades and the <em>y</em>-axis representing the corresponding college admission test performance.</p>
<div class="image"><img src="images/f03-02.jpg" alt="image" /></div>
<p class="figuret"><a id="ch3fig2"></a><em>Figure 3-2: Scatter plot of high school grades and college admission test scores</em></p>
<p class="indent"><a id="page_80"></a>The plot of the data indicates that the students with the highest grades in high school didn’t necessarily perform better on the college admission tests and vice versa. Some students with poor high school grades did very well on the college entrance exam, while others had excellent grades but did relatively poorly on the college exam. If we calculate the correlation coefficient of the two data sets (using our program from earlier), we see that it’s approximately 0.32. This means that there’s some correlation, but not a very strong one. If the correlation were closer to 1, we’d see this reflected in the scatter plot as well—the points would conform more closely to a straight, diagonal line.</p>
<p class="indent">Let’s assume that the high school grades shown in <a href="ch03.html#ch3tab2">Table 3-2</a> are an average of individual grades in math, science, English, and social science. Let’s also imagine that the college exam places a high emphasis on math—much more so than on other subjects. Instead of looking at students’ overall high school grades, let’s look at just their grades in math to see whether that’s a better predictor of how they did on their college exam. <a href="ch03.html#ch3tab3">Table 3-3</a> now shows only the math scores (as percentiles) and the college admission tests. The corresponding scatter plot is shown in <a href="ch03.html#ch3fig3">Figure 3-3</a>.</p>
<p class="tablet"><a id="ch3tab3"></a><strong>Table 3-3:</strong> High School Math Grades and College Admission Test Performance</p>
<table border="0" cellpadding="0" cellspacing="0" class="topbot" width="100%">
<thead>
<tr>
<td valign="top" class="table_th"><p class="table"><strong>High school math grades</strong></p></td>
<td valign="top" class="table_th"><p class="table"><strong>College admission test scores</strong></p></td>
</tr>
</thead>
<tbody>
<tr>
<td valign="top" class="table"><p class="table">83</p></td>
<td valign="top" class="table"><p class="table">85</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">85</p></td>
<td valign="top" class="table"><p class="table">87</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">84</p></td>
<td valign="top" class="table"><p class="table">86</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">96</p></td>
<td valign="top" class="table"><p class="table">97</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">94</p></td>
<td valign="top" class="table"><p class="table">96</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">86</p></td>
<td valign="top" class="table"><p class="table">88</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">87</p></td>
<td valign="top" class="table"><p class="table">89</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">97</p></td>
<td valign="top" class="table"><p class="table">98</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">97</p></td>
<td valign="top" class="table"><p class="table">98</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">85</p></td>
<td valign="top" class="table"><p class="table">87</p></td>
</tr>
</tbody>
</table>
<p class="indent">Now, the scatter plot (<a href="ch03.html#ch3fig3">Figure 3-3</a>) shows the data points lying almost perfectly along a straight line. This is an indication of a high correlation between the high school math scores and performance on the college admission test. The correlation coefficient, in this case, turns out to be approximately 1. With the help of the scatter plot and correlation coefficient, we can conclude that there is indeed a strong relationship in this data set between grades in high school math and performance on college admission tests.</p>
<div class="image"><a id="page_81"></a><img src="images/f03-03.jpg" alt="image" /></div>
<p class="figuret"><a id="ch3fig3"></a><em>Figure 3-3: Scatter plot of high school math grades and college admission test scores</em></p>
<h3 class="h3" id="ch03lev1sec06"><strong>Scatter Plots</strong></h3>
<p class="noindent">In the previous section, we saw an example of how a scatter plot can give us a first indication of the existence of any correlation between two sets of numbers. In this section, we’ll see the importance of analyzing scatter plots by looking at a set of four data sets. For these data sets, conventional statistical measures all turn out to be the same, but the scatter plots of each data set reveal important differences.</p>
<p class="indent">First, let’s go over how to create a scatter plot in Python:</p>
<p class="programs">   &gt;&gt;&gt; <span class="codestrong">x = [1, 2, 3, 4]</span><br/>   &gt;&gt;&gt; <span class="codestrong">y = [2, 4, 6, 8]</span><br/>   &gt;&gt;&gt; <span class="codestrong">import matplotlib.pyplot as plt</span><br/><span class="ent">➊</span> &gt;&gt;&gt; <span class="codestrong">plt.scatter(x, y)</span><br/>   &lt;matplotlib.collections.PathCollection object at 0x7f351825d550&gt;<br/>   &gt;&gt;&gt; <span class="codestrong">plt.show()</span></p>
<p class="indent">The <span class="literal">scatter()</span> function is used to create a scatter plot between two lists of numbers, <span class="literal">x</span> and <span class="literal">y</span> <span class="ent">➊</span>. The only difference between this plot and the plots we created in <a href="ch02.html#ch02">Chapter 2</a> is that here we use the <span class="literal">scatter()</span> function instead of the <span class="literal">plot()</span> function. Once again, we have to call <span class="literal">show()</span> to display the plot.</p>
<p class="indent"><a id="page_82"></a>To learn more about scatter plots, let’s look at an important statistical study: “Graphs in Statistical Analysis” by the statistician Francis Anscombe.<a id="fn_01" href="footnote.html#fn01"><sup>1</sup></a> The study considers four different data sets—referred to as <em>Anscombe’s quartet</em>—with identical statistical properties: mean, variance, and correlation coefficient.</p>
<p class="indent">The data sets are as shown in <a href="ch03.html#ch3tab4">Table 3-4</a> (reproduced from the original study).</p>
<p class="tablet"><a id="ch3tab4"></a><strong>Table 3-4:</strong> Anscombe’s Quartet—Four Different Data Sets with Almost Identical Statistical Measures</p>
<table border="0" cellpadding="0" cellspacing="0" class="topbot" width="80%">
<thead>
<tr>
<td valign="top" class="table_th1" colspan="2"><p class="tablec"><strong>A</strong></p></td>
<td valign="top" class="table_th1" colspan="2"><p class="tablec"><strong>B</strong></p></td>
<td valign="top" class="table_th1" colspan="2"><p class="tablec"><strong>C</strong></p></td>
<td valign="top" class="table_th" colspan="2"><p class="tablec"><strong>D</strong></p></td>
</tr>
<tr>
<td valign="top" class="table_th"><p class="tablec"><strong>X1</strong></p></td>
<td valign="top" class="table_th1"><p class="tablec"><strong>Y1</strong></p></td>
<td valign="top" class="table_th"><p class="tablec"><strong>X2</strong></p></td>
<td valign="top" class="table_th1"><p class="tablec"><strong>Y2</strong></p></td>
<td valign="top" class="table_th"><p class="tablec"><strong>X3</strong></p></td>
<td valign="top" class="table_th1"><p class="tablec"><strong>Y3</strong></p></td>
<td valign="top" class="table_th"><p class="tablec"><strong>X4</strong></p></td>
<td valign="top" class="table_th"><p class="tablec"><strong>Y4</strong></p></td>
</tr>
</thead>
<tbody>
<tr>
<td valign="top" class="table"><p class="tabler">10.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.04</p></td>
<td valign="top" class="table"><p class="tabler">10.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">9.14</p></td>
<td valign="top" class="table"><p class="tabler">10.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">7.46</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">6.58</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">6.95</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.14</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">6.77</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">5.76</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">13.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">7.58</p></td>
<td valign="top" class="table"><p class="tabler">13.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.74</p></td>
<td valign="top" class="table"><p class="tabler">13.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">12.74</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">7.71</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">9.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.81</p></td>
<td valign="top" class="table"><p class="tabler">9.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.77</p></td>
<td valign="top" class="table"><p class="tabler">9.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">7.11</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">8.84</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">11.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.33</p></td>
<td valign="top" class="table"><p class="tabler">11.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">9.26</p></td>
<td valign="top" class="table"><p class="tabler">11.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">7.81</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">8.47</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">14.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">9.96</p></td>
<td valign="top" class="table"><p class="tabler">14.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.10</p></td>
<td valign="top" class="table"><p class="tabler">14.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.84</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">7.04</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">6.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">7.24</p></td>
<td valign="top" class="table"><p class="tabler">6.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">6.13</p></td>
<td valign="top" class="table"><p class="tabler">6.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">6.08</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">5.25</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">4.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">4.26</p></td>
<td valign="top" class="table"><p class="tabler">4.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">3.10</p></td>
<td valign="top" class="table"><p class="tabler">4.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">5.39</p></td>
<td valign="top" class="table"><p class="tabler">19.0</p></td>
<td valign="top" class="table"><p class="tabler">12.50</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">12.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">10.84</p></td>
<td valign="top" class="table"><p class="tabler">12.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">9.13</p></td>
<td valign="top" class="table"><p class="tabler">12.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">8.15</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">5.56</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">7.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">4.82</p></td>
<td valign="top" class="table"><p class="tabler">7.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">7.26</p></td>
<td valign="top" class="table"><p class="tabler">7.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">6.42</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">7.91</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="tabler">5.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">5.68</p></td>
<td valign="top" class="table"><p class="tabler">5.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">4.74</p></td>
<td valign="top" class="table"><p class="tabler">5.0</p></td>
<td valign="top" class="table_ro"><p class="tabler">5.73</p></td>
<td valign="top" class="table"><p class="tabler">8.0</p></td>
<td valign="top" class="table"><p class="tabler">6.89</p></td>
</tr>
</tbody>
</table>
<p class="indent">We’ll refer to the pairs (X1, Y1), (X2, Y2), (X3, Y3), and (X4, Y4) as data sets A, B, C, and D, respectively. <a href="ch03.html#ch3tab5">Table 3-5</a> presents the statistical measures of the data sets rounded off to two decimal digits.</p>
<p class="tablet"><a id="ch3tab5"></a><strong>Table 3-5:</strong> Anscombe’s Quartet—Statistical Measures</p>
<table border="0" cellpadding="0" cellspacing="0" class="topbot" width="80%">
<thead>
<tr>
<td valign="bottom" class="table_th1" rowspan="2"><p class="tablec"><strong>Data set</strong></p></td>
<td valign="top" class="table_th1" colspan="2"><p class="tablec"><strong>X</strong></p></td>
<td valign="top" class="table_th1" colspan="2"><p class="tablec"><strong>Y</strong></p></td>
</tr>
<tr>
<td valign="top" class="table_th"><p class="tablec"><strong>Mean</strong></p></td>
<td valign="top" class="table_th1"><p class="tablec"><strong>Std. dev.</strong></p></td>
<td valign="top" class="table_th"><p class="tablec"><strong>Mean</strong></p></td>
<td valign="top" class="table_th1"><p class="tablec"><strong>Std. dev.</strong></p></td>
<td valign="bottom" class="table_th"><p class="tablec"><strong>Correlation</strong></p></td>
</tr>
</thead>
<tbody>
<tr>
<td valign="top" class="table_ro"><p class="tablec">A</p></td>
<td valign="top" class="table"><p class="tablec">9.00</p></td>
<td valign="top" class="table_ro"><p class="tablec">3.32</p></td>
<td valign="top" class="table"><p class="tablec">7.50</p></td>
<td valign="top" class="table_ro"><p class="tablec">2.03</p></td>
<td valign="top" class="table"><p class="tablec">0.82</p></td>
</tr>
<tr>
<td valign="top" class="table_ro"><p class="tablec">B</p></td>
<td valign="top" class="table"><p class="tablec">9.00</p></td>
<td valign="top" class="table_ro"><p class="tablec">3.32</p></td>
<td valign="top" class="table"><p class="tablec">7.50</p></td>
<td valign="top" class="table_ro"><p class="tablec">2.03</p></td>
<td valign="top" class="table"><p class="tablec">0.82</p></td>
</tr>
<tr>
<td valign="top" class="table_ro"><p class="tablec">C</p></td>
<td valign="top" class="table"><p class="tablec">9.00</p></td>
<td valign="top" class="table_ro"><p class="tablec">3.32</p></td>
<td valign="top" class="table"><p class="tablec">7.50</p></td>
<td valign="top" class="table_ro"><p class="tablec">2.03</p></td>
<td valign="top" class="table"><p class="tablec">0.82</p></td>
</tr>
<tr>
<td valign="top" class="table_ro"><p class="tablec">D</p></td>
<td valign="top" class="table"><p class="tablec">9.00</p></td>
<td valign="top" class="table_ro"><p class="tablec">3.32</p></td>
<td valign="top" class="table"><p class="tablec">7.50</p></td>
<td valign="top" class="table_ro"><p class="tablec">2.03</p></td>
<td valign="top" class="table"><p class="tablec">0.82</p></td>
</tr>
</tbody>
</table>
<p class="indent">The scatter plots for each data set are shown in <a href="ch03.html#ch3fig4">Figure 3-4</a>.</p>
<div class="image"><a id="page_83"></a><img src="images/f03-04.jpg" alt="image" /></div>
<p class="figuret"><a id="ch3fig4"></a><em>Figure 3-4: Scatter plots of Anscombe’s quartet</em></p>
<p class="indent">If we look at just the traditional statistical measures (see <a href="ch03.html#ch3tab5">Table 3-5</a>)— like the mean, standard deviation, and correlation coefficient—these data sets seem nearly identical. But the scatter plots show that these data sets are actually quite different from each other. Thus, scatter plots can be an important tool and should be used alongside other statistical measures before drawing any conclusions about a data set.</p>
<h3 class="h3" id="ch03lev1sec07"><strong>Reading Data from Files</strong></h3>
<p class="noindent">In all our programs in this chapter, the lists of numbers we used in our calculations were all explicitly written, or <em>hardcoded</em>, into the programs themselves. If you wanted to find the measures for a different data set, you’d have to enter the entire new data set in the program itself. You also know how to make programs that allow the user to enter the data as input, but with large data sets, it isn’t very convenient to make the user enter long lists of numbers each time he or she uses the program.</p>
<p class="indent">A better alternative is to read the user data from a file. Let’s see a simple example of how we can read numbers from a file and perform mathematical operations on them. First, I’ll show how to read data from a simple text file with each line of the file containing a new data element. Then, I’ll show you how to read from a file where the data is stored in the <a id="page_84"></a>well-known CSV format, which will open up a lot of possibilities as there are loads of useful data sets you can download from the Internet in CSV format. (If you aren’t familiar with file handling in Python, see <a href="app02.html#app02">Appendix B</a> for a brief introduction.)</p>
<h4 class="h4" id="ch03lev2sec08"><strong><em>Reading Data from a Text File</em></strong></h4>
<p class="noindent">Let’s take a file, <em>mydata.txt</em>, with the list of donations (one per line) during period A that we considered at the beginning of this chapter:</p>
<p class="programs">100<br/>60<br/>70<br/>900<br/>100<br/>200<br/>500<br/>500<br/>503<br/>600<br/>1000<br/>1200</p>
<p class="indent">The following program will read this file and print the sum of the numbers stored in the file:</p>
<p class="programs">   # Find the sum of numbers stored in a file<br/>   def sum_data(filename):<br/>       s = 0<br/><span class="ent">➊</span>     with open(filename) as f:<br/>           for line in f:<br/><span class="ent">➋</span>             s = s + float(line)<br/>       print('Sum of the numbers: {0}'.format(s))<br/><br/>   if __name__ == '__main__':<br/>       sum_data('mydata.txt')</p>
<p class="indent">The <span class="literal">sum_data()</span> function opens the file specified by the argument <span class="literal">filename</span> at <span class="ent">➊</span> and reads it line by line (<span class="literal">f</span> is referred to as the <em>file object</em>, and you can think of it as pointing to an opened file). At <span class="ent">➋</span>, we convert each number to a floating point number using the <span class="literal">float()</span> function and then keep adding until we’ve read all the numbers. The final number, labeled <span class="literal">s</span>, holds the sum of the numbers, which is printed at the end of the function.</p>
<p class="indent">Before you run the program, you must first create a file called <em>mydata.txt</em> with the appropriate data and save it in the same directory as your program. You can create this file from IDLE itself by clicking <strong>File</strong><span class="ent">▸</span><strong>New Window</strong>, typing the numbers (one per line) in the new window, and then saving the file as <em>mydata.txt</em> in the same directory as your program. Now, if you run the program, you’ll see the following output:</p>
<p class="programs">Sum of the numbers: 5733.0</p>
<p class="indent"><a id="page_85"></a>All our programs in this chapter have assumed that the input data is available in lists. To use our earlier programs on the data from a file, we need to first create a list from that data. Once we have a list, we can use the functions we wrote earlier to calculate the corresponding statistic. The following program calculates the mean of the numbers stored in the file <em>mydata.txt</em>:</p>
<p class="programs">   '''<br/>   Calculating the mean of numbers stored in a file<br/>   '''<br/>   def read_data(filename):<br/><br/>       numbers = []<br/>       with open(filename) as f:<br/>           for line in f:<br/><span class="ent">➊</span>             numbers.append(float(line))<br/><br/>       return numbers<br/><br/>   def calculate_mean(numbers):<br/>       s = sum(numbers)<br/>       N = len(numbers)<br/>       mean = s/N<br/><br/>       return mean<br/><br/>   if __name__ == '__main__':<br/><span class="ent">➋</span>     data = read_data('mydata.txt')<br/>       mean = calculate_mean(data)<br/>       print('Mean: {0}'.format(mean))</p>
<p class="indent">Before we can call the <span class="literal">calculate_mean()</span> function, we need to read the numbers stored in the file and convert them into a list. To do this, use the <span class="literal">read_data()</span> function, which reads the file line by line. Instead of summing the numbers, this function converts them into floating point numbers and adds them to the list <span class="literal">numbers</span> <span class="ent">➊</span>. The list is returned, and we refer to it by the label <span class="literal">data</span> <span class="ent">➋</span>. We then invoke the <span class="literal">calculate_mean()</span> function, which returns the mean of the data. Finally, we print it.</p>
<p class="indent">When you run the program, you should see the following output:</p>
<p class="programs">Mean: 477.75</p>
<p class="indent">Of course, you’ll see a different value for the mean if the numbers in your file are different from those in this example.</p>
<p class="indent">See <a href="app02.html#app02">Appendix B</a> for hints on how you can ask the user to input the filename and then modify your program accordingly. This will allow your program’s user to specify any data file.</p>
<h4 class="h4" id="ch03lev2sec09"><a id="page_86"></a><strong><em>Reading Data from a CSV File</em></strong></h4>
<p class="noindent">A comma-separated value (CSV) file consists of rows and columns with the columns separated from each other by commas. You can view a CSV file using a text editor on your operating system or specialized software, such as Microsoft Excel, OpenOffice Calc, or LibreOffice Calc.</p>
<p class="indent">Here’s a sample CSV file containing a few numbers and their squares:</p>
<p class="programs">Number,Squared<br/>10,100<br/>9,81<br/>22,484</p>
<p class="indent">The first line is referred to as the <em>header</em>. In this case, it tells us that the entries in the first column of this file are numbers and those in the second column are the corresponding squares. The next three lines, or rows, contain a number and its square separated by a comma. It’s possible to read the data from this file using an approach similar to what I showed for the <em>.txt</em> file. However, Python’s standard library has a dedicated module (<span class="literal">csv</span>) for reading (and writing) CSV files, which makes things a little easier.</p>
<p class="indent">Save the numbers and their squares into a file, <em>numbers.csv</em>, in the same directory as your programs. The following program shows how to read this file and then create a scatter plot displaying the numbers against their squares:</p>
<p class="programs">   import csv<br/>   import matplotlib.pyplot as plt<br/><br/>   def scatter_plot(x, y):<br/>       plt.scatter(x, y)<br/>       plt.xlabel('Number')<br/>       plt.ylabel('Square')<br/>       plt.show()<br/><br/>   def read_csv(filename):<br/><br/>       numbers = []<br/>       squared = []<br/>       with open(filename) as f:<br/><span class="ent">➊</span>         reader = csv.reader(f)<br/>           next(reader)<br/><span class="ent">➋</span>         for row in reader:<br/>               numbers.append(int(row[0]))<br/>               squared.append(int(row[1]))<br/>           return numbers, squared<br/><br/>   if __name__ == '__main__':<br/>       numbers, squared = read_csv('numbers.csv')<br/>       scatter_plot(numbers, squared)</p>
<p class="indent"><a id="page_87"></a>The <span class="literal">read_csv()</span> function reads the CSV file using the <span class="literal">reader()</span> function defined in the <span class="literal">csv</span> module (which is imported at the beginning of the program). This function is called with the file object <span class="literal">f</span> passed to it as an argument <span class="ent">➊</span>. This function then returns a <em>pointer</em> to the first line of the CSV file. We know that the first line of the file is the header, which we want to skip, so we move the pointer to the next line using the <span class="literal">next()</span> function. We then read every line of the file with each line referred to by the label <span class="literal">row</span> <span class="ent">➋</span>, with <span class="literal">row[0]</span> referring to the first column of the data and <span class="literal">row[1]</span> referring to the second. For this specific file, we know that both these numbers are integers, so we use the <span class="literal">int()</span> function to convert these from strings to integers and to store them in two lists. The lists are then returned—one containing the numbers and the other containing the squares.</p>
<p class="indent">We then call the <span class="literal">scatter_plot()</span> function with these two lists to create the scatter plot. The <span class="literal">find_corr_x_y()</span> function we wrote earlier can also easily be used to find the correlation coefficient between the two sets of numbers.</p>
<p class="indent">Now let’s try dealing with a more complex CSV file. Open <em><a href="https://www.google.com/trends/correlate/">https://www.google.com/trends/correlate/</a></em> in your browser, enter any search query you wish to (for example, <em>summer</em>), and click the <strong>Search correlations</strong> button. You’ll see that a number of results are returned under the heading “Correlated with summer,” and the first result is the one with the highest correlation (the number on the immediate left of each result). Click the <strong>Scatter plot</strong> option above the graph to see a scatter plot with the <em>x</em>-axis labeled <em>summer</em> and the <em>y</em>-axis labeled with the top result. Ignore the exact numbers plotted on both axes as we’re interested only in the correlation and the scatter plot.</p>
<p class="indent">A little above the scatterplot, click <strong>Export data as CSV</strong> and a file download will start. Save this file in the same directory as your programs.</p>
<p class="indent">This CSV file is slightly different from the one we saw earlier. At the beginning of the file, you’ll see a number of blank lines and lines with a <span class="literal">'#'</span> symbol until finally you’ll see the header and the data. These lines aren’t useful to us—go ahead and delete them by hand using whatever software you opened the file with so that the first line of the file is the header. Also delete any blank lines at the end of the file. Now save the file. This step— where we cleaned up the file to make it easier to process with Python—is usually called <em>preprocessing</em> the data.</p>
<p class="indent">The header has several columns. The first contains the date of the data in each row (each row has data corresponding to the week that started on the date in this column). The second column is the search query you entered, the third column shows the search query with the <em>highest</em> correlation with your search query, and the other columns include a number of other search queries arranged in decreasing order of correlation with your entered search query. The numbers in these columns are the <em>z</em>-scores of the corresponding search queries. The <em>z-score</em> indicates the difference between the number of times a term was searched for during a specific week and the overall mean number of searches per week for that term. A positive <em>z</em>-score indicates that the number of searches was higher than the mean for that week, and a negative <em>z</em>-score indicates it was lower.</p>
<p class="indent"><a id="page_88"></a>For now, let’s just work with the second and the third columns. You could use the following <span class="literal">read_csv()</span> function to read these columns:</p>
<p class="programs">   def read_csv(filename):<br/><br/>       with open(filename) as f:<br/>           reader = csv.reader(f)<br/>           next(reader)<br/><br/>           summer = []<br/>           highest_correlated = []<br/><span class="ent">➊</span>         for row in reader:<br/>               summer.append(float(row[1]))<br/>               highest_correlated.append(float(row[2]))<br/><br/>       return summer, highest_correlated</p>
<p class="indent">This is pretty much like the earlier version of the <span class="literal">read_csv</span> function; the main change here is how we append the values to each list starting at <span class="ent">➊</span>: we’re now reading the second and the third members of each row, and we’re storing them as floating point numbers.</p>
<p class="indent">The following program uses this function to calculate the correlation between the values for the search query you provided and the values for the query with the highest correlation with it. It also creates a scatter plot of these values:</p>
<p class="programs">   import matplotlib.pyplot as plt<br/>   import csv<br/><br/>   if __name__ == '__main__':<br/><span class="ent">➊</span>     summer, highest_correlated = read_csv('correlate-summer.csv')<br/>       corr = find_corr_x_y(summer, highest_correlated)<br/>       print('Highest correlation: {0}'.format(corr))<br/>       scatter_plot(summer, highest_correlated)</p>
<p class="indent">Assuming that the CSV file was saved as <em>correlate-summer.csv</em>, we call the <span class="literal">read_csv()</span> function to read the data in the second and third columns <span class="ent">➊</span>. Then, we call the <span class="literal">find_corr_x_y()</span> function we wrote earlier with the two lists <span class="literal">summer</span> and <span class="literal">highest_correlated</span>. It returns the correlation coefficient, which we then print. Now, we call the <span class="literal">scatter_plot()</span> function we wrote earlier with these two lists again. Before you can run this program, you’ll need to include the definitions of the <span class="literal">read_csv()</span>, <span class="literal">find_corr_x_y()</span>, and <span class="literal">scatter_plot()</span> functions.</p>
<p class="indent">On running, you’ll see that it prints the correlation coefficient and also creates a scatter plot. Both of these should be very similar to the data shown on the Google correlate website.</p>
<h3 class="h3" id="ch03lev1sec08"><a id="page_89"></a><strong>What You Learned</strong></h3>
<p class="noindent">In this chapter, you learned to calculate statistical measures to describe a set of numbers and the relationships between sets of numbers. You also used graphs to aid your understanding of these measures. You learned a number of new programming tools and concepts while writing programs to calculate these measures.</p>
<h3 class="h3" id="ch03lev1sec09"><strong><span class="bordera">Programming Challenges</span></strong></h3>
<p class="noindent">Next, apply what you’ve learned to complete the following programming challenges.</p>
<h4 class="h4" id="ch03lev2sec10"><strong><em>#1: Better Correlation Coefficient–Finding Program</em></strong></h4>
<p class="noindent">The <span class="literal">find_corr_x_y()</span> function we wrote earlier to find the correlation co efficient between two sets of numbers assumes that the two sets of numbers are the same length. Improve the function so that it first checks the length of the lists. If they’re equal, only then should the function proceed with the remaining calculations; otherwise, it should print an error message that the correlation can’t be found.</p>
<h4 class="h4" id="ch03lev2sec11"><strong><em>#2: Statistics Calculator</em></strong></h4>
<p class="noindent">Implement a statistics calculator that takes a list of numbers in the file <em>mydata.txt</em> and then calculates and prints their mean, median, mode, variance, and standard deviation using the functions we wrote earlier in this chapter.</p>
<h4 class="h4" id="ch03lev2sec12"><strong><em>#3: Experiment with Other CSV Data</em></strong></h4>
<p class="noindent">You can experiment with numerous interesting data sources freely available on the Internet. The website <em><a href="http://www.quandl.com/">http://www.quandl.com/</a></em> is one such source. For this challenge, download the following data as a CVS file from <em><a href="http://www.quandl.com/WORLDBANK/USA_SP_POP_TOTL/">http://www.quandl.com/WORLDBANK/USA_SP_POP_TOTL/</a></em>: the total population of the United States at the end of each year for the years 1960 to 2012. Then, calculate the mean, median, variance, and standard deviation of the <em>difference</em> in population over the years and create a graph showing these differences.</p>
<h4 class="h4" id="ch03lev2sec13"><strong><em>#4: Finding the Percentile</em></strong></h4>
<p class="noindent">The percentile is a commonly used statistic that conveys the value below which a given percentage of observations falls. For example, if a student obtained a 95 percentile score on an exam, this means that 95 percent of the students scored less than or equal to the student’s score. For another example, in the list of numbers 5, 1, 9, 3, 14, 9, and 7, the 50th percentile is 7 and the 25th percentile is 3.5, a number that is not present in the list.</p>
<p class="indent"><a id="page_90"></a>There are a number of ways to find the observation corresponding to a given percentile, but here’s one approach.<a id="fn_02" href="footnote.html#fn02"><sup>2</sup></a></p>
<p class="indentb">Let’s say we want to calculate the observation at percentile <em>p</em>:</p>
<p class="order">1. In ascending order, sort the given list of numbers, which we might call <span class="literal">data</span>.</p>
<p class="order">2. Calculate</p>
<div class="image2"><img src="images/e0090-01.jpg" alt="image" /></div>
<p class="orderp">where <em>n</em> is the number of items in <span class="literal">data</span>.</p>
<p class="order">3. If <em>i</em> is an integer, <span class="literal">data[i]</span> is the number corresponding to percentile <em>p</em>.</p>
<p class="order">4. If <em>i</em> is <em>not</em> an integer, set <em>k</em> equal to the integral part of <em>i</em> and <em>f</em> equal to the fractional part of <em>i</em>. The number <span class="literal">(1-f)*data[k] + f*data[k+1]</span> is the number at percentile <em>p</em>.</p>
<p class="indentt">Using this approach, write a program that will take a set of numbers in a file and display the number that corresponds to a specific percentile supplied as an input to the program.</p>
<h4 class="h4" id="ch03lev2sec14"><strong><em>#5: Creating a Grouped Frequency Table</em></strong></h4>
<p class="noindent">For this challenge, your task is to write a program that creates a grouped frequency table from a set of numbers. A grouped frequency table displays the frequency of data classified into different <em>classes</em>. For example, let’s consider the scores we discussed in “<a href="ch03.html#ch03lev2sec03">Creating a Frequency Table</a>” on <a href="ch03.html#page_69">page 69</a>: 7, 8, 9, 2, 10, 9, 9, 9, 9, 4, 5, 6, 1, 5, 6, 7, 8, 6, 1, and 10. A grouped frequency table would display this data as follows:</p>
<table border="0" cellpadding="0" cellspacing="0" class="topbot" width="40%">
<thead>
<tr>
<td valign="top" class="table_th"><p class="table"><strong>Grade</strong></p></td>
<td valign="top" class="table_th"><p class="table"><strong>Frequency</strong></p></td>
</tr>
</thead>
<tbody>
<tr>
<td valign="top" class="table"><p class="table">1–6</p></td>
<td valign="top" class="table"><p class="table">6</p></td>
</tr>
<tr>
<td valign="top" class="table"><p class="table">6–11</p></td>
<td valign="top" class="table"><p class="table">14</p></td>
</tr>
</tbody>
</table>
<p class="indent">The table classifies the grades into two classes: 1–6 (which includes 1 but not 6) and 6–11 (which includes 6 but not 11). It displays against them the number of grades that belong to each category. Determining the number of classes and the range of numbers in each class are two key steps involved in creating this table. In this example, I’ve demonstrated two classes with the range of numbers in each class equally divided between the two.</p>
<p class="indent"><a id="page_91"></a>Here’s one simple approach to creating classes, which assumes the number of classes can be arbitrarily chosen:</p>
<p class="programs">def create_classes(numbers, n):<br/>    low = min(numbers)<br/>    high = max(numbers)<br/><br/>    # Width of each class<br/>    width = (high - low)/n<br/>    classes = []<br/>    a = low<br/>    b = low + width<br/>    classes = []<br/>    while a &lt; (high-width):<br/>        classes.append((a, b))<br/>        a = b<br/>        b = a + width<br/>    # The last class may be of a size that is less than width<br/>    classes.append((a, high+1))<br/>    return classes</p>
<p class="indent">The <span class="literal">create_classes()</span> function accepts two arguments: a list of numbers, <span class="literal">numbers</span>, and <span class="literal">n</span>, the number of classes to create. It’ll return a list of tuples with each tuple representing a class. For example, if it’s called with numbers 7, 8, 9, 2, 10, 9, 9, 9, 9, 4, 5, 6, 1, 5, 6, 7, 8, 6, 1, 10, and <span class="literal">n</span> = 4, it returns the following list: [(1, 3.25), (3.25, 5.5), (5.5, 7.75), (7.75, 11)]. Once you have the list, the next step is to go over each of the numbers and find out which of the returned classes it belongs to.</p>
<p class="indent">Your challenge is to write a program to read a list of numbers from a file and then to print the grouped frequency table, making use of the <span class="literal">create_classes()</span> function.<a id="page_92"></a></p>
</div>
</body>
</html>