<html lang="en-us" xml:lang="en-us" xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:ns="http://www.w3.org/2001/10/synthesis">
<head>
<title>Learn to Program with Minecraft</title>
<link href="../styles/9781593276706.css" rel="stylesheet" type="text/css"/>
<meta content="urn:uuid:40af8c70-d268-482b-9282-0b537fc6ae71" name="Adept.expected.resource"/>
</head>
<body>
<h2 class="h2" id="ch08"><span epub:type="pagebreak" id="page_149"></span><strong><span class="blue1"><span class="big">8</span></span></strong><br/><strong>FUNCTIONS GIVE YOU SUPERPOWERS</strong></h2>
<div class="image1"><img alt="image" src="../images/common01.jpg"/></div>
<p class="noindent">Functions are reusable blocks of code that perform specific tasks. Say you want to write code that builds a tree in Minecraft. You could rewrite the tree-building code every time you need to use it in your program (or copy and paste it); however, this would be inefficient, especially if you wanted to change it.</p>
<p class="indent">Instead of copying and pasting, you could write the tree-building code as a <em>function</em>. Recall that we used some functions in earlier chapters: <span class="literal">str()</span>, <span class="literal">input()</span>, and <span class="literal">int()</span>. They’re all functions that are built into Python. You’ve even been using Minecraft functions, such as the <span class="literal">getBlocks()</span> and <span class="literal">setPos()</span> functions, which come with the Minecraft Python API. In this chapter, you’ll create your <em>own</em> functions.</p>
<p class="indentb">You create and use functions for the following reasons:</p>
<p class="hanging"><strong>Reusability</strong> Functions save time. Because you don’t have to rewrite the same code over and over again, writing a program is faster and easier.</p>
<p class="hanging"><span epub:type="pagebreak" id="page_150"></span><strong>Debugging</strong> By containing tasks in groups of code, it is easier to identify where a problem originates and make changes to fix the problem.</p>
<p class="hanging"><strong>Modularity</strong> You can develop different functions to use in the same program independently of one another. This makes it easier to share code with other people and reuse functions in other programs.</p>
<p class="hanging"><strong>Scalability</strong> Using functions makes it easier to increase the size of a program and the amount of data it processes.</p>
<h3 class="h3" id="ch08lev1sec01"><strong><span class="blue1">Defining Your Own Functions</span></strong></h3>
<p class="noindent">Let’s look at how you can use functions in your code. In the following example, I make a function called <span class="literal">greeting()</span> that simply prints two lines:</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">greeting</span>():<br/>    <span class="rose">print</span>(<span class="green">"Hello"</span>)<br/>    <span class="rose">print</span>(<span class="green">"Nice to meet you"</span>)</p>
<p class="indent">The <span class="literal">def</span> keyword, which is an abbreviation for <em>define</em>, tells Python you’re writing a function. Anytime you want to write a function, you must first write <span class="literal">def</span> followed by the function’s name. In this example, <span class="literal">greeting</span> is the name of the function. Don’t forget to add the parentheses and the colon at the end of the first line. The lines that follow the colon are the <em>body</em> of the function, which is the code that will run when the function is called.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>Keep indentation consistent in your code. Always indent the body of the function by using four spaces.</em></p>
</div>
<p class="indent">A function can contain as many statements as you want. It can also include <span class="literal">if</span> statements, loops, variables, conditions, math operators, and so on. When you reach the end of the function code, stop indenting lines so Python knows which statements belong to the function and which statements belong to other parts of your code.</p>
<p class="indent">You can create as many functions as you want in a program, as long as they have different names.</p>
<h4 class="h4" id="ch08lev2sec01"><strong><span class="blue1">Calling a Function</span></strong></h4>
<p class="noindent">To use, or <em>call</em>, a function, you write the name of the function with any arguments it might require in parentheses. If your function doesn’t take any arguments, just write the function’s name and a set of empty parentheses.</p>
<p class="indent">To call the <span class="literal">greeting()</span> function defined earlier, you would use the following code:</p>
<p class="programs">greeting()</p>
<p class="indent"><span epub:type="pagebreak" id="page_151"></span>You can call the function as many times as you want. Let’s call the <span class="literal">greeting()</span> function three times:</p>
<p class="programs">greeting()<br/>greeting()<br/>greeting()</p>
<p class="indent">When you run the program, it should produce the output of the function three times, like so:</p>
<p class="programs"><span class="blue1">Hello</span><br/><span class="blue1">Nice to meet you</span><br/><span class="blue1">Hello</span><br/><span class="blue1">Nice to meet you</span><br/><span class="blue1">Hello</span><br/><span class="blue1">Nice to meet you</span></p>
<p class="indent">You must call the function in the body of your code, or the function will not do anything. This is a common mistake. If you run a program that defines some functions and your code doesn’t do anything, it might be because you forgot to call the functions you created.</p>
<p class="indent">You can also call functions from within another function that you’ve created. These include built-in Python functions as well as those you’ve created. You’ll see this in action in just a moment.</p>
<h4 class="h4" id="ch08lev2sec02"><strong><span class="blue1">Functions Take Arguments</span></strong></h4>
<p class="noindent">The parentheses in a function contain its arguments, which are values the function uses. The values are used for specific variables inside the function when it runs. Not every function needs arguments. For example, the <span class="literal">greeting()</span> function doesn’t take arguments.</p>
<p class="indent">But let’s say I want to display a greeting to someone using their name. I’ll write this as a function so I can reuse the code to greet different people:</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">fancyGreeting</span>(personName):<br/>    <span class="rose">print</span>(<span class="green">"Hello, "</span> + personName)<br/><br/>fancyGreeting(<span class="green">"Mario"</span>)<br/>fancyGreeting(<span class="green">"Steve"</span>)</p>
<p class="indent">In this example, function is called twice using different arguments, <span class="literal">"Mario"</span> and <span class="literal">"Steve"</span>. When you run the program, the output looks like this:</p>
<p class="programs"><span class="blue1">Hello, Mario</span><br/><span class="blue1">Hello, Steve</span></p>
<p class="indent">If you forget to include an argument when you call a function that needs one, you will get an error. Also, if a function needs multiple <span epub:type="pagebreak" id="page_152"></span>arguments and you forget to include even one of them, you will get an error. For example, let’s try calling the <span class="literal">fancyGreeting()</span> function with no arguments, like this:</p>
<p class="programs">fancyGreeting()</p>
<p class="indent">The following error message is displayed:</p>
<p class="programs">   <span class="red">Traceback (most recent call last):</span><br/>     <span class="red">File "&lt;pyshell#2&gt;", line 1, in &lt;module&gt;</span><br/>       <span class="red">fancyGreeting()</span><br/><span class="ent">➊</span> <span class="red">TypeError: fancyGreeting() takes exactly 1 argument (0 given)</span></p>
<p class="indent">This is a useful error message because the last line explains what is wrong with the code <span class="ent">➊</span>. The <span class="literal">fancyGreeting()</span> function takes one argument, but because it was given no argument, that caused the error.</p>
<p class="indent">You can create a function that takes several arguments. For example, the following program contains a function that says hello to someone, waits a number of seconds, and then says goodbye. The function uses an argument for the person’s name and the number of seconds the program will wait:</p>
<p class="programs">   <span class="orange">import</span> time<br/><br/><span class="ent">➊</span> <span class="orange">def</span> <span class="blue1">helloAndGoodbye</span>(personName, secsToWait):<br/>       <span class="rose">print</span>(<span class="green">"Hello, "</span> + personName)<br/>       time.sleep(secsToWait)<br/>       <span class="rose">print</span>(<span class="green">"Goodbye, "</span> + personName)<br/><br/><span class="ent">➋</span> helloAndGoodbye(<span class="green">"Mario"</span>, 10)<br/>   helloAndGoodbye(<span class="green">"Steve"</span>, 23)</p>
<p class="indent">Each argument is separated by a comma when the function is defined <span class="ent">➊</span>. Then, when the functions are called, the arguments are passed in the same order in which they were defined <span class="ent">➋</span>.</p>
<div class="note">
<p class="notet"><strong><span class="notes">NOTE</span></strong></p>
<p class="notep"><em>You might encounter the terms</em> argument <em>and</em> parameter <em>used almost interchangeably. The parameters of a function define the types of arguments it accepts or requires, and the arguments are the values that you pass to the function when you call it. For simplicity, we’ll just use the term</em> argument <em>in this book.</em></p>
</div>
<h4 class="h4a" id="ch08lev2sec03"><strong>Mission #41: Build a Forest</strong></h4>
<p class="noindent">Your mission is to create a forest of trees in Minecraft. Because a forest is just a bunch of trees, we’ll create the forest by making a function that builds one tree and then call that function many times to create a forest.</p>
<p class="indent"><span epub:type="pagebreak" id="page_153"></span><a href="ch08.xhtml#ch8ex1">Listing 8-1</a> is the basic code you’ll be using.</p>
<p class="sidenote"><span class="blue"><em>forest.py</em></span></p>
<p class="programs">   <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>   mc = Minecraft.create()<br/><br/><span class="ent">➊</span> <span class="orange">def</span> <span class="blue1">growTree</span>(x, y, z):<br/>       <span class="red"># Creates a tree at the coordinates given</span><br/>       <span class="red"># Write your code to make a tree here</span><br/><br/>   pos = mc.player.getTilePos()<br/>   x = pos.x<br/>   y = pos.y<br/>   z = pos.z<br/><br/><span class="ent">➋</span> growTree(x + 1, y, z)</p>
<p class="examplet"><a id="ch8ex1"></a><em>Listing 8-1: The structure of a program that uses functions to create a forest of trees</em></p>
<p class="indent">The <span class="literal">growTree()</span> function <span class="ent">➊</span> created in this code takes arguments for the coordinates where the tree will be built. Your task is to write code in the body of the function that creates a tree at the given coordinates. You’ll use the <span class="literal">setBlock()</span> and <span class="literal">setBlocks()</span> functions to do this.</p>
<p class="indent">Copy <a href="ch08.xhtml#ch8ex1">Listing 8-1</a> into a new file in IDLE and save it as <em>forest.py</em> in a new folder called <em>functions</em>.</p>
<p class="indent">When you’ve created something that resembles a tree and it appears onscreen, try writing more calls to the function using different arguments so trees appear at different locations. The first one has been done for you <span class="ent">➋</span>. Try creating at least nine trees in front of the player each time you run your program. <a href="ch08.xhtml#ch8fig1">Figure 8-1</a> shows the trees that my program created.</p>
<div class="image"><img alt="image" src="../images/f08-01.jpg"/></div>
<p class="figcap"><a id="ch8fig1"></a><em>Figure 8-1: I’ve just grown a beautiful row of trees.</em></p>
<div class="sidebar">
<p class="sidebart" id="ch08sb01"><span epub:type="pagebreak" id="page_154"></span><strong>BONUS OBJECTIVE: RANDOM FOREST</strong></p>
<p class="noindent">Use the <span class="literal">randint()</span> function in the <span class="literal">random</span> module to randomize the distance between the trees in the forest.</p>
</div>
<h4 class="h4" id="ch08lev2sec04"><strong><span class="blue1">Refactoring a Program</span></strong></h4>
<p class="noindent">Quite often you’ll write a program that uses the same block of code several times. Making changes to the program will become tedious when you want to change the same code in different places. You might have done this in programs you’ve written in the past, but there’s a much better way.</p>
<p class="indent">You can restructure your programs to use functions. To do this, move the code that is repeated several times into a single function that you can then use as many times as you want in the rest of the code. Because you’ll only need to make changes in one place instead of several, you’ll save space and the program will be easier to maintain. The process of restructuring your code in this way is called <em>refactoring</em>.</p>
<p class="indent">For example, the following code asks three people their names and then prints a greeting to each of them:</p>
<p class="programs">name1 = <span class="rose">input</span>(<span class="green">"Hello, what is your name?"</span>)<br/><span class="rose">print</span>(<span class="green">"Pleased to meet you, "</span> + name1)<br/>name2 = <span class="rose">input</span>(<span class="green">"Hello, what is your name?"</span>)<br/><span class="rose">print</span>(<span class="green">"Pleased to meet you, "</span> + name2)<br/>name3 = <span class="rose">input</span>(<span class="green">"Hello, what is your name?"</span>)<br/><span class="rose">print</span>(<span class="green">"Pleased to meet you, "</span> + name3)</p>
<p class="indent">The code here repeats the same two statements three times. What if you wanted to change the question or the greeting? It’s not much of a problem changing the code for 3 people, but what if you were writing code for 100 people?</p>
<p class="indent">The alternative is to write the code as a function and call it three times. Here is the code after refactoring it:</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">helloFriend</span>():<br/>    name = <span class="rose">input</span>(<span class="green">"Hello, what is your name?"</span>)<br/>    <span class="rose">print</span>(<span class="green">"Pleased to meet you, "</span> + name)<br/><br/>helloFriend()<br/>helloFriend()<br/>helloFriend()</p>
<p class="indent">Now when the program runs, it will ask for input and then output a string, and it will do both tasks three times. Here are the input and output:</p>
<p class="programs"><span class="blue1">Hello, what is your name?</span> Craig<br/><span class="blue1">Pleased to meet you, Craig<br/>Hello, what is your name?</span> Still Craig<br/><span class="blue1">Pleased to meet you, Still Craig<br/>Hello, what is your name?</span> Craig again<br/><span class="blue1">Pleased to meet you, Craig again</span></p>
<p class="indent"><span epub:type="pagebreak" id="page_155"></span>The second version of the code has the same outcome as the first version, but as you can see, it’s much easier to read and much easier to change.</p>
<h4 class="h4a" id="ch08lev2sec05"><strong>Mission #42: Refactor Away</strong></h4>
<p class="noindent">Sometimes you’ll write a program only to realize afterward that you should have used functions (I do this all the time). Refactoring code to include functions is a very important skill.</p>
<p class="indent">In this mission, you’ll practice refactoring a program to use a function instead of repeating the same statements several times.</p>
<p class="indent"><a href="ch08.xhtml#ch8ex2">Listing 8-2</a> places a melon block underneath the player every 10 seconds. We’ll rewrite the code to use a function. Currently, the program places three blocks by using the same line of code three times. <a href="ch08.xhtml#ch8fig2">Figure 8-2</a> shows the result of the program.</p>
<p class="sidenote"><span class="blue"><em>melonFunction.py</em></span></p>
<p class="programs"><span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>mc = Minecraft.create()<br/><br/><span class="orange">import</span> time<br/><br/>pos = mc.player.getPos()<br/>x = pos.x<br/>y = pos.y<br/>z = pos.z<br/>mc.setBlock(x, y - 1, z, 103)<br/>time.sleep(10)<br/><br/>pos = mc.player.getPos()<br/>x = pos.x<br/>y = pos.y - 1<br/>z = pos.z<br/>mc.setBlock(x, y, z, 103)<br/>time.sleep(10)<br/><br/>pos = mc.player.getPos()<br/>x = pos.x<br/>y = pos.y - 1<br/>z = pos.z<br/>mc.setBlock(x, y, z, 103)<br/>time.sleep(10)</p>
<p class="examplet"><a id="ch8ex2"></a><em>Listing 8-2: Some code that needs refactoring</em></p>
<p class="indent">This code isn’t very pretty, is it? Several lines are repeated, which is always a sign that the code needs refactoring with the help of a function definition.</p>
<div class="note">
<p class="notet"><strong><span class="hints">HINT</span></strong></p>
<p class="notep"><em>Identify which parts of the code repeat to get an idea of what your function should do.</em></p>
</div>
<div class="image"><span epub:type="pagebreak" id="page_156"></span><img alt="image" src="../images/f08-02.jpg"/></div>
<p class="figcap"><a id="ch8fig2"></a><em>Figure 8-2: Three delicious melons under the ground</em></p>
<p class="indent">Change the code so it places six blocks in total by calling your function six times. Create a new file and save it as <em>melonFunction.py</em> in the <em>functions</em> folder. Copy <a href="ch08.xhtml#ch8ex2">Listing 8-2</a> into your file and refactor the code to use a function. Call the new function <span class="literal">makeMelon()</span>.</p>
<div class="sidebar">
<p class="sidebart" id="ch08sb02"><strong>BONUS OBJECTIVE: BLOCKS UNDERFOOT</strong></p>
<p class="noindent">Add arguments to your <span class="literal">makeMelon()</span> function to control the type of block, sleep time, or distance below the player.</p>
</div>
<h4 class="h4" id="ch08lev2sec06"><strong><span class="blue1">Commenting with Docstrings</span></strong></h4>
<p class="noindent">Using comments in Python code is a way to explain what code does. When Python runs a program, it ignores everything in a comment, so comments don’t affect how the code runs. The main purpose of comments is to explain what your code is supposed to do to others who might look at or use your code. Comments are also useful reminders for yourself in the future.</p>
<p class="indent">Because functions are supposed to be reusable, it makes sense to explain their purpose. To write explanations for our functions, we’ll use long explanations called <em>docstrings</em>. A docstring is a multiline comment that you place at the start of a function to explain its use.</p>
<p class="indent">The <span class="literal">duplicateWord()</span> function in the following example has a docstring that explains its task:</p>
<p class="programs">   <span class="orange">def</span> <span class="blue1">duplicateString</span>(stringToDbl):<br/><span class="ent">➊</span>     <span class="green">""" Prints a string twice on the same line.</span><br/>       <span class="green">stringToDbl argument should be a string """</span><br/>       <span class="rose">print</span>(stringToDbl * 2)</p>
<p class="indent"><span epub:type="pagebreak" id="page_157"></span>The docstring should be on the first line of a function <span class="ent">➊</span>. The docstring begins and ends with a set of three quotation marks (<span class="literal">"""</span>) and can be written across as many lines as necessary.</p>
<h4 class="h4" id="ch08lev2sec07"><strong><span class="blue1">Line Breaks in Arguments</span></strong></h4>
<p class="noindent">To make long lists of arguments easier for programmers to read, Python allows you to place arguments across several lines. For example, the function call in this program has its arguments split across several lines to increase readability:</p>
<p class="programs"><span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>mc = Minecraft.create()<br/><br/>pos = mc.player.getPos()<br/>width = 10<br/>height = 12<br/>length = 13<br/>block = 103<br/>mc.setBlocks(pos.x, pos.y, pos.z,<br/>             pos.x + width, pos.y + height, pos.z + length, block)</p>
<p class="indent">Line breaks in arguments are particularly useful when you want to use math operators on arguments, when you are using long variable names as arguments, or when you have several arguments to provide to a function.</p>
<h4 class="h4" id="ch08lev2sec08"><strong><span class="blue1">Function Return Values</span></strong></h4>
<p class="noindent">There are two types of functions: those that return a value and those that don’t. So far, you’ve created functions that don’t return a value. Let’s look at those that do return a value.</p>
<p class="indent">Returning a value from a function is very useful, because it allows a function to work with data and then return a value to the main body of the program. For example, imagine you sell cookies. To calculate the price you have to sell each cookie at to make enough profit, you add two gold coins to the amount you paid to make the cookie and then multiply the sum by 10. By using a function that returns a value, you can write this calculation and reuse it in Python.</p>
<p class="indent">When making your own functions, you can use the <span class="literal">return</span> keyword to return a value from the function. For example, here is the code to calculate your selling price for a cookie:</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">calculateCookiePrice</span>(cost):<br/>    price = cost + 2<br/>    price = price * 10<br/>    <span class="orange">return</span> price</p>
<p class="indent"><span epub:type="pagebreak" id="page_158"></span>To return a value, you just write <span class="literal">return</span> followed by the value you want, which in this case is <span class="literal">price</span>. To use a function that returns a value, you call it in a place that would expect a value. For example, to set the <span class="literal">priceOfCookie</span> variable, call the <span class="literal">calculateCookiePrice()</span> function and enter a cost, such as <span class="literal">6</span>:</p>
<p class="programs">priceOfCookie = calculateCookiePrice(6)  <span class="red"># Value will be 80</span></p>
<p class="indent">You can use functions that return values to set the values of variables, and you can use them anywhere that you are expected to put a value, even as an argument for another function.</p>
<p class="indent">Functions that do not return a value cannot be used to set the values of variables. Let’s take a quick look at the difference.</p>
<p class="indent">Because the following function returns a value, it can be used anywhere a value can be used, such as to set a variable or even as an argument in another function call:</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">numberOfChickens</span>():<br/>    <span class="orange">return</span> 5<br/><br/>coop = numberOfChickens()<br/><span class="rose">print</span>(numberOfChickens())</p>
<p class="indent">Run this code to see its output. You can treat the result from the function like a value and even do math with it. Here I add 4 to the returned value and store it in a variable called <span class="literal">extraChickens</span>:</p>
<p class="programs">extraChickens = 4 + numberOfChickens()  <span class="red"># Value of 9</span></p>
<p class="indent">However, the following function doesn’t have a <span class="literal">return</span> statement, which means you can’t use it in place of a value. All you can do is call the function:</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">chickenNoise</span>():<br/>    <span class="rose">print</span>(<span class="green">"Cluck"</span>)<br/><br/>chickenNoise()</p>
<p class="indent">Writing this code in the text editor and running it prints <span class="literal">"Cluck"</span>, although it can’t be used in other statements because it doesn’t return a value to the program. For example, I could try to concatenate the function with a string, like so:</p>
<p class="programs">multipleNoises = chickenNoise() + <span class="green">", Bork"</span></p>
<p class="indent">If I ran this program, I would get the following error message:</p>
<p class="programs"><span class="red">Traceback (most recent call last):</span><br/>  <span class="red">File "&lt;pyshell#3&gt;", line 1, in &lt;module&gt;</span><br/>    <span class="red">multipleNoises = chickenNoise + ", Bork"</span><br/><span class="red">TypeError: unsupported operand type(s) for +: 'function' and 'str'</span></p>
<p class="indent"><span epub:type="pagebreak" id="page_159"></span>This error means you can’t combine this function with a string, because the function doesn’t return a value.</p>
<p class="indent">However, if I change the code to return a value instead of just printing it:</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">chickenNoise</span>():<br/>    return <span class="green">"Cluck"</span><br/><br/>multipleNoises = chickenNoise() + <span class="green">", Bork"</span><br/><span class="rose">print</span>(multipleNoises)</p>
<p class="indent">the file would run and display the following output:</p>
<p class="programs"><span class="blue1">Cluck, Bork</span></p>
<p class="indent">Keep this difference in mind. Remember to include a <span class="literal">return</span> statement when you need it and exclude it when your function doesn’t need to return a value. The more experienced you become with functions, the easier it will be to decide whether you want your function to return a value.</p>
<h4 class="h4a" id="ch08lev2sec09"><strong>Mission #43: Block ID Reminder</strong></h4>
<p class="noindent">Because Minecraft has so many blocks, it’s difficult to remember all the block IDs. I always remember the melon (103) and air (0) values but forget others, so I keep having to build houses out of melons!</p>
<p class="indent">To make remembering easier, I want you to create a program for me that returns the values of different blocks. Your program should have many functions that help me remember block IDs. The name of each function should be the same as the name of the block whose value it returns. For example, <a href="ch08.xhtml#ch8ex3">Listing 8-3</a> has a function called <span class="literal">melon()</span> that returns the value of the melon block (103).</p>
<p class="sidenote"><span class="blue"><em>blockIds.py</em></span></p>
<p class="programs"><span class="orange">def</span> <span class="blue1">melon</span>():<br/>    <span class="green">""" Returns the value of the melon block """</span><br/>    <span class="orange">return</span> 103</p>
<p class="examplet"><a id="ch8ex3"></a><em>Listing 8-3: The start of the program that will help me remember block IDs</em></p>
<p class="indentb">Create a new file in IDLE and save it as <em>blockIds.py</em> in the <em>functions</em> folder. Copy <a href="ch08.xhtml#ch8ex3">Listing 8-3</a> into the file and add functions to it that return the values of the following blocks (see “<a href="app03.xhtml#app03">Block ID Cheat Sheet</a>” on <a href="app03.xhtml#page_299">page 299</a>):</p>
<p class="bull">• Water</p>
<p class="bull">• Wool</p>
<p class="bull">• Lava</p>
<p class="bull">• TNT</p>
<p class="bull">• Flower</p>
<p class="bull">• Diamond block</p>
<p class="indentt"><span epub:type="pagebreak" id="page_160"></span>After you’ve added your functions, test them by calling the functions to create blocks. Because your new functions return a block’s value, you can use them to set the value of a variable to pass into the <span class="literal">setBlock()</span> function. The following code will help you get started:</p>
<p class="programs"><span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>mc = Minecraft.create()<br/><br/><span class="red"># Functions go here</span><br/><br/>block = melon()<br/>pos = mc.player.getTilePos()<br/>mc.setBlock(pos.x, pos.y, pos.z, block)</p>
<p class="indent"><a href="ch08.xhtml#ch8fig3">Figure 8-3</a> shows the result of the completed program with a test for the <span class="literal">melon()</span> function. Notice that the placement of any block is hardcoded into this program; it will always place a block at your current location.</p>
<div class="image"><img alt="image" src="../images/f08-03.jpg"/></div>
<p class="figcap"><a id="ch8fig3"></a><em>Figure 8-3: Now I don’t have to remember the block types, all thanks to this handy function.</em></p>
<div class="note">
<p class="notet"><strong><span class="hints">HINT</span></strong></p>
<p class="notep"><em>To place a diamond block, TNT, or any other kind of block, you’ll first need to define the function that returns the value of the block you want. Then you’ll need to call that function in your code, just like I called the</em> <span class="literal"><span class="codeitalic">melon()</span></span> <em>function in this example.</em></p>
</div>
<div class="sidebar">
<p class="sidebart" id="ch08sb03"><strong>BONUS OBJECTIVE: MORE BLOCKS</strong></p>
<p class="noindent">Add extra functions for any other block types that you want.</p>
</div>
<h3 class="h3" id="ch08lev1sec02"><span epub:type="pagebreak" id="page_161"></span><strong><span class="blue1">Using if Statements and while Loops in Functions</span></strong></h3>
<p class="noindent">In <a href="ch06.xhtml#ch06">Chapters 6</a> and <a href="ch07.xhtml#ch07">7</a>, you learned about putting <span class="literal">if</span> statements inside of other <span class="literal">if</span> statements and <span class="literal">while</span> loops inside of other <span class="literal">while</span> loops. You learned that you can even put <span class="literal">if</span> statements within <span class="literal">while</span> loops and vice versa! In this section, you’ll learn how to put <span class="literal">if</span> statements and loops inside functions. This makes your functions very flexible, because you can use them to make decisions and repeat code.</p>
<h4 class="h4" id="ch08lev2sec10"><strong><span class="blue1">if Statements</span></strong></h4>
<p class="noindent">When you’re writing an <span class="literal">if</span> statement within a function, the syntax is identical to that of a regular <span class="literal">if</span> statement. You just need to remember to indent the <span class="literal">if</span> statement by an extra four spaces at the start of every line so Python knows it’s part of the function.</p>
<p class="indent">The following code takes a number written as a string and returns the number as an integer. For example, the argument <span class="literal">"four"</span> returns the value <span class="literal">4</span>:</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">wordToNumber</span>(numToConvert):<br/>    <span class="green">""" Converts a number written as a word to an integer """</span><br/>    <span class="orange">if</span> numToConvert == <span class="green">"one"</span>:<br/>        numAsInt = 1<br/>    <span class="orange">elif</span> numToConvert == <span class="green">"two"</span>:<br/>        numAsInt = 2<br/>    <span class="orange">elif</span> numToConvert == <span class="green">"three"</span>:<br/>        numAsInt = 3<br/>    <span class="orange">elif</span> numToConvert == <span class="green">"four"</span>:<br/>        numAsInt = 4<br/>    <span class="orange">elif</span> numToConver == <span class="green">"five"</span>:<br/>        numAsInt = 5<br/><br/>    <span class="orange">return</span> numAsInt</p>
<p class="indent">Let’s look at another example. The following function checks whether you’ve met a person before and uses an appropriate greeting depending on the result:</p>
<p class="programs"><span class="ent">➊</span> <span class="orange">def</span> <span class="blue1">chooseGreeting</span>(metBefore):<br/>       <span class="green">""" Chooses a greeting depending on whether you've met someone before.</span><br/>       <span class="green">metBefore argument should be a Boolean value """</span><br/>       <span class="orange">if</span> metBefore:<br/><span class="ent">➋</span>         <span class="rose">print</span>(<span class="green">"Nice to see you again"</span>)<br/>       <span class="orange">else</span>:<br/><span class="ent">➌</span>         <span class="rose">print</span>(<span class="green">"Nice to meet you"</span>)<br/><br/>   chooseGreeting(<span class="orange">True</span>)<br/>   chooseGreeting(<span class="orange">False</span>)</p>
<p class="indent"><span epub:type="pagebreak" id="page_162"></span>The <span class="literal">chooseGreeting()</span> function takes one Boolean argument, called <span class="literal">metBefore</span> <span class="ent">➊</span>. The <span class="literal">if</span> statement inside the function then prints output based on the value of the argument. If the value is <span class="literal">True</span>, the output will be <span class="literal">"Nice to see you again"</span> <span class="ent">➋</span>, and if it is <span class="literal">False</span> <span class="ent">➌</span>, the output will be <span class="literal">"Nice to meet you"</span>.</p>
<h4 class="h4a" id="ch08lev2sec11"><strong>Mission #44: Wool Color Helper</strong></h4>
<p class="noindent">You’ve used the <span class="literal">setBlock()</span> and <span class="literal">setBlocks()</span> methods with arguments to set block coordinates and block type, but these methods also have an optional extra argument that will set the block <em>state</em>.</p>
<p class="indent">Each block in Minecraft has 16 states, 0 to 15. Wool, for example, has a different color for every state. TNT (block ID 46) won’t explode when you smash the block in its default state (state 0), but it is explosive when you smash it in block state 1. Although every block has 16 states, not all of them have different behaviors.</p>
<p class="indent">To set a block’s state, you provide the <span class="literal">setblock()</span> or <span class="literal">setblocks()</span> function with an extra argument. The following code creates a pink block of wool:</p>
<p class="programs"><span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>mc = Minecraft.create()<br/><br/>block = 35<br/>state = 6<br/><span class="red"># Creates a single block of pink wool</span><br/>mc.setBlock(10, 3, -4, block, state)<br/><br/><span class="red"># Creates a cuboid of pink wool</span><br/>mc.setBlocks(11, 3, -4, 20, 6, -8, block, state)</p>
<p class="indent">Wool (block ID 35) has many uses in Minecraft due to its different colors, but it’s difficult to remember the different block states. Fortunately, you don’t need to memorize the different block states when you can use a program to remind you.</p>
<p class="indent">Let’s make a program that contains the wool block’s states. The program will contain a function with an argument that takes the color you want written as a string. The function then returns the block state for the wool color as an integer. The function will contain the bulk of the code for the program. However, you’ll add a couple of code lines to take input from a user and place the block in the game, and you’ll use your fancy new function to set the color.</p>
<p class="indent">First, you’ll need to find out the block states for the different colors of wool. You can find them in the “<a href="app03.xhtml#app03">Block ID Cheat Sheet</a>” on <a href="app03.xhtml#page_299">page 299</a>. Here’s some code to get you started (pink is block state 6):</p>
<p class="sidenote"><span class="blue"><em>woolColors.py</em></span></p>
<p class="programs">   <span class="orange">def</span> <span class="blue1">getWoolState</span>(color):<br/>       <span class="green">""" Takes a color as a string and returns the wool block state for</span><br/>       <span class="green">that color """</span><br/><span class="ent">➊</span>     <span class="orange">if</span> color == <span class="green">"pink"</span>:<br/>           blockState = 6<br/>       <span class="orange">elif</span> <span class="red"># Add elif statements for the other colors</span><br/>       <span class="red"># Return the blockState here</span><br/><br/><span class="ent">➋</span> colorString = <span class="rose">input</span>(<span class="green">"Enter a block color: "</span>)<br/>   state = getWoolState(colorString)<br/><br/><span class="ent">➌</span> pos = mc.player.getTilePos()<br/>   mc.setBlock(pos.x, pos,y, pos.z, 35, state)</p>
<p class="indent"><span epub:type="pagebreak" id="page_163"></span>At the moment, the program has just the beginnings of the <span class="literal">getWoolState()</span> function. It only has an <span class="literal">if</span> statement for the color pink <span class="ent">➊</span>. Also included is code at the end of the program to take user input for the block color <span class="ent">➋</span> and code to place the wool block at the player’s position <span class="ent">➌</span>.</p>
<p class="indent">Add to the <span class="literal">getWoolState()</span> function using <span class="literal">elif</span> statements for other wool colors and their corresponding block states. The program should take an argument for the color of the block and return the integer value of the block state. For example, providing the argument <span class="literal">"pink"</span> will return the value 6. You’ll also need to add a <span class="literal">return</span> statement to the program. Use the comments to guide you.</p>
<p class="indent">Save the file as <em>woolColors.py</em> in the <em>functions</em> folder.</p>
<p class="indent">If you want to make the program more user friendly, you can post a message to chat if the argument is not a valid color. <a href="ch08.xhtml#ch8fig4">Figure 8-4</a> shows the input in the Python shell and the wool block being placed in the game.</p>
<div class="image"><img alt="image" src="../images/f08-04.jpg"/></div>
<p class="figcap"><a id="ch8fig4"></a><em>Figure 8-4: Now I can create a wool block in any color by entering the name of the color I want.</em></p>
<h4 class="h4" id="ch08lev2sec12"><strong><span class="blue1">while Loops</span></strong></h4>
<p class="noindent">Just like <span class="literal">if</span> statements, loops can be written inside functions. The syntax for a loop inside a function is the same as that for a regular loop. You just need to remember that the loop should be indented by an extra four spaces on each line to indicate that it belongs to the function.</p>
<p class="indent"><span epub:type="pagebreak" id="page_164"></span>In the following example, the <span class="literal">while</span> loop within the function will print the <span class="literal">toPrint</span> argument. The number of times the loop repeats is determined by the <span class="literal">repeats</span> argument.</p>
<p class="programs"><span class="orange">def</span> <span class="blue1">printMultiple</span>(toPrint, repeats):<br/>    <span class="green">""" Prints a string a number of times determined by the repeats variable """</span><br/>    count = 0<br/>    <span class="orange">while</span> count &lt; repeats:<br/>        <span class="rose">print</span>(toPrint)<br/>        count += 1</p>
<p class="indent">You can also use <span class="literal">return</span> statements and <span class="literal">while</span> loops in the same function. In most cases, you’ll want the <span class="literal">return</span> statement to be outside the loop. (If you use the <span class="literal">return</span> statement inside a loop, it will break the loop and end the function.) Let’s look at an example:</p>
<p class="programs">   <span class="orange">def</span> <span class="blue1">doubleUntilHundred</span>(numberToDbl):<br/>       <span class="green">""" Doubles a number until it is greater than 100. Returns the number of</span><br/>       <span class="green">times the number was doubled """</span><br/>       count = 0<br/>       <span class="orange">while</span> numToDbl &lt; 100:<br/>           numberToDbl = numberToDbl * 2<br/>           count += 1<br/><span class="ent">➊</span>     <span class="orange">return</span> count<br/><br/>   <span class="rose">print</span>(doubleUntilHundred(2))</p>
<p class="indent">This program doubles a number until it is greater than 100. It then returns the number of times the loop repeated <span class="ent">➊</span>.</p>
<p class="indent">You can also put function calls within loops, as you did in previous chapters.</p>
<h4 class="h4a" id="ch08lev2sec13"><strong>Mission #45: Blocks, Everywhere</strong></h4>
<p class="noindent">By using loops inside functions, you can use an argument to determine the number of times a loop repeats. By using the <span class="literal">setBlock()</span> function, you can also determine the type of block to be placed within the loop.</p>
<div class="note">
<p class="notet"><strong><span class="warnings">WARNING</span></strong></p>
<p class="notep"><em>The program in this mission could be destructive, so you might want to try it in a new world to preserve your precious creations.</em></p>
</div>
<p class="indent">In this mission, you’ll create a function that places blocks randomly around the map. The number of blocks it places and the block type it places are determined by function arguments.</p>
<p class="indent"><a href="ch08.xhtml#ch8ex4">Listing 8-4</a> generates a melon at a random location on the map.</p>
<p class="sidenote"><span epub:type="pagebreak" id="page_165"></span><span class="blue"><em>blocksEverywhere.py</em></span></p>
<p class="programs">   <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>   mc = Minecraft.create()<br/>   <span class="orange">import</span> random<br/><br/>   <span class="orange">def</span> <span class="blue1">randomBlockLocations</span>(blockType, repeats):<br/><span class="ent">➊</span>     count = 0<br/><span class="ent">➋</span>     <span class="red"># Add the loop here</span><br/>       x = random.randint(-127, 127)<br/>       z = random.randint(-127, 127)<br/><span class="ent">➌</span>     y = mc.getHeight(x, z)<br/>       mc.setBlock(x, y, z, blockType)<br/>       count += 1</p>
<p class="examplet"><a id="ch8ex4"></a><em>Listing 8-4: When called, this function will place a block randomly in the game.</em></p>
<p class="indent">Copy <a href="ch08.xhtml#ch8ex4">Listing 8-4</a> into a new file in IDLE and save it as <em>blocksEverywhere.py</em> in the <em>functions</em> folder. At <span class="ent">➋</span>, add a <span class="literal">while</span> loop inside the function so the code repeats. The <span class="literal">count</span> variable <span class="ent">➊</span> makes it easier for you to tell how many times the loop has repeated. Compare the <span class="literal">repeats</span> argument to the <span class="literal">count</span> variable in the loop’s condition to set how many times the loop should repeat. Indent all the lines inside the function after <span class="ent">➋</span> so they are also inside the loop. The <span class="literal">getHeight()</span> function ensures that the block is placed above the ground <span class="ent">➌</span>.</p>
<p class="indent">Finally, add three function calls to create blocks. The first function should create 10 blocks, the second one should create 37 blocks, and the third should create 102 blocks. Choose any block types that you want.</p>
<p class="indent">Save the program and run it. The program should create blocks randomly around the map. <a href="ch08.xhtml#ch8fig5">Figure 8-5</a> shows an example.</p>
<div class="image"><img alt="image" src="../images/f08-05.jpg"/></div>
<p class="figcap"><a id="ch8fig5"></a><em>Figure 8-5: You can see some of the blocks that the program has placed randomly. I created a new world to demonstrate this program so it didn’t damage any of my buildings.</em></p>
<h3 class="h3" id="ch08lev1sec03"><span epub:type="pagebreak" id="page_166"></span><strong><span class="blue1">Global and Local Variables</span></strong></h3>
<p class="noindent">When you’re defining functions, you have a new challenge to deal with, namely the scope of a variable. The <em>scope</em> of a variable describes how your program can access its data. The best way to learn about scope is to see it in action, so let’s look at some code. Let’s say you’re using the following code, which increases the number of eggs you have for a party:</p>
<p class="programs"><span class="ent">➊</span> eggs = 12<br/><br/>   <span class="orange">def</span> <span class="blue1">increaseEggs</span>():<br/><span class="ent">➋</span>     eggs += 1<br/>       <span class="rose">print</span>(eggs)<br/><br/>   increaseEggs()</p>
<p class="indent">Two variables are named <span class="literal">eggs</span>, one outside the function <span class="ent">➊</span> and another inside the function <span class="ent">➋</span>. Nothing looks terribly wrong, but Python will throw an error. Here’s part of the error message:</p>
<p class="programs"><span class="red">UnboundLocalError: local variable 'eggs' referenced before assignment</span></p>
<p class="indent">The problem is that the <span class="literal">eggs</span> variable is defined outside the function, but when you try to add to it inside the function, Python can’t see the variable. To Python, the variable inside the function is totally different from the one outside the function, even though they have the same name. Python does this on purpose to stop variables inside different functions from accidentally sharing the same names and causing unexpected bugs.</p>
<p class="indent">In Python code, you have two ways to approach the variables in a file: you can either make a variable <em>global</em>, which means it affects an entire program or file, or make a variable <em>local</em>, which means it can be seen only by the code in a particular function or loop. In other words, you can use the same variable inside and outside a function, or you can make two different variables that affect different parts of the code.</p>
<p class="indent">A <em>global</em> variable will be treated as the same variable inside and outside a function. Any changes to the variable inside the function will affect the variable that was defined outside the function and vice versa. To make a global variable, use the <span class="literal">global</span> keyword <span class="ent">➊</span>:</p>
<p class="programs">   eggs = 12<br/><br/>   <span class="orange">def</span> <span class="blue1">increaseEggs</span>():<br/><span class="ent">➊</span>     <span class="orange">global</span> eggs<br/>       eggs += 1<br/>       <span class="rose">print</span>(eggs)<br/><br/>increaseEggs()</p>
<p class="indent">In this example, the value of <span class="literal">eggs</span> will be 13 when it is printed.</p>
<p class="indent"><span epub:type="pagebreak" id="page_167"></span>You can treat the variable as a <em>local</em> variable instead to produce a different effect. In this case, the variables inside and outside the function will be treated as different variables. Changes to the variable inside the function will not affect the variable outside the function and vice versa. So you could change the code to make the variable a local variable <span class="ent">➊</span>, like this:</p>
<p class="programs">   eggs = 12<br/><br/>   <span class="orange">def</span> <span class="blue1">increaseEggs</span>():<br/><span class="ent">➊</span>     eggs = 0<br/>       eggs += 1<br/><span class="ent">➋</span>     <span class="rose">print</span>(eggs)<br/><br/>    increaseEggs()<br/><span class="ent">➌</span> <span class="rose">print</span>(eggs)</p>
<p class="indent">When the value of <span class="literal">eggs</span> in the function is printed <span class="ent">➋</span>, it will be 1 because the value of the <span class="literal">eggs</span> variable outside the function does not affect the local variable inside the function. The value of <span class="literal">eggs</span> inside the <span class="literal">increaseEggs()</span> function is 1, and the global <span class="literal">eggs</span> variable still has the value of 12 <span class="ent">➌</span>.</p>
<h4 class="h4a" id="ch08lev2sec14"><strong>Mission #46: A Moving Block</strong></h4>
<p class="noindent">A while ago, I thought it would be cool to make a block move around the Minecraft world by itself. Every second it would move forward. If it hit a wall, a tree, or something tall, it would turn and make its way in a different direction. If it fell in a hole, however, it would get stuck and wouldn’t be able to escape.</p>
<p class="indent"><a href="ch08.xhtml#ch8ex5">Listing 8-5</a> is the start of a program to make a magical block that moves on its own.</p>
<p class="sidenote"><span class="blue"><em>movingBlock.py</em></span></p>
<p class="programs">   <span class="orange">from</span> mcpi.minecraft <span class="orange">import</span> Minecraft<br/>   mc = Minecraft.create()<br/><br/>   <span class="orange">import</span> time<br/><br/><br/>   <span class="orange">def</span> <span class="blue1">calculateMove</span>():<br/><br/>       <span class="green">""" Changes the x and z variables for a block. If the block<br/>       in front of the block is less than 2 blocks higher, it will move</span><br/>       <span class="green">forward; otherwise it will try to move left, then backward,</span><br/>       <span class="green">then finally right. """</span><br/><span class="ent">➊</span>     <span class="red"># Create global variables here</span><br/><br/>       currentHeight = mc.getHeight(x, z) - 1<br/><br/>       forwardHeight = mc.getHeight(x + 1, z)<br/>       rightHeight = mc.getHeight(x, z + 1)<br/>       backwardHeight = mc.getHeight(x - 1, z)<br/>       leftHeight = mc.getHeight(x, z - 1)<br/><br/>       <span class="orange">if</span> forwardHeight - currentHeight &lt; 3:<br/>           x += 1<br/>       <span class="orange">elif</span> rightHeight - currentHeight &lt; 3:<br/>           z += 1<br/>       <span class="orange">elif</span> leftHeight - currentHeight &lt; 3:<br/>           z -= 1<br/>       <span class="orange">elif</span> backwardHeight - currentHeight &lt; 3:<br/>           x -= 1<br/><br/>       y = mc.getHeight(x, z)<br/><br/><br/>   pos = mc.player.getTilePos()<br/>   x = pos.x<br/>   z = pos.z<br/>   y = mc.getHeight(x, z)<br/><br/>   <span class="orange">while True</span>:<br/>       <span class="red"># Calculate block movement</span><br/>       calculateMove()<br/><br/>       <span class="red"># Place block</span><br/>       mc.setBlock(x, y, z, 103)<br/><br/>       <span class="red"># Wait</span><br/>       time.sleep(1)<br/><br/>       <span class="red"># Remove the block</span><br/>       mc.setBlock(x, y, z, 0)</p>
<p class="examplet"><span epub:type="pagebreak" id="page_168"></span><a id="ch8ex5"></a><em>Listing 8-5: Unfortunately, this code won’t work until global variables are added.</em></p>
<p class="indent">But this code won’t run yet because the variables in the <span class="literal">calculateMove()</span> function aren’t global.</p>
<p class="indent">Your mission is to finish the code in <a href="ch08.xhtml#ch8ex5">Listing 8-5</a>. Copy it into IDLE and save it as <em>movingBlock.py</em> in the <em>functions</em> folder. Add code to the start of the function to make the <span class="literal">x</span>, <span class="literal">y</span>, and <span class="literal">z</span> variables global. The global definitions should be placed at <span class="ent">➊</span>.</p>
<p class="indent">After you’ve declared some global variables, run the program. Your block should move around. <a href="ch08.xhtml#ch8fig6">Figure 8-6</a> shows the block move up to a wall and then start to move around it.</p>
<div class="sidebar">
<p class="sidebart" id="ch08sb04"><strong>BONUS OBJECTIVE: A MORE INTELLIGENT MELON BLOCK</strong></p>
<p class="noindent">When you run the <em>movingBlock.py</em> program, you might notice that the block moves forward along the x-axis the most, sometimes causing it to get stuck in a loop between two blocks. The reason is that the code doesn’t take into account the directions that the block has already moved in and will always try to move along the x-axis first. Can you work out how to store the last direction that the block moved in and change the <span class="literal">if</span> statement to move in that direction first?</p>
</div>
<div class="image"><span epub:type="pagebreak" id="page_169"></span><img alt="image" src="../images/f08-06.jpg"/></div>
<p class="figcap"><a id="ch8fig6"></a><em>Figure 8-6: It was fun watching the melon move forward and then try to move around the wall.</em></p>
<h3 class="h3" id="ch08lev1sec04"><strong><span class="blue1">What You Learned</span></strong></h3>
<p class="noindent">Hooray! In this chapter, you learned how to create and call functions. With <span class="literal">return</span> statements you can make functions return values, and you can write loops and <span class="literal">if</span> statements inside functions. In <a href="ch09.xhtml#ch09">Chapter 9</a>, you’ll learn about lists, which allow you to store several pieces of data in a single variable.<span epub:type="pagebreak" id="page_170"></span></p>
</body>
</html>